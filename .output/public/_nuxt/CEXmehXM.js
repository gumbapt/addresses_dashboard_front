var U=Object.defineProperty;var P=(n,e,r)=>e in n?U(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var f=(n,e,r)=>P(n,typeof e!="symbol"?e+"":e,r);import{x as $,e as d,l as m,s as p}from"./BD4hcxan.js";class x{constructor(){f(this,"apiClient");this.apiClient=new $}async getDomains(e=1,r=15,a,c){try{let o=`/domains?page=${e}&per_page=${r}`;return a&&(o+=`&search=${encodeURIComponent(a)}`),c!==void 0&&(o+=`&is_active=${c}`),await this.apiClient.get(o)}catch(o){throw console.error("Get domains failed:",o),new Error("Failed to fetch domains")}}async getDomain(e){try{return await this.apiClient.get(`/domains/${e}`)}catch(r){throw console.error("Get domain failed:",r),new Error("Failed to fetch domain")}}async createDomain(e){try{return await this.apiClient.post("/domains",e)}catch(r){throw console.error("Create domain failed:",r),new Error("Failed to create domain")}}async updateDomain(e,r){try{return await this.apiClient.put(`/domains/${e}`,r)}catch(a){throw console.error("Update domain failed:",a),new Error("Failed to update domain")}}async deleteDomain(e){try{return await this.apiClient.delete(`/domains/${e}`)}catch(r){throw console.error("Delete domain failed:",r),new Error("Failed to delete domain")}}async regenerateApiKey(e){try{return await this.apiClient.post(`/domains/${e}/regenerate-api-key`)}catch(r){throw console.error("Regenerate API key failed:",r),new Error("Failed to regenerate API key")}}}class S{constructor(){f(this,"domainRepository");this.domainRepository=new x}async getDomains(e=1,r=15,a,c){try{const o=await this.domainRepository.getDomains(e,r,a,c);return{success:o.success,data:o,message:"Domains loaded successfully"}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error"}}}async getDomain(e){try{const r=await this.domainRepository.getDomain(e);return{success:r.success,data:r.data,message:"Domain loaded successfully"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async createDomain(e){try{const r=await this.domainRepository.createDomain(e);return{success:r.success,data:r.data,message:r.message||"Domain created successfully"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async updateDomain(e,r){try{const a=await this.domainRepository.updateDomain(e,r);return{success:a.success,data:a.data,message:a.message||"Domain updated successfully"}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async deleteDomain(e){try{const r=await this.domainRepository.deleteDomain(e);return{success:r.success,data:r.success,message:r.message||"Domain deleted successfully"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async regenerateApiKey(e){try{const r=await this.domainRepository.regenerateApiKey(e);return{success:r.success,data:r.data,message:"API key regenerated successfully"}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}}const G=()=>{const n=d([]),e=d(null),r=d(!1),a=d(null),c=new S,o=async(s=1,t=15,i,u)=>{r.value=!0,a.value=null;try{const l=await c.getDomains(s,t,i,u);l.success&&l.data?(n.value=l.data.data||[],e.value=l.data.pagination||null):(a.value=l.error||"Failed to load domains",n.value=[])}catch{a.value="Unexpected error loading domains",n.value=[]}finally{r.value=!1}},g=()=>{e.value&&e.value.current_page<e.value.last_page&&o(e.value.current_page+1,e.value.per_page)},w=()=>{e.value&&e.value.current_page>1&&o(e.value.current_page-1,e.value.per_page)},D=s=>{e.value&&s>=1&&s<=e.value.last_page&&o(s,e.value.per_page)},v=s=>{o(1,s)},h=s=>({...s,statusColor:s.is_active?"success":"error",createdDate:new Date(s.created_at).toLocaleDateString("en-US"),lastModified:new Date(s.updated_at).toLocaleDateString("en-US")}),_=m(()=>!n.value||!Array.isArray(n.value)?[]:n.value.map(h)),M=m(()=>e.value&&e.value.current_page<e.value.last_page),E=m(()=>e.value&&e.value.current_page>1),C=m(()=>{if(!e.value)return[];const s=[],t=e.value.current_page,i=e.value.last_page;let u=Math.max(1,t-2),l=Math.min(i,t+2);t<=3?l=Math.min(i,5):t>=i-2&&(u=Math.max(1,i-4));for(let y=u;y<=l;y++)s.push(y);return s}),F=async s=>{try{return await c.createDomain(s)}catch(t){return{success:!1,error:t instanceof Error?t.message:"Failed to create domain"}}},k=async(s,t)=>{try{return await c.updateDomain(s,t)}catch(i){return{success:!1,error:i instanceof Error?i.message:"Failed to update domain"}}},A=async s=>{try{return await c.deleteDomain(s)}catch(t){return{success:!1,error:t instanceof Error?t.message:"Failed to delete domain"}}},R=async s=>{try{return await c.regenerateApiKey(s)}catch(t){return{success:!1,error:t instanceof Error?t.message:"Failed to regenerate API key"}}};return{domains:p(n),pagination:p(e),loading:p(r),error:p(a),formattedDomains:_,canGoNext:M,canGoPrev:E,pageNumbers:C,loadDomains:o,nextPage:g,prevPage:w,goToPage:D,changePerPage:v,formatDomainForDisplay:h,createDomain:F,updateDomain:k,deleteDomain:A,regenerateApiKey:R}};export{G as u};
