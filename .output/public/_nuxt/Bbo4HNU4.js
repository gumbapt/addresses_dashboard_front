import{d as E,l as m,o as G,c as r,a as t,h as z,i as K,w as s,r as u,q as a,g as o,j as d,t as c,n as C,G as H,b as l}from"./CsriCXU6.js";import{_ as v}from"./YHQvJZVv.js";import{u as J}from"./C_eStl7q.js";const Q={class:"d-flex align-center justify-space-between"},X={class:"text-h4 font-weight-bold"},Y={class:"text-body-1 text-medium-emphasis"},Z={class:"d-flex justify-center align-center py-8"},tt={key:2},et={class:"d-flex align-center justify-space-between mb-2"},st={class:"text-h3 font-weight-bold text-primary"},ot={class:"d-flex align-center justify-space-between mb-2"},at={class:"text-h3 font-weight-bold text-success"},it={class:"d-flex align-center justify-space-between mb-2"},lt={class:"text-h3 font-weight-bold text-info"},nt={class:"d-flex align-center justify-space-between mb-2"},rt={class:"text-h3 font-weight-bold text-warning"},dt={key:0},ut={key:1,class:"text-center py-8"},pt={key:0},mt={key:1,class:"text-center py-8"},ct={key:0},ft={key:1,class:"text-center py-8"},ht={key:0},vt={key:1,class:"text-center py-8"},yt=E({__name:"dashboard",setup(_t){const R=H(),q=m(()=>parseInt(R.params.id)),{reportData:f,loading:F,error:D,loadDashboardStats:N,providerChartData:y,topStatesChartData:w,speedByStateChartData:S,technologyChartData:k,topCards:_}=J(),A=m(()=>f.value?.domain),B=m(()=>f.value?new Date(f.value.report_date).toLocaleDateString("en-US"):"");G(async()=>{await N(q.value)});const O=m(()=>({chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Provider Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:y.value.labels,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(i){return i.toFixed(1)+"%"}}})),W=m(()=>({chart:{type:"bar",fontFamily:"inherit",height:350,toolbar:{show:!1}},title:{text:"Top States by Requests",align:"left",style:{fontSize:"18px",fontWeight:600}},plotOptions:{bar:{horizontal:!1,borderRadius:8,columnWidth:"55%",distributed:!1}},dataLabels:{enabled:!1},xaxis:{categories:w.value.categories,labels:{style:{fontSize:"12px"}}},yaxis:{title:{text:"Number of Requests"}},colors:["#1976d2"],grid:{show:!0,borderColor:"#f0f0f0"}})),j=m(()=>({chart:{type:"bar",fontFamily:"inherit",height:350,toolbar:{show:!1}},title:{text:"Average Speed by State",align:"left",style:{fontSize:"18px",fontWeight:600}},plotOptions:{bar:{horizontal:!1,borderRadius:8,columnWidth:"55%",distributed:!1}},dataLabels:{enabled:!1},xaxis:{categories:S.value.categories,labels:{style:{fontSize:"12px"}}},yaxis:{title:{text:"Average Speed (Mbps)"}},colors:["#4caf50"],grid:{show:!0,borderColor:"#f0f0f0"}})),T=m(()=>({chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Technology Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:k.value.labels,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(i){return i.toFixed(1)+"%"}}})),L=i=>i>=1e6?(i/1e6).toFixed(1)+"M":i>=1e3?(i/1e3).toFixed(1)+"K":i.toString(),M=i=>i.toFixed(1)+"%",P=i=>i.toFixed(2),V=()=>{f.value?.domain_id?C(`/domains/${f.value.domain_id}/reports`):C("/reports")};return(i,e)=>{const I=u("v-btn"),n=u("v-col"),h=u("v-row"),U=u("v-progress-circular"),$=u("v-alert"),p=u("v-icon"),x=u("v-card-text"),b=u("v-card"),g=u("apexchart");return l(),r("div",null,[t(h,{class:"mb-4"},{default:s(()=>[t(n,{cols:"12"},{default:s(()=>[o("div",Q,[o("div",null,[t(I,{variant:"text","prepend-icon":"mdi-arrow-left",onClick:V,class:"mb-2"},{default:s(()=>e[0]||(e[0]=[d(" Back to Reports ")])),_:1}),o("h1",X,c(A.value?.name||"Report Dashboard"),1),o("p",Y," Report Date: "+c(B.value)+" | Analytics and statistics ",1)])])]),_:1})]),_:1}),a(F)?(l(),z(h,{key:0},{default:s(()=>[t(n,{cols:"12"},{default:s(()=>[t(v,null,{default:s(()=>[o("div",Z,[t(U,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):a(D)?(l(),z(h,{key:1},{default:s(()=>[t(n,{cols:"12"},{default:s(()=>[t(v,null,{default:s(()=>[t($,{type:"error",variant:"tonal",class:"mb-0"},{default:s(()=>[d(c(a(D)),1)]),_:1})]),_:1})]),_:1})]),_:1})):a(f)?(l(),r("div",tt,[t(h,{class:"mb-4"},{default:s(()=>[t(n,{cols:"12",sm:"6",md:"3"},{default:s(()=>[t(b,{elevation:"2",class:"h-100"},{default:s(()=>[t(x,null,{default:s(()=>[o("div",et,[e[2]||(e[2]=o("div",{class:"text-h6 text-medium-emphasis"},"Total Requests",-1)),t(p,{color:"primary",size:"32"},{default:s(()=>e[1]||(e[1]=[d("mdi-chart-line")])),_:1})]),o("div",st,c(L(a(_).totalRequests)),1),e[3]||(e[3]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," All time requests ",-1))]),_:1})]),_:1})]),_:1}),t(n,{cols:"12",sm:"6",md:"3"},{default:s(()=>[t(b,{elevation:"2",class:"h-100"},{default:s(()=>[t(x,null,{default:s(()=>[o("div",ot,[e[5]||(e[5]=o("div",{class:"text-h6 text-medium-emphasis"},"Success Rate",-1)),t(p,{color:"success",size:"32"},{default:s(()=>e[4]||(e[4]=[d("mdi-check-circle")])),_:1})]),o("div",at,c(M(a(_).successRate)),1),e[6]||(e[6]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Successful requests ",-1))]),_:1})]),_:1})]),_:1}),t(n,{cols:"12",sm:"6",md:"3"},{default:s(()=>[t(b,{elevation:"2",class:"h-100"},{default:s(()=>[t(x,null,{default:s(()=>[o("div",it,[e[8]||(e[8]=o("div",{class:"text-h6 text-medium-emphasis"},"Daily Average",-1)),t(p,{color:"info",size:"32"},{default:s(()=>e[7]||(e[7]=[d("mdi-calendar-today")])),_:1})]),o("div",lt,c(P(a(_).dailyAverage)),1),e[9]||(e[9]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Average per day ",-1))]),_:1})]),_:1})]),_:1}),t(n,{cols:"12",sm:"6",md:"3"},{default:s(()=>[t(b,{elevation:"2",class:"h-100"},{default:s(()=>[t(x,null,{default:s(()=>[o("div",nt,[e[11]||(e[11]=o("div",{class:"text-h6 text-medium-emphasis"},"Unique Providers",-1)),t(p,{color:"warning",size:"32"},{default:s(()=>e[10]||(e[10]=[d("mdi-domain")])),_:1})]),o("div",rt,c(a(_).uniqueProviders),1),e[12]||(e[12]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Different providers ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(h,{class:"mb-4"},{default:s(()=>[t(n,{cols:"12",md:"6"},{default:s(()=>[t(v,null,{default:s(()=>[a(y).series.length>0?(l(),r("div",dt,[t(g,{type:"donut",height:"350",options:O.value,series:a(y).series},null,8,["options","series"])])):(l(),r("div",ut,[t(p,{size:"64",color:"grey"},{default:s(()=>e[13]||(e[13]=[d("mdi-chart-donut")])),_:1}),e[14]||(e[14]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No provider data available",-1))]))]),_:1})]),_:1}),t(n,{cols:"12",md:"6"},{default:s(()=>[t(v,null,{default:s(()=>[a(w).data.length>0?(l(),r("div",pt,[t(g,{type:"bar",height:"350",options:W.value,series:[{name:"Requests",data:a(w).data}]},null,8,["options","series"])])):(l(),r("div",mt,[t(p,{size:"64",color:"grey"},{default:s(()=>e[15]||(e[15]=[d("mdi-chart-bar")])),_:1}),e[16]||(e[16]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No state data available",-1))]))]),_:1})]),_:1})]),_:1}),t(h,null,{default:s(()=>[t(n,{cols:"12",md:"6"},{default:s(()=>[t(v,null,{default:s(()=>[a(S).data.length>0?(l(),r("div",ct,[t(g,{type:"bar",height:"350",options:j.value,series:[{name:"Avg Speed (Mbps)",data:a(S).data}]},null,8,["options","series"])])):(l(),r("div",ft,[t(p,{size:"64",color:"grey"},{default:s(()=>e[17]||(e[17]=[d("mdi-speedometer")])),_:1}),e[18]||(e[18]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No speed data available",-1))]))]),_:1})]),_:1}),t(n,{cols:"12",md:"6"},{default:s(()=>[t(v,null,{default:s(()=>[a(k).series.length>0?(l(),r("div",ht,[t(g,{type:"donut",height:"350",options:T.value,series:a(k).series},null,8,["options","series"])])):(l(),r("div",vt,[t(p,{size:"64",color:"grey"},{default:s(()=>e[19]||(e[19]=[d("mdi-chart-donut")])),_:1}),e[20]||(e[20]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No technology data available",-1))]))]),_:1})]),_:1})]),_:1})])):K("",!0)])}}});export{yt as default};
