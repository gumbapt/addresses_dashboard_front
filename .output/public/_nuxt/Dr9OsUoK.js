import{d as ge,l as I,h as _,w as e,r as s,a as l,g as d,j as n,t as m,i as C,b as c,_ as ye,e as D,f as ke,o as Ve,c as $,q as g,F as pe,m as fe,k as De,v as Fe,u as Ie,C as Me}from"./AmEn0FOG.js";import{_ as ve}from"./DdF__TLh.js";import{u as Be}from"./DdKHjOGv.js";import{u as Ge}from"./BhWBj8MM.js";const je=["innerHTML"],Pe=ge({__name:"ConfirmDialog",props:{modelValue:{type:Boolean},title:{default:"Confirm"},message:{},type:{default:"confirm"},confirmText:{default:"Confirm"},cancelText:{default:"Cancel"},loading:{type:Boolean,default:!1}},emits:["update:modelValue","confirm","cancel"],setup(T,{emit:b}){const z=T,E=b,O=I({get:()=>z.modelValue,set:u=>E("update:modelValue",u)}),N=I(()=>{switch(z.type){case"warning":return"mdi-alert";case"danger":return"mdi-alert-circle";case"success":return"mdi-check-circle";case"info":return"mdi-information";case"alert":return"mdi-information";case"confirm":default:return"mdi-help-circle"}}),k=I(()=>{switch(z.type){case"warning":return"warning";case"danger":return"error";case"success":return"success";case"info":return"info";case"alert":return"info";case"confirm":default:return"primary"}}),x=I(()=>{switch(z.type){case"danger":return"error";case"warning":return"warning";case"success":return"success";default:return"primary"}}),M=()=>{E("confirm"),z.loading||(O.value=!1)},B=()=>{z.loading||(E("cancel"),O.value=!1)};return(u,p)=>{const h=s("v-icon"),L=s("v-card-title"),A=s("v-divider"),F=s("v-card-text"),j=s("v-spacer"),P=s("v-btn"),v=s("v-card-actions"),o=s("v-card"),i=s("v-dialog");return c(),_(i,{modelValue:O.value,"onUpdate:modelValue":p[0]||(p[0]=f=>O.value=f),"max-width":"500",persistent:""},{default:e(()=>[l(o,null,{default:e(()=>[l(L,{class:"d-flex align-center"},{default:e(()=>[l(h,{color:k.value,class:"mr-3",size:"28"},{default:e(()=>[n(m(N.value),1)]),_:1},8,["color"]),d("span",null,m(u.title),1)]),_:1}),l(A),l(F,{class:"pt-4 pb-3"},{default:e(()=>[d("div",{class:"text-body-1",innerHTML:u.message},null,8,je)]),_:1}),l(A),l(v,{class:"pa-4"},{default:e(()=>[l(j),u.type!=="alert"?(c(),_(P,{key:0,variant:"outlined",color:"grey",onClick:B,disabled:u.loading},{default:e(()=>[n(m(u.cancelText),1)]),_:1},8,["disabled"])):C("",!0),l(P,{color:x.value,variant:"flat",onClick:M,loading:u.loading,disabled:u.loading},{default:e(()=>[n(m(u.confirmText),1)]),_:1},8,["color","loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Se=ye(Pe,[["__scopeId","data-v-2b0e6b6e"]]),Te=()=>{const T=D({isOpen:!1,title:"Confirm",message:"",type:"confirm",confirmText:"Confirm",cancelText:"Cancel",loading:!1,resolve:void 0}),b=u=>new Promise(p=>{T.value={isOpen:!0,title:u.title||"Confirm",message:u.message,type:u.type||"confirm",confirmText:u.confirmText||"Confirm",cancelText:u.cancelText||"Cancel",loading:!1,resolve:p}});return{dialogState:T,showDialog:b,confirm:async(u,p)=>b({title:p||"Confirm Action",message:u,type:"confirm",confirmText:"Confirm",cancelText:"Cancel"}),alert:async(u,p)=>b({title:p||"Information",message:u,type:"alert",confirmText:"OK"}),warning:async(u,p)=>b({title:p||"Warning",message:u,type:"warning",confirmText:"Confirm",cancelText:"Cancel"}),danger:async(u,p)=>b({title:p||"Danger",message:u,type:"danger",confirmText:"Delete",cancelText:"Cancel"}),success:async(u,p)=>b({title:p||"Success",message:u,type:"success",confirmText:"OK"}),handleConfirm:()=>{T.value.resolve&&T.value.resolve(!0),T.value.isOpen=!1},handleCancel:()=>{T.value.resolve&&T.value.resolve(!1),T.value.isOpen=!1},setLoading:u=>{T.value.loading=u}}},qe={class:"batch-domain-selector"},We={key:1},He={key:1,class:"mb-4"},Ke={class:"d-flex align-center justify-space-between mb-2"},Re={class:"text-subtitle-1"},Je={key:2},Qe={class:"d-flex align-center justify-space-between mb-2"},Xe={class:"text-subtitle-1"},Ye=ge({__name:"BatchDomainSelector",props:{groupId:{},groupName:{},onSuccess:{type:Function}},setup(T){const b=T,{domains:z,loadDomains:E}=Be(),{addDomainsToGroup:O}=Ge(),N=ke(),k=Te(),x=D([]),M=D(!1),B=D(!1),u=I(()=>z.value.filter(v=>!0)),p=I(()=>{const v={"No Group":[],"Other Groups":[]};return u.value.forEach(o=>{o.domain_group_id?o.domain_group_id!==b.groupId&&v["Other Groups"].push(o):v["No Group"].push(o)}),v}),h=I(()=>x.value.some(v=>{const o=u.value.find(i=>i.id===v);return o&&o.domain_group_id&&o.domain_group_id!==b.groupId})),L=I(()=>x.value.filter(v=>{const o=u.value.find(i=>i.id===v);return o&&o.domain_group_id&&o.domain_group_id!==b.groupId}).length),A=v=>{const o=x.value.indexOf(v);o>-1?x.value.splice(o,1):x.value.push(v)},F=v=>{(p.value[v]||[]).forEach(i=>{x.value.includes(i.id)||x.value.push(i.id)})},j=()=>{x.value=[]},P=async()=>{if(x.value.length===0){N.warning("Please select at least one domain");return}if(!(h.value&&!await k.warning(`<p><strong>${L.value} domain(s) will be MOVED</strong> from their current groups.</p><p class="mt-2">Do you want to continue?</p>`,"‚ö†Ô∏è Domain Move Warning"))){B.value=!0;try{const v=await O(b.groupId,x.value);if(v.success){if(v.data?.domains_moved>0){const o=v.data.moved_from||[],i=o.map(U=>U.domain_name).join(", "),f=[...new Set(o.map(U=>U.current_group_name))].join(", ");N.warning(`${v.data.domains_moved} domain(s) were moved from: ${f}`)}N.success(v.message||"Domains added successfully"),x.value=[],b.onSuccess&&b.onSuccess(),await E()}else N.error(v.error||"Failed to add domains")}catch(v){N.error(v instanceof Error?v.message:"Unexpected error")}finally{B.value=!1}}};return Ve(async()=>{M.value=!0,await E(),M.value=!1}),(v,o)=>{const i=Se,f=s("v-btn"),U=s("v-card-title"),X=s("v-progress-circular"),w=s("v-alert"),G=s("v-icon"),se=s("v-checkbox"),Y=s("v-list-item-title"),ie=s("v-list-item-subtitle"),re=s("v-list-item"),ue=s("v-list"),Z=s("v-chip"),de=s("v-card-text"),_e=s("v-spacer"),ce=s("v-card-actions");return c(),$("div",qe,[l(i,{modelValue:g(k).dialogState.value.isOpen,"onUpdate:modelValue":o[0]||(o[0]=y=>g(k).dialogState.value.isOpen=y),title:g(k).dialogState.value.title,message:g(k).dialogState.value.message,type:g(k).dialogState.value.type,confirmText:g(k).dialogState.value.confirmText,cancelText:g(k).dialogState.value.cancelText,loading:g(k).dialogState.value.loading,onConfirm:g(k).handleConfirm,onCancel:g(k).handleCancel},null,8,["modelValue","title","message","type","confirmText","cancelText","loading","onConfirm","onCancel"]),l(U,{class:"d-flex align-center justify-space-between px-0"},{default:e(()=>[d("span",null,"Add Domains to "+m(v.groupName),1),d("div",null,[l(f,{size:"small",variant:"text",onClick:j,disabled:x.value.length===0},{default:e(()=>o[3]||(o[3]=[n(" Clear Selection ")])),_:1},8,["disabled"])])]),_:1}),l(de,{class:"px-0"},{default:e(()=>[M.value?(c(),_(w,{key:0,type:"info",variant:"tonal"},{default:e(()=>[l(X,{indeterminate:"",size:"20",class:"mr-2"}),o[4]||(o[4]=n(" Loading domains... "))]),_:1})):(c(),$("div",We,[h.value?(c(),_(w,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mb-4"},{default:e(()=>[o[5]||(o[5]=d("strong",null,"‚ö†Ô∏è Warning:",-1)),n(" "+m(L.value)+" domain(s) will be MOVED from their current groups. ",1)]),_:1})):C("",!0),p.value["No Group"].length>0?(c(),$("div",He,[d("div",Ke,[d("h4",Re,[l(G,{size:"small",class:"mr-1"},{default:e(()=>o[6]||(o[6]=[n("mdi-folder-open-outline")])),_:1}),n(" Ungrouped Domains ("+m(p.value["No Group"].length)+") ",1)]),l(f,{size:"x-small",variant:"text",color:"primary",onClick:o[1]||(o[1]=y=>F("No Group"))},{default:e(()=>o[7]||(o[7]=[n(" Select All ")])),_:1})]),l(ue,{density:"compact",class:"domain-list"},{default:e(()=>[(c(!0),$(pe,null,fe(p.value["No Group"],y=>(c(),_(re,{key:y.id,onClick:R=>A(y.id),class:"cursor-pointer"},{prepend:e(()=>[l(se,{"model-value":x.value.includes(y.id),onClick:De(R=>A(y.id),["stop"]),"hide-details":"",density:"compact"},null,8,["model-value","onClick"])]),default:e(()=>[l(Y,null,{default:e(()=>[n(m(y.name),1)]),_:2},1024),l(ie,null,{default:e(()=>[n(m(y.domain_url),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})])):C("",!0),p.value["Other Groups"].length>0?(c(),$("div",Je,[d("div",Qe,[d("h4",Xe,[l(G,{size:"small",class:"mr-1",color:"warning"},{default:e(()=>o[8]||(o[8]=[n("mdi-folder-swap-outline")])),_:1}),n(" Domains in Other Groups ("+m(p.value["Other Groups"].length)+") ",1)]),l(f,{size:"x-small",variant:"text",color:"warning",onClick:o[2]||(o[2]=y=>F("Other Groups"))},{default:e(()=>o[9]||(o[9]=[n(" Select All ")])),_:1})]),l(w,{type:"info",variant:"tonal",density:"compact",class:"mb-2"},{default:e(()=>o[10]||(o[10]=[n(" These domains will be MOVED from their current groups ")])),_:1}),l(ue,{density:"compact",class:"domain-list"},{default:e(()=>[(c(!0),$(pe,null,fe(p.value["Other Groups"],y=>(c(),_(re,{key:y.id,onClick:R=>A(y.id),class:"cursor-pointer"},{prepend:e(()=>[l(se,{"model-value":x.value.includes(y.id),onClick:De(R=>A(y.id),["stop"]),"hide-details":"",density:"compact",color:"warning"},null,8,["model-value","onClick"])]),default:e(()=>[l(Y,null,{default:e(()=>[n(m(y.name),1)]),_:2},1024),l(ie,null,{default:e(()=>[n(m(y.domain_url)+" ",1),y.domainGroup?(c(),_(Z,{key:0,size:"x-small",color:"warning",variant:"outlined",class:"ml-2"},{default:e(()=>[n(" Currently in: "+m(y.domainGroup.name),1)]),_:2},1024)):C("",!0)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})])):C("",!0),u.value.length===0?(c(),_(w,{key:3,type:"info",variant:"tonal"},{default:e(()=>o[11]||(o[11]=[n(" No domains available. All domains are already in this group. ")])),_:1})):C("",!0)]))]),_:1}),l(ce,{class:"px-0"},{default:e(()=>[l(Z,{color:"info",variant:"tonal"},{default:e(()=>[n(m(x.value.length)+" domain(s) selected ",1)]),_:1}),l(_e),l(f,{color:"primary",onClick:P,loading:B.value,disabled:B.value||x.value.length===0||M.value},{default:e(()=>o[12]||(o[12]=[n(" Add Selected Domains ")])),_:1},8,["loading","disabled"])]),_:1})])}}}),Ze=ye(Ye,[["__scopeId","data-v-02904fe3"]]),el={class:"d-flex align-center justify-space-between"},ll={class:"d-flex gap-2"},tl={class:"d-flex justify-center align-center py-8"},al={class:"d-flex align-center"},nl={class:"font-weight-medium"},ol={class:"text-caption text-medium-emphasis"},sl={class:"text-truncate",style:{"max-width":"300px"}},il={key:0},rl={key:0,class:"text-caption text-error mt-1"},ul={class:"d-flex justify-center gap-1"},dl={class:"d-flex justify-end mt-4"},cl={class:"text-body-2 text-medium-emphasis"},ml={key:0,class:"text-center py-4"},vl={key:1},pl=ge({__name:"index",setup(T){const{formattedGroups:b,loading:z,error:E,loadDomainGroups:O,createDomainGroup:N,updateDomainGroup:k,deleteDomainGroup:x,getGroupDomains:M}=Ge();Fe();const{user:B}=Ie(),u=Te(),p=I(()=>B.value?.is_super_admin===!0),h=ke(),L=D(""),A=D("all"),F=D(!1),j=D(!1),P=D(!1),v=D(!1),o=D(!1),i=D(null),f=D({name:"",description:"",is_active:!0,max_domains:null,settings:{}}),U=D([]),X=D(!1),w=D(!1),G=D(null),se=[{value:"all",label:"All Status"},{value:!0,label:"Active"},{value:!1,label:"Inactive"}],Y=I(()=>b.value.filter(r=>{const t=r.name.toLowerCase().includes(L.value.toLowerCase())||r.description&&r.description.toLowerCase().includes(L.value.toLowerCase()),J=A.value==="all"||r.is_active===A.value;return t&&J})),ie=()=>{if(!p.value){h.warning("Only Super Admins can create domain groups");return}i.value=null,f.value={name:"",description:"",is_active:!0,max_domains:null,settings:{}},F.value=!0},re=r=>{if(!p.value){h.warning("Only Super Admins can edit domain groups");return}i.value={...r},f.value={name:r.name,description:r.description||"",is_active:r.is_active,max_domains:r.max_domains,settings:r.settings||{}},j.value=!0},ue=async r=>{if(!p.value){h.warning("Only Super Admins can delete domain groups");return}await u.danger(`<p>Are you sure you want to delete the group <strong>"${r.name}"</strong>?</p><p class="mt-2">This action cannot be undone.</p>`+(r.domainsCount>0?`<p class="mt-2 text-warning"><strong>‚ö†Ô∏è Warning:</strong> This group contains ${r.domainsCount} domain(s). They will become ungrouped.</p>`:""),"üóëÔ∏è Delete Domain Group")&&(i.value=r,await R())},Z=async r=>{i.value=r,v.value=!0,await ce(r.id)},de=r=>{i.value=r,o.value=!0},_e=async()=>{await O(),i.value&&await ce(i.value.id),o.value=!1},ce=async r=>{X.value=!0;try{console.log("üîç Loading domains for group ID:",r);const t=await M(r);if(console.log("üîç Result from getGroupDomains:",t),t.success&&t.data){const J=t.data;console.log("üîç Setting groupDomains to:",J),U.value=J}else console.error("‚ùå Failed:",t),U.value=[]}catch(t){console.error("‚ùå Error:",t),U.value=[]}finally{X.value=!1}},y=async()=>{w.value=!0,G.value=null;try{let r;console.log("üîç saveGroup - selectedGroup:",i.value),console.log("üîç saveGroup - mode:",i.value?"UPDATE":"CREATE"),i.value?(console.log("üîç Updating group ID:",i.value.id),r=await k(i.value.id,f.value)):(console.log("üîç Creating new group"),r=await N(f.value)),console.log("üîç saveGroup - result:",r),r.success?(F.value=!1,j.value=!1,i.value=null,h.success(r.message||"Domain group saved successfully"),await O()):(G.value=r.error||"Failed to save domain group",h.error(r.error||"Failed to save domain group"))}catch(r){G.value=r instanceof Error?r.message:"Unexpected error",h.error(r instanceof Error?r.message:"Unexpected error")}finally{w.value=!1}},R=async()=>{if(i.value){w.value=!0,G.value=null;try{const r=await x(i.value.id);r.success?(P.value=!1,i.value=null,h.success("Domain group deleted successfully"),await O()):(G.value=r.error||"Failed to delete domain group",h.error(r.error||"Failed to delete domain group"))}catch(r){G.value=r instanceof Error?r.message:"Unexpected error",h.error(r instanceof Error?r.message:"Unexpected error")}finally{w.value=!1}}},he=()=>{L.value="",A.value="all"};return Ve(()=>{O()}),(r,t)=>{const J=Se,S=s("v-btn"),W=s("v-alert"),V=s("v-col"),q=s("v-row"),ee=s("v-text-field"),$e=s("v-select"),H=s("v-chip"),xe=s("v-progress-circular"),K=s("v-icon"),Ae=s("v-tooltip"),Oe=s("v-table"),le=s("v-card-title"),Ce=s("v-textarea"),be=s("v-switch"),we=s("v-form"),te=s("v-card-text"),me=s("v-spacer"),ae=s("v-card-actions"),ne=s("v-card"),oe=s("v-dialog"),Ue=s("v-list-item-title"),ze=s("v-list-item-subtitle"),Ee=s("v-list-item"),Ne=s("v-list"),Le=s("v-divider");return c(),$("div",null,[l(J,{modelValue:g(u).dialogState.value.isOpen,"onUpdate:modelValue":t[0]||(t[0]=a=>g(u).dialogState.value.isOpen=a),title:g(u).dialogState.value.title,message:g(u).dialogState.value.message,type:g(u).dialogState.value.type,confirmText:g(u).dialogState.value.confirmText,cancelText:g(u).dialogState.value.cancelText,loading:g(u).dialogState.value.loading,onConfirm:g(u).handleConfirm,onCancel:g(u).handleCancel},null,8,["modelValue","title","message","type","confirmText","cancelText","loading","onConfirm","onCancel"]),l(q,{class:"mb-4"},{default:e(()=>[l(V,{cols:"12"},{default:e(()=>[d("div",el,[t[24]||(t[24]=d("div",null,[d("h1",{class:"text-h4 font-weight-bold"},"Domain Groups"),d("p",{class:"text-body-1 text-medium-emphasis"}," Organize and manage domain groups ")],-1)),p.value?(c(),_(S,{key:0,color:"primary","prepend-icon":"mdi-plus",onClick:ie,size:"large"},{default:e(()=>t[22]||(t[22]=[n(" Create Group ")])),_:1})):(c(),_(W,{key:1,type:"info",variant:"tonal",density:"compact"},{default:e(()=>t[23]||(t[23]=[n(" Only Super Admins can create groups ")])),_:1}))])]),_:1})]),_:1}),l(q,{class:"mb-6"},{default:e(()=>[l(V,{cols:"12"},{default:e(()=>[l(ve,{title:"Filters"},{default:e(()=>[l(q,null,{default:e(()=>[l(V,{cols:"12",md:"6"},{default:e(()=>[l(ee,{modelValue:L.value,"onUpdate:modelValue":t[1]||(t[1]=a=>L.value=a),label:"Search by name or description","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),l(V,{cols:"12",md:"6"},{default:e(()=>[l($e,{modelValue:A.value,"onUpdate:modelValue":t[2]||(t[2]=a=>A.value=a),items:se,"item-title":"label","item-value":"value",label:"Status",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),l(q,null,{default:e(()=>[l(V,{cols:"12"},{default:e(()=>[d("div",ll,[l(S,{variant:"outlined",onClick:he,"prepend-icon":"mdi-refresh"},{default:e(()=>t[25]||(t[25]=[n(" Clear Filters ")])),_:1}),l(H,{color:"primary",variant:"tonal",class:"ml-auto"},{default:e(()=>[n(m(Y.value.length)+" groups found ",1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),g(z)?(c(),_(q,{key:0},{default:e(()=>[l(V,{cols:"12"},{default:e(()=>[l(ve,null,{default:e(()=>[d("div",tl,[l(xe,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):g(E)?(c(),_(q,{key:1},{default:e(()=>[l(V,{cols:"12"},{default:e(()=>[l(ve,null,{default:e(()=>[l(W,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[n(m(g(E)),1)]),_:1})]),_:1})]),_:1})]),_:1})):(c(),_(q,{key:2},{default:e(()=>[l(V,{cols:"12"},{default:e(()=>[l(ve,{title:"Domain Groups List"},{default:e(()=>[l(Oe,{"fixed-header":"",height:"600px"},{default:e(()=>[t[34]||(t[34]=d("thead",null,[d("tr",null,[d("th",{class:"text-left"},"Name"),d("th",{class:"text-left"},"Description"),d("th",{class:"text-left"},"Domains"),d("th",{class:"text-left"},"Limit"),d("th",{class:"text-left"},"Status"),d("th",{class:"text-left"},"Created At"),d("th",{class:"text-center"},"Actions")])],-1)),d("tbody",null,[(c(!0),$(pe,null,fe(Y.value,a=>(c(),$("tr",{key:a.id},[d("td",null,[d("div",al,[l(K,{class:"mr-2",color:a.is_active?"primary":"grey"},{default:e(()=>t[26]||(t[26]=[n(" mdi-folder ")])),_:2},1032,["color"]),d("div",null,[d("div",nl,m(a.name),1),d("div",ol,m(a.slug),1)])])]),d("td",null,[d("div",sl,m(a.description||"-"),1)]),d("td",null,[l(H,{color:"info",variant:"tonal",size:"small",onClick:Q=>Z(a),style:{cursor:"pointer"}},{default:e(()=>[n(m(a.domainsCount)+" domains ",1)]),_:2},1032,["onClick"])]),d("td",null,[a.max_domains?(c(),$("div",il,[l(H,{color:a.isFull?"error":"success",variant:"tonal",size:"small"},{default:e(()=>[n(m(a.limitLabel),1)]),_:2},1032,["color"]),a.isFull?(c(),$("div",rl," Full ")):C("",!0)])):(c(),_(H,{key:1,variant:"outlined",size:"small"},{default:e(()=>t[27]||(t[27]=[n(" Unlimited ")])),_:1}))]),d("td",null,[l(H,{color:a.statusColor,variant:"tonal",size:"small"},{default:e(()=>[n(m(a.statusLabel),1)]),_:2},1032,["color"])]),d("td",null,m(a.createdDate),1),d("td",null,[d("div",ul,[l(S,{icon:"",size:"small",variant:"text",color:"info",onClick:Q=>Z(a),title:"View Domains"},{default:e(()=>[l(K,null,{default:e(()=>t[28]||(t[28]=[n("mdi-eye")])),_:1})]),_:2},1032,["onClick"]),p.value?(c(),_(S,{key:0,icon:"",size:"small",variant:"text",color:"success",onClick:Q=>de(a),title:"Add Domains"},{default:e(()=>[l(K,null,{default:e(()=>t[29]||(t[29]=[n("mdi-plus-circle")])),_:1})]),_:2},1032,["onClick"])):C("",!0),p.value?(c(),_(S,{key:1,icon:"",size:"small",variant:"text",color:"primary",onClick:Q=>re(a),title:"Edit"},{default:e(()=>[l(K,null,{default:e(()=>t[30]||(t[30]=[n("mdi-pencil")])),_:1})]),_:2},1032,["onClick"])):C("",!0),p.value?(c(),_(S,{key:2,icon:"",size:"small",variant:"text",color:"error",onClick:Q=>ue(a),title:"Delete",disabled:a.domainsCount>0},{default:e(()=>[l(K,null,{default:e(()=>t[31]||(t[31]=[n("mdi-delete")])),_:1})]),_:2},1032,["onClick","disabled"])):C("",!0),p.value&&a.domainsCount>0?(c(),_(Ae,{key:3,location:"top"},{activator:e(({props:Q})=>[l(K,Me({ref_for:!0},Q,{size:"small",color:"grey"}),{default:e(()=>t[32]||(t[32]=[n("mdi-information")])),_:2},1040)]),default:e(()=>[t[33]||(t[33]=n(" Cannot delete group with domains "))]),_:1})):C("",!0)])])]))),128))])]),_:1}),d("div",dl,[d("div",cl," Total: "+m(g(b).length)+" groups ",1)])]),_:1})]),_:1})]),_:1})),l(oe,{modelValue:F.value,"onUpdate:modelValue":t[8]||(t[8]=a=>F.value=a),"max-width":"700px",scrollable:""},{default:e(()=>[l(ne,null,{default:e(()=>[l(le,null,{default:e(()=>t[35]||(t[35]=[n("Create Domain Group")])),_:1}),l(te,null,{default:e(()=>[l(we,null,{default:e(()=>[l(q,null,{default:e(()=>[l(V,{cols:"12"},{default:e(()=>[l(ee,{modelValue:f.value.name,"onUpdate:modelValue":t[3]||(t[3]=a=>f.value.name=a),label:"Group Name",variant:"outlined",required:"",placeholder:"e.g., Production Sites",hint:"A unique name for this group","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(V,{cols:"12"},{default:e(()=>[l(Ce,{modelValue:f.value.description,"onUpdate:modelValue":t[4]||(t[4]=a=>f.value.description=a),label:"Description",variant:"outlined",rows:"3",placeholder:"Describe the purpose of this group...",hint:"Optional description","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(V,{cols:"12",md:"6"},{default:e(()=>[l(ee,{modelValue:f.value.max_domains,"onUpdate:modelValue":t[5]||(t[5]=a=>f.value.max_domains=a),modelModifiers:{number:!0},label:"Max Domains",variant:"outlined",type:"number",min:"1",placeholder:"Leave empty for unlimited",hint:"Maximum number of domains allowed in this group","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1}),l(V,{cols:"12",md:"6"},{default:e(()=>[l(be,{modelValue:f.value.is_active,"onUpdate:modelValue":t[6]||(t[6]=a=>f.value.is_active=a),label:"Active Group",color:"primary",hint:"Inactive groups cannot accept new domains","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(ae,null,{default:e(()=>[l(me),G.value?(c(),_(W,{key:0,type:"error",variant:"tonal",density:"compact",class:"mr-4"},{default:e(()=>[n(m(G.value),1)]),_:1})):C("",!0),l(S,{onClick:t[7]||(t[7]=a=>F.value=!1),disabled:w.value},{default:e(()=>t[36]||(t[36]=[n("Cancel")])),_:1},8,["disabled"]),l(S,{color:"primary",onClick:y,loading:w.value,disabled:w.value},{default:e(()=>t[37]||(t[37]=[n("Create Group")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(oe,{modelValue:j.value,"onUpdate:modelValue":t[14]||(t[14]=a=>j.value=a),"max-width":"700px",scrollable:""},{default:e(()=>[l(ne,null,{default:e(()=>[l(le,null,{default:e(()=>[n("Edit Domain Group: "+m(i.value?.name),1)]),_:1}),l(te,null,{default:e(()=>[l(we,null,{default:e(()=>[l(q,null,{default:e(()=>[l(V,{cols:"12"},{default:e(()=>[l(ee,{modelValue:f.value.name,"onUpdate:modelValue":t[9]||(t[9]=a=>f.value.name=a),label:"Group Name",variant:"outlined",required:""},null,8,["modelValue"])]),_:1}),l(V,{cols:"12"},{default:e(()=>[l(Ce,{modelValue:f.value.description,"onUpdate:modelValue":t[10]||(t[10]=a=>f.value.description=a),label:"Description",variant:"outlined",rows:"3"},null,8,["modelValue"])]),_:1}),l(V,{cols:"12",md:"6"},{default:e(()=>[l(ee,{modelValue:f.value.max_domains,"onUpdate:modelValue":t[11]||(t[11]=a=>f.value.max_domains=a),modelModifiers:{number:!0},label:"Max Domains",variant:"outlined",type:"number",min:"1",placeholder:"Leave empty for unlimited",hint:"Cannot be less than current domain count","persistent-hint":"",clearable:""},null,8,["modelValue"]),i.value&&i.value.domainsCount>0?(c(),_(W,{key:0,type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:e(()=>[n(" Current domains: "+m(i.value.domainsCount),1)]),_:1})):C("",!0)]),_:1}),l(V,{cols:"12",md:"6"},{default:e(()=>[l(be,{modelValue:f.value.is_active,"onUpdate:modelValue":t[12]||(t[12]=a=>f.value.is_active=a),label:"Active Group",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(ae,null,{default:e(()=>[l(me),G.value?(c(),_(W,{key:0,type:"error",variant:"tonal",density:"compact",class:"mr-4"},{default:e(()=>[n(m(G.value),1)]),_:1})):C("",!0),l(S,{onClick:t[13]||(t[13]=a=>j.value=!1),disabled:w.value},{default:e(()=>t[38]||(t[38]=[n("Cancel")])),_:1},8,["disabled"]),l(S,{color:"primary",onClick:y,loading:w.value,disabled:w.value},{default:e(()=>t[39]||(t[39]=[n("Save Changes")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(oe,{modelValue:P.value,"onUpdate:modelValue":t[16]||(t[16]=a=>P.value=a),"max-width":"400px"},{default:e(()=>[l(ne,null,{default:e(()=>[l(le,null,{default:e(()=>t[40]||(t[40]=[n("Confirm Deletion")])),_:1}),l(te,null,{default:e(()=>[t[41]||(t[41]=d("p",null,"Are you sure you want to delete this domain group?",-1)),d("p",null,[d("strong",null,m(i.value?.name),1)]),i.value&&i.value.domainsCount>0?(c(),_(W,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mt-4"},{default:e(()=>[n(" This group has "+m(i.value.domainsCount)+" domain(s). Please remove them first. ",1)]),_:1})):C("",!0),G.value?(c(),_(W,{key:1,type:"error",variant:"tonal",density:"compact",class:"mt-4"},{default:e(()=>[n(m(G.value),1)]),_:1})):C("",!0)]),_:1}),l(ae,null,{default:e(()=>[l(me),l(S,{onClick:t[15]||(t[15]=a=>P.value=!1),disabled:w.value},{default:e(()=>t[42]||(t[42]=[n("Cancel")])),_:1},8,["disabled"]),l(S,{color:"error",onClick:R,loading:w.value,disabled:w.value||i.value&&i.value.domainsCount>0},{default:e(()=>t[43]||(t[43]=[n(" Delete ")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(oe,{modelValue:v.value,"onUpdate:modelValue":t[19]||(t[19]=a=>v.value=a),"max-width":"800px",scrollable:""},{default:e(()=>[l(ne,null,{default:e(()=>[l(le,null,{default:e(()=>[n("Domains in "+m(i.value?.name),1)]),_:1}),l(te,null,{default:e(()=>[X.value?(c(),$("div",ml,[l(xe,{indeterminate:"",color:"primary"})])):U.value.length===0?(c(),$("div",vl,[l(W,{type:"info",variant:"tonal"},{default:e(()=>t[44]||(t[44]=[n(" No domains in this group yet ")])),_:1})])):(c(),_(Ne,{key:2,density:"compact"},{default:e(()=>[(c(!0),$(pe,null,fe(U.value,a=>(c(),_(Ee,{key:a.id},{prepend:e(()=>[l(K,{color:"primary"},{default:e(()=>t[45]||(t[45]=[n("mdi-web")])),_:1})]),append:e(()=>[l(H,{color:a.is_active?"success":"error",size:"small",variant:"tonal"},{default:e(()=>[n(m(a.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),default:e(()=>[l(Ue,null,{default:e(()=>[n(m(a.name),1)]),_:2},1024),l(ze,null,{default:e(()=>[n(m(a.domain_url),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1}),l(ae,null,{default:e(()=>[l(H,{color:"info",variant:"tonal"},{default:e(()=>[n(m(U.value.length)+" domain(s) ",1)]),_:1}),l(me),p.value?(c(),_(S,{key:0,color:"success",variant:"outlined",onClick:t[17]||(t[17]=a=>{v.value=!1,de(i.value)})},{default:e(()=>[l(K,{start:""},{default:e(()=>t[46]||(t[46]=[n("mdi-plus")])),_:1}),t[47]||(t[47]=n(" Add Domains "))]),_:1})):C("",!0),l(S,{onClick:t[18]||(t[18]=a=>v.value=!1)},{default:e(()=>t[48]||(t[48]=[n("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(oe,{modelValue:o.value,"onUpdate:modelValue":t[21]||(t[21]=a=>o.value=a),"max-width":"900px",scrollable:""},{default:e(()=>[l(ne,null,{default:e(()=>[l(le,{class:"d-flex align-center justify-space-between"},{default:e(()=>[d("span",null,"Manage Domains: "+m(i.value?.name),1),i.value?.max_domains?(c(),_(H,{key:0,color:i.value?.isFull?"error":"info",variant:"tonal",size:"small"},{default:e(()=>[n(m(i.value?.limitLabel),1)]),_:1},8,["color"])):C("",!0)]),_:1}),l(Le),l(te,null,{default:e(()=>[i.value?(c(),_(Ze,{key:0,"group-id":i.value.id,"group-name":i.value.name,"on-success":_e},null,8,["group-id","group-name"])):C("",!0)]),_:1}),l(ae,null,{default:e(()=>[l(S,{onClick:t[20]||(t[20]=a=>o.value=!1)},{default:e(()=>t[49]||(t[49]=[n("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),xl=ye(pl,[["__scopeId","data-v-bbd7a5ba"]]);export{xl as default};
