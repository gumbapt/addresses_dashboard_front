import{U as ft}from"./DnW4m9Vm.js";import{x as gt,e as P,l as ee,d as yt,G as Ot,H as ue,o as bt,c as g,a,h as b,i as y,r as D,w as e,q as r,j as n,p as Bt,g as o,C as Be,t as i,F as _e,m as he,n as Oe,b as d,_ as ht,s as De,I as Et,y as lt,z as st,J as rt,k as Nt,D as Wt}from"./CsriCXU6.js";import{_ as M}from"./YHQvJZVv.js";import{_ as vt}from"./CvibKqAr.js";import{u as It}from"./C6NzWVvp.js";import{R as xt,u as Yt}from"./DS_xkyki.js";import{u as Gt}from"./DhUEAMEv.js";import{u as Ht}from"./C_eStl7q.js";import{u as Kt}from"./BccrCVIi.js";class Xt{apiClient;constructor(){this.apiClient=new gt}async getRankings(v){try{const p=new URLSearchParams;v?.provider_id&&p.append("provider_id",v.provider_id.toString()),v?.technology&&p.append("technology",v.technology),v?.period&&p.append("period",v.period),v?.date_from&&p.append("date_from",v.date_from),v?.date_to&&p.append("date_to",v.date_to),v?.sort_by&&p.append("sort_by",v.sort_by),v?.aggregate_by_provider!==void 0&&p.append("aggregate_by_provider",v.aggregate_by_provider?"true":"false"),v?.page&&p.append("page",v.page.toString()),v?.per_page&&p.append("per_page",v.per_page.toString()),v?.limit&&!v?.page&&!v?.per_page&&p.append("limit",v.limit.toString());const L=`/reports/global/provider-ranking${p.toString()?`?${p.toString()}`:""}`;console.log("ðŸ” ProviderRankingRepository - URL:",L);const x=await this.apiClient.get(L);return console.log("ðŸ” ProviderRankingRepository - Response:",x),x}catch(p){throw console.error("ProviderRankingRepository - getRankings error:",p),p}}}class Jt{providerRankingRepository;constructor(){this.providerRankingRepository=new Xt}async getProviderRankings(v){try{console.log("ðŸ” ProviderRankingService - getProviderRankings filters:",v);const p=await this.providerRankingRepository.getRankings(v);return console.log("ðŸ” ProviderRankingService - response:",p),p.success&&p.data?Array.isArray(p.data)?{success:!0,data:{rankings:p.data,totalEntries:p.pagination?.total||p.data.length,filters:p.filters||{},pagination:p.pagination,availableProviders:p.available_providers||[],aggregatedStats:p.aggregated_stats||void 0,globalStats:p.global_stats||void 0}}:{success:!0,data:{rankings:p.data.ranking||[],totalEntries:p.data.total_entries||0,filters:p.data.filters||{},availableProviders:p.available_providers||[],aggregatedStats:p.aggregated_stats||void 0,globalStats:p.global_stats||void 0}}:{success:!1,error:"Failed to fetch provider rankings"}}catch(p){return console.error("ProviderRankingService - getProviderRankings error:",p),{success:!1,error:p instanceof Error?p.message:"Failed to fetch provider rankings"}}}async getTopProviderDomain(v){try{const p=await this.providerRankingRepository.getRankings({provider_id:v,limit:1});if(p.success&&p.data){const L=Array.isArray(p.data)?p.data:p.data.ranking||[];if(L.length>0)return{success:!0,data:L[0]}}return{success:!0,data:null}}catch(p){return console.error("ProviderRankingService - getTopProviderDomain error:",p),{success:!1,error:p instanceof Error?p.message:"Failed to fetch top provider domain"}}}}const kt=()=>{const F=P([]),v=P(0),p=P(null),L=P([]),x=P(null),H=P(null),R=P({technology:null,provider_id:null,period:"all_time",sort_by:"total_requests",page:1,per_page:15,aggregate_by_provider:!1}),A=P(!1),q=P(null),X=new Jt,h=P("total_requests"),z=ee(()=>{let T=F.value.map(C=>({...C,requestsFormatted:C.total_requests.toLocaleString(),domainTotalFormatted:C.domain_total_requests?.toLocaleString()||"-",percentageFormatted:C.percentage_of_domain?.toFixed(1)||"0.0",percentageColor:U(C.percentage_of_domain),successRateFormatted:C.avg_success_rate.toFixed(1),avgSpeedFormatted:C.avg_speed.toFixed(0),successRateColor:C.avg_success_rate>=90?"success":C.avg_success_rate>=70?"warning":"error",techColor:$(C.technology),hasMedal:C.rank<=3,medalEmoji:C.rank===1?"ðŸ¥‡":C.rank===2?"ðŸ¥ˆ":C.rank===3?"ðŸ¥‰":""}));return h.value==="domain_total"?T=T.sort((C,B)=>(B.domain_total_requests||0)-(C.domain_total_requests||0)):h.value==="percentage"?T=T.sort((C,B)=>(B.percentage_of_domain||0)-(C.percentage_of_domain||0)):h.value==="avg_speed"&&(T=T.sort((C,B)=>C.avg_speed-B.avg_speed)),T}),$=T=>T&&{Fiber:"blue",Cable:"green",DSL:"orange",Mobile:"purple",Satellite:"red"}[T]||"grey",U=T=>T?T>=50?"error":T>=25?"warning":T>=10?"info":"success":"grey",ne=async T=>{A.value=!0,q.value=null;try{const C=T||R.value,B=await X.getProviderRankings(C);B.success&&B.data?(F.value=B.data.rankings,v.value=B.data.totalEntries,p.value=B.data.pagination||null,L.value=B.data.availableProviders||[],x.value=B.data.aggregatedStats||null,H.value=B.data.globalStats||null):(q.value=B.error||"Failed to load provider rankings",F.value=[],p.value=null,L.value=[],x.value=null,H.value=null)}catch(C){q.value=C instanceof Error?C.message:"Unexpected error",F.value=[]}finally{A.value=!1}};return{rankings:F,formattedRankings:z,totalEntries:v,pagination:p,availableProviders:L,aggregatedStats:x,globalStats:H,filters:R,loading:A,error:q,localSortBy:h,loadProviderRankings:ne,getTopProviderDomain:async T=>await X.getTopProviderDomain(T),updateFilters:T=>{R.value={...R.value,...T}},clearFilters:()=>{R.value={technology:null,provider_id:null,period:"all_time",date_from:null,date_to:null,sort_by:"total_requests",page:1,per_page:15,aggregate_by_provider:!1}},goToPage:async T=>{R.value.page=T,await ne()},changePerPage:async T=>{R.value.per_page=T,R.value.page=1,await ne()},changeLocalSort:T=>{h.value=T}}},Qt={class:"provider-rankings"},Zt={class:"d-flex align-center ga-2"},ea={class:"text-caption text-medium-emphasis mb-2"},ta={class:"d-flex flex-wrap ga-4"},aa={class:"text-h4 font-weight-bold"},oa={class:"text-h4 font-weight-bold"},la={class:"text-h4 font-weight-bold"},sa={class:"text-h4 font-weight-bold"},ra={class:"font-weight-bold"},na={key:0,class:"mr-2"},ia={key:0,class:"d-flex flex-wrap ga-1"},da={key:1,class:"text-medium-emphasis"},ua={class:"font-weight-medium"},ca={class:"text-caption text-medium-emphasis"},ma={class:"text-right font-weight-medium"},pa={class:"text-right text-medium-emphasis"},_a={class:"text-center"},va={class:"text-right"},fa={class:"d-flex align-center"},ga={class:"text-caption text-medium-emphasis"},ya={class:"d-flex align-center ga-2"},ba=yt({__name:"ProviderRankingTable",setup(F){const v=Ot(),{formattedRankings:p,totalEntries:L,pagination:x,availableProviders:H,aggregatedStats:R,globalStats:A,filters:q,loading:X,error:h,localSortBy:z,loadProviderRankings:$,updateFilters:U,clearFilters:ne,goToPage:J,changePerPage:Q,changeLocalSort:Te}=kt(),w=P({...q.value,date_from:v.query.provider_date_from||v.query.date_from||null,date_to:v.query.provider_date_to||v.query.date_to||null}),de=ee(()=>!H.value||H.value.length===0?[]:H.value.map(f=>({title:`${f.name} (${f.total_requests.toLocaleString()} requests)`,value:f.id}))),te=[{title:"ðŸ“… Today",value:"today"},{title:"ðŸ“… Yesterday",value:"yesterday"},{title:"ðŸ“… Last Week",value:"last_week"},{title:"ðŸ“… Last Month",value:"last_month"},{title:"ðŸ“… Last Year",value:"last_year"},{title:"ðŸ“… All Time",value:"all_time"}],T=[{title:"ðŸ”µ Fiber",value:"Fiber"},{title:"ðŸŸ¢ Cable",value:"Cable"},{title:"ðŸŸ¡ DSL",value:"DSL"},{title:"ðŸŸ£ Mobile",value:"Mobile"},{title:"ðŸ”´ Satellite",value:"Satellite"}],C=[{title:"ðŸ“Š Provider Requests",value:"total_requests"},{title:"ðŸ“Š Domain Total",value:"domain_total"},{title:"ðŸ“ˆ % of Domain",value:"percentage"},{title:"âš¡ Avg Speed",value:"avg_speed"}],B=[{title:"15 per page",value:15},{title:"25 per page",value:25},{title:"50 per page",value:50},{title:"100 per page",value:100}],Ie=()=>{if(!w.value.provider_id)return"";const f=H.value.find(c=>c.id===w.value.provider_id);return f?f.name:""},Re=()=>{const f={},c=v.query;Object.keys(c).forEach(S=>{!S.startsWith("provider_")&&S!=="date_from"&&S!=="date_to"&&(f[S]=c[S])}),w.value.date_from&&(f.provider_date_from=w.value.date_from),w.value.date_to&&(f.provider_date_to=w.value.date_to),Oe({query:Object.keys(f).length>0?f:{}},{replace:!0})},Ve=f=>{if(!f||f==="all_time")return{date_from:null,date_to:null};const c=new Date;c.setHours(0,0,0,0);let S,N=new Date(c);switch(f){case"today":S=new Date(c),N=new Date(c);break;case"yesterday":S=new Date(c),S.setDate(S.getDate()-1),N=new Date(S);break;case"last_week":S=new Date(c),S.setDate(S.getDate()-6);break;case"last_month":S=new Date(c),S.setDate(S.getDate()-29);break;case"last_year":S=new Date(c),S.setDate(S.getDate()-364);break;default:return{date_from:null,date_to:null}}const W=ae=>{const ve=ae.getFullYear(),oe=String(ae.getMonth()+1).padStart(2,"0"),xe=String(ae.getDate()).padStart(2,"0");return`${ve}-${oe}-${xe}`};return{date_from:W(S),date_to:W(N)}},ce=()=>{if(w.value.period){const f=Ve(w.value.period);w.value.date_from=f.date_from,w.value.date_to=f.date_to}w.value.page=1,U(w.value),Re(),$()},Pe=()=>{(w.value.date_from||w.value.date_to)&&(w.value.period=null),ce()},qe=f=>{Te(f)},Ye=()=>{ne(),w.value={...q.value},w.value.aggregate_by_provider=!1,w.value.date_from=null,w.value.date_to=null,Te("total_requests"),Re(),$()},Ge=()=>{x.value&&x.value.current_page>1&&J(x.value.current_page-1)},He=()=>{x.value&&x.value.current_page<x.value.last_page&&J(x.value.current_page+1)},$e=f=>{w.value.per_page=f,Q(f)},Ke=f=>f?f.includes(","):!1,Ee=f=>f?f.split(",").map(c=>c.trim()).filter(c=>c.length>0):[],Xe=f=>({Fiber:"blue",Cable:"green",DSL:"orange",Mobile:"purple",Satellite:"red",Unknown:"grey"})[f]||"grey";return ue(()=>v.query,f=>{const c=f.provider_date_from||f.date_from||null,S=f.provider_date_to||f.date_to||null;(c!==w.value.date_from||S!==w.value.date_to)&&(w.value.date_from=c,w.value.date_to=S,U(w.value),$())},{immediate:!1}),bt(()=>{(w.value.date_from||w.value.date_to)&&U(w.value),$()}),(f,c)=>{const S=D("v-icon"),N=D("v-select"),W=D("v-col"),ae=D("v-switch"),ve=D("v-tooltip"),oe=D("v-card"),xe=D("v-btn"),K=D("v-row"),me=ft,ze=D("v-alert-title"),ie=D("v-chip"),E=D("v-alert"),Y=D("v-card-text"),ke=D("v-progress-circular"),O=D("v-card-title"),le=D("v-table"),se=D("v-card-actions");return d(),g("div",Qt,[a(K,{class:"mb-4"},{default:e(()=>[a(W,{cols:"12",md:"2"},{default:e(()=>[a(N,{modelValue:w.value.provider_id,"onUpdate:modelValue":[c[0]||(c[0]=k=>w.value.provider_id=k),ce],items:de.value,label:"Provider",clearable:"",variant:"outlined",density:"compact"},{"prepend-inner":e(()=>[a(S,{size:"small"},{default:e(()=>c[7]||(c[7]=[n("mdi-account-network")])),_:1})]),_:1},8,["modelValue","items"])]),_:1}),a(W,{cols:"12",md:"2"},{default:e(()=>[a(N,{modelValue:w.value.technology,"onUpdate:modelValue":[c[1]||(c[1]=k=>w.value.technology=k),ce],items:T,label:"Technology",clearable:"",variant:"outlined",density:"compact"},{"prepend-inner":e(()=>[a(S,{size:"small"},{default:e(()=>c[8]||(c[8]=[n("mdi-network")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(W,{cols:"12",md:"2"},{default:e(()=>[a(N,{modelValue:w.value.period,"onUpdate:modelValue":[c[2]||(c[2]=k=>w.value.period=k),ce],items:te,label:"Period",clearable:"",variant:"outlined",density:"compact"},{"prepend-inner":e(()=>[a(S,{size:"small"},{default:e(()=>c[9]||(c[9]=[n("mdi-calendar-range")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(W,{cols:"12",md:"2"},{default:e(()=>[a(N,{modelValue:r(z),"onUpdate:modelValue":[c[3]||(c[3]=k=>Bt(z)?z.value=k:null),qe],items:C,label:"Sort By",variant:"outlined",density:"compact"},{"prepend-inner":e(()=>[a(S,{size:"small"},{default:e(()=>c[10]||(c[10]=[n("mdi-sort")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(W,{cols:"12",md:"2"},{default:e(()=>[a(oe,{variant:"outlined",class:"pa-2"},{default:e(()=>[o("div",Zt,[a(S,{size:"small",color:"primary"},{default:e(()=>c[11]||(c[11]=[n("mdi-group")])),_:1}),a(ae,{modelValue:w.value.aggregate_by_provider,"onUpdate:modelValue":[c[4]||(c[4]=k=>w.value.aggregate_by_provider=k),ce],label:"Aggregate by Provider",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),a(ve,{location:"top"},{activator:e(({props:k})=>[a(S,Be(k,{size:"x-small",color:"grey",class:"ml-1"}),{default:e(()=>c[12]||(c[12]=[n(" mdi-information-outline ")])),_:2},1040)]),default:e(()=>[c[13]||(c[13]=o("span",null,"When enabled, aggregates all technologies of the same provider for each domain",-1))]),_:1})]),_:1})]),_:1}),a(W,{cols:"12",md:"2"},{default:e(()=>[a(xe,{block:"",variant:"outlined",color:"grey",onClick:Ye},{default:e(()=>[a(S,{start:""},{default:e(()=>c[14]||(c[14]=[n("mdi-filter-off")])),_:1}),c[15]||(c[15]=n(" Clear Filters "))]),_:1})]),_:1})]),_:1}),a(K,{class:"mb-4"},{default:e(()=>[a(W,{cols:"12"},{default:e(()=>[a(oe,{variant:"outlined",class:"pa-3"},{default:e(()=>[o("div",ea,[a(S,{size:"small",class:"mr-1"},{default:e(()=>c[16]||(c[16]=[n("mdi-calendar-range")])),_:1}),c[17]||(c[17]=n(" Custom Date Range (Optional) "))]),a(K,null,{default:e(()=>[a(W,{cols:"12",sm:"6",md:"4"},{default:e(()=>[a(me,{"model-value":w.value.date_from||null,label:"Start Date","prepend-inner-icon":"mdi-calendar-start","onUpdate:modelValue":c[5]||(c[5]=k=>{w.value.date_from=k,Pe()})},null,8,["model-value"])]),_:1}),a(W,{cols:"12",sm:"6",md:"4"},{default:e(()=>[a(me,{"model-value":w.value.date_to||null,label:"End Date","prepend-inner-icon":"mdi-calendar-end","onUpdate:modelValue":c[6]||(c[6]=k=>{w.value.date_to=k,Pe()})},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(A)?(d(),b(K,{key:0,class:"mb-4"},{default:e(()=>[a(W,{cols:"12"},{default:e(()=>[a(E,{color:"primary",variant:"tonal",border:"start",prominent:""},{default:e(()=>[a(ze,{class:"text-h6 mb-2"},{default:e(()=>[a(S,{start:"",size:"small"},{default:e(()=>c[18]||(c[18]=[n("mdi-chart-line")])),_:1}),n(" "+i(Ie())+" Global Statistics ",1)]),_:1}),o("div",ta,[o("div",null,[c[19]||(c[19]=o("strong",null,"Provider Requests:",-1)),n(" "+i(r(A).provider_total_requests.toLocaleString()),1)]),o("div",null,[c[20]||(c[20]=o("strong",null,"Global Requests:",-1)),n(" "+i(r(A).global_total_requests.toLocaleString()),1)]),o("div",null,[c[21]||(c[21]=o("strong",null,"Percentage of Global:",-1)),a(ie,{color:"primary",variant:"tonal",size:"small",class:"ml-1"},{default:e(()=>[n(i(r(A).percentage_of_global.toFixed(2))+"% ",1)]),_:1})])])]),_:1})]),_:1})]),_:1})):y("",!0),r(R)?(d(),b(K,{key:1,class:"mb-4"},{default:e(()=>[a(W,{cols:"12",md:"3"},{default:e(()=>[a(oe,{variant:"tonal",color:"primary"},{default:e(()=>[a(Y,{class:"text-center"},{default:e(()=>[o("div",aa,i(r(R).total_requests.toLocaleString()),1),c[22]||(c[22]=o("div",{class:"text-caption text-medium-emphasis"},"Total Requests",-1))]),_:1})]),_:1})]),_:1}),a(W,{cols:"12",md:"3"},{default:e(()=>[a(oe,{variant:"tonal",color:"primary"},{default:e(()=>[a(Y,{class:"text-center"},{default:e(()=>[o("div",oa,i(r(R).avg_speed.toFixed(0))+" ms ",1),c[23]||(c[23]=o("div",{class:"text-caption text-medium-emphasis"},"Avg Speed",-1))]),_:1})]),_:1})]),_:1}),a(W,{cols:"12",md:"3"},{default:e(()=>[a(oe,{variant:"tonal",color:"primary"},{default:e(()=>[a(Y,{class:"text-center"},{default:e(()=>[o("div",la,i(r(R).unique_domains),1),c[24]||(c[24]=o("div",{class:"text-caption text-medium-emphasis"},"Unique Domains",-1))]),_:1})]),_:1})]),_:1}),a(W,{cols:"12",md:"3"},{default:e(()=>[a(oe,{variant:"tonal",color:"primary"},{default:e(()=>[a(Y,{class:"text-center"},{default:e(()=>[o("div",sa,i(r(R).unique_providers),1),c[25]||(c[25]=o("div",{class:"text-caption text-medium-emphasis"},"Unique Providers",-1))]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0),r(X)?(d(),b(E,{key:2,type:"info",variant:"tonal"},{default:e(()=>[a(ke,{indeterminate:"",size:"20",class:"mr-2"}),c[26]||(c[26]=n(" Loading rankings... "))]),_:1})):r(h)?(d(),b(E,{key:3,type:"error",variant:"tonal"},{default:e(()=>[n(i(r(h)),1)]),_:1})):(d(),b(oe,{key:4},{default:e(()=>[a(O,{class:"d-flex align-center justify-space-between"},{default:e(()=>[c[27]||(c[27]=o("span",null,"ðŸ† Provider Rankings",-1)),a(ie,{color:"primary",variant:"tonal"},{default:e(()=>[n(i(r(L))+" entries ",1)]),_:1})]),_:1}),a(le,{"fixed-header":"",height:"600px"},{default:e(()=>[c[30]||(c[30]=o("thead",null,[o("tr",null,[o("th",{class:"text-left"},"Rank"),o("th",{class:"text-left"},"Provider"),o("th",{class:"text-left"},"Technology"),o("th",{class:"text-left"},"Domain"),o("th",{class:"text-right"},"Provider Requests"),o("th",{class:"text-right"},"Domain Total"),o("th",{class:"text-center"},"% of Domain"),o("th",{class:"text-right"},"Avg Speed")])],-1)),o("tbody",null,[(d(!0),g(_e,null,he(r(p),k=>(d(),g("tr",{key:`${k.domain_id}-${k.provider_id}`},[o("td",ra,[k.hasMedal?(d(),g("span",na,i(k.medalEmoji),1)):y("",!0),n(" #"+i(k.rank),1)]),o("td",null,i(k.provider_name),1),o("td",null,[k.technology?(d(),g("div",ia,[Ke(k.technology)?(d(),g(_e,{key:0},[(d(!0),g(_e,null,he(Ee(k.technology),(Fe,Je)=>(d(),b(ie,{key:Je,color:Xe(Fe),variant:"tonal",size:"x-small",class:"mr-1 mb-1"},{default:e(()=>[n(i(Fe.trim()),1)]),_:2},1032,["color"]))),128)),a(ve,{location:"top"},{activator:e(({props:Fe})=>[a(S,Be({ref_for:!0},Fe,{size:"x-small",color:"primary",class:"ml-1"}),{default:e(()=>c[28]||(c[28]=[n(" mdi-information ")])),_:2},1040)]),default:e(()=>[c[29]||(c[29]=o("span",null,"Multiple technologies aggregated",-1))]),_:1})],64)):(d(),b(ie,{key:1,color:k.techColor,variant:"tonal",size:"small"},{default:e(()=>[n(i(k.technology),1)]),_:2},1032,["color"]))])):(d(),g("span",da,"Unknown"))]),o("td",null,[o("div",ua,i(k.domain_name),1),o("div",ca,i(k.domain_slug),1)]),o("td",ma,i(k.requestsFormatted),1),o("td",pa,i(k.domainTotalFormatted),1),o("td",_a,[a(ie,{color:k.percentageColor,variant:"tonal",size:"small"},{default:e(()=>[n(i(k.percentageFormatted)+"% ",1)]),_:2},1032,["color"])]),o("td",va,i(k.avgSpeedFormatted)+" ms",1)]))),128))])]),_:1}),r(x)?(d(),b(se,{key:0,class:"justify-space-between pa-4"},{default:e(()=>[o("div",fa,[o("span",ga," Showing "+i(r(x).from)+" to "+i(r(x).to)+" of "+i(r(x).total)+" entries ",1)]),o("div",ya,[a(N,{"model-value":w.value.per_page,items:B,"onUpdate:modelValue":$e,density:"compact",variant:"outlined","hide-details":"",style:{width:"100px"}},null,8,["model-value"]),a(xe,{icon:"mdi-chevron-left",size:"small",variant:"text",disabled:r(x).current_page===1,onClick:Ge},null,8,["disabled"]),a(ie,{variant:"tonal",color:"primary"},{default:e(()=>[n(i(r(x).current_page)+" / "+i(r(x).last_page),1)]),_:1}),a(xe,{icon:"mdi-chevron-right",size:"small",variant:"text",disabled:r(x).current_page===r(x).last_page,onClick:He},null,8,["disabled"])])]),_:1})):y("",!0)]),_:1}))])}}}),ha=ht(ba,[["__scopeId","data-v-f7c890bf"]]),xa=()=>{const F=P(null),v=P(!1),p=P(null),L=P("score"),x=new xt,H=async(h="score")=>{v.value=!0,p.value=null,L.value=h;try{const z=await x.getGlobalDomainRanking(h);z.success&&z.data?F.value=z.data:(p.value=z.error||"Failed to load ranking",F.value=null)}catch{p.value="Unexpected error loading ranking",F.value=null}finally{v.value=!1}},R=ee(()=>!F.value?.ranking||!Array.isArray(F.value.ranking)?[]:F.value.ranking.map(h=>({...h,formattedPeriod:`${new Date(h.coverage.period_start).toLocaleDateString()} - ${new Date(h.coverage.period_end).toLocaleDateString()}`,formattedRequests:A(h.metrics.total_requests),formattedSuccessRate:h.metrics.success_rate.toFixed(1)+"%",formattedSpeed:h.metrics.avg_speed>0?h.metrics.avg_speed.toFixed(1)+" Mbps":"N/A",formattedScore:h.metrics.score.toFixed(1)}))),A=h=>h>=1e6?(h/1e6).toFixed(1)+"M":h>=1e3?(h/1e3).toFixed(1)+"K":h.toString(),q=ee(()=>R.value.slice(0,3)),X=ee(()=>{if(!F.value?.ranking||F.value.ranking.length===0)return{totalDomains:0,totalRequests:0,avgSuccessRate:0,avgSpeed:0};const h=F.value.ranking,z=h.reduce((J,Q)=>J+Q.metrics.total_requests,0),$=h.reduce((J,Q)=>J+Q.metrics.success_rate,0)/h.length,U=h.filter(J=>J.metrics.avg_speed>0),ne=U.length>0?U.reduce((J,Q)=>J+Q.metrics.avg_speed,0)/U.length:0;return{totalDomains:h.length,totalRequests:z,avgSuccessRate:$,avgSpeed:ne}});return{rankingData:De(F),loading:De(v),error:De(p),currentSortBy:De(L),formattedRanking:R,topThree:q,globalStats:X,loadRanking:H}},ka=()=>{const F=P(null),v=P(!1),p=P(null),L=new xt,x=async(q,X,h,z)=>{if(q.length<2){p.value="Please select at least 2 domains to compare";return}v.value=!0,p.value=null;try{const $=await L.compareDomains(q,X,h,z);$.success&&$.data?F.value=$.data:(p.value=$.error||"Failed to load comparison",F.value=null)}catch{p.value="Unexpected error loading comparison",F.value=null}finally{v.value=!1}},H=q=>q>=1e6?(q/1e6).toFixed(1)+"M":q>=1e3?(q/1e3).toFixed(1)+"K":q.toString(),R=(q,X=!1)=>X?q>0?"error":q<0?"success":"default":q>0?"success":q<0?"error":"default",A=q=>q>0?"mdi-arrow-up":q<0?"mdi-arrow-down":"mdi-minus";return{comparisonData:De(F),loading:De(v),error:De(p),loadComparison:x,formatNumber:H,getDiffColor:R,getDiffIcon:A}};class wa{apiClient;constructor(){this.apiClient=new gt}async getRankingsByState(v){try{const p=new URLSearchParams;p.append("state_id",v.state_id.toString()),v.provider_id&&p.append("provider_id",v.provider_id.toString()),v.period&&p.append("period",v.period),v.date_from&&p.append("date_from",v.date_from),v.date_to&&p.append("date_to",v.date_to),v.sort_by&&p.append("sort_by",v.sort_by),v.aggregate_by_provider!==void 0&&p.append("aggregate_by_provider",v.aggregate_by_provider?"true":"false");const L=`/reports/global/provider-ranking-by-state?${p.toString()}`;console.log("ðŸ” ProviderRankingByStateRepository - URL:",L);const x=await this.apiClient.get(L);return console.log("ðŸ” ProviderRankingByStateRepository - Response:",x),x}catch(p){throw console.error("ProviderRankingByStateRepository - getRankingsByState error:",p),p}}}const Sa=()=>{const F=P([]),v=P(!1),p=P(null),L=P(0),x=P({state_id:0,provider_id:null,period:"last_month",date_from:null,date_to:null,sort_by:"total_requests",aggregate_by_provider:!1}),H=new wa,R=async z=>{if(!x.value.state_id||x.value.state_id===0){p.value="Please select a state";return}v.value=!0,p.value=null;try{const $={...x.value,...z},U=await H.getRankingsByState($);U.success&&U.data?(F.value=U.data.ranking||[],L.value=U.data.total_entries||0,x.value={...x.value,...U.data.filters}):(p.value=U.message||"Failed to load ranking data",F.value=[],L.value=0)}catch($){p.value=$ instanceof Error?$.message:"Unexpected error loading ranking",F.value=[],L.value=0}finally{v.value=!1}},A=z=>{x.value={...x.value,...z}},q=()=>{x.value={...x.value,provider_id:null,period:"last_month",date_from:null,date_to:null,sort_by:"total_requests"}},X=ee(()=>x.value.aggregate_by_provider===!0),h=ee(()=>F.value.map(z=>{const $={...z,formattedRequests:z.total_requests.toLocaleString(),formattedSuccessRate:`${z.avg_success_rate.toFixed(1)}%`,formattedSpeed:`${z.avg_speed.toFixed(2)} Mbps`};if("domain_id"in z&&"percentage_of_domain"in z){const U=z;return{...$,formattedPercentage:`${U.percentage_of_domain.toFixed(2)}%`,formattedProviderTotalRequests:U.provider_total_requests?.toLocaleString()||"0",formattedPercentageOfProvider:U.percentage_of_provider_in_state?`${U.percentage_of_provider_in_state.toFixed(2)}%`:"0%"}}if("percentage_of_state"in z){const U=z;return{...$,formattedPercentage:`${U.percentage_of_state.toFixed(2)}%`,formattedDomains:U.domains||"",domainsCount:U.domains_count||0}}return $}));return{ranking:F,formattedRanking:h,loading:v,error:p,totalEntries:L,filters:x,isAggregatedByProvider:X,loadRankingByState:R,updateFilters:A,clearFilters:q}},Da={class:"d-flex justify-center align-center py-8"},Ra={key:2},Pa={key:0},qa={class:"d-flex align-center justify-space-between mb-2"},za={class:"text-h3 font-weight-bold text-primary"},Fa={class:"d-flex align-center justify-space-between mb-2"},Ca={class:"text-h3 font-weight-bold text-success"},Aa={class:"d-flex align-center justify-space-between mb-2"},Ta={class:"text-h3 font-weight-bold text-info"},Va={class:"d-flex align-center justify-space-between mb-2"},$a={class:"text-h3 font-weight-bold text-warning"},Ua={key:1,class:"text-center py-8"},La={key:1,class:"text-center py-8"},Ma={key:1,class:"text-center py-8"},ja={key:1,class:"text-center py-8"},Oa={class:"text-h6 mt-2"},Ba={class:"d-flex justify-space-between mb-2"},Ea={class:"font-weight-bold"},Na={class:"d-flex justify-space-between mb-2"},Wa={class:"font-weight-bold"},Ia={class:"d-flex justify-space-between"},Ya={class:"font-weight-bold"},Ga={class:"text-h5 mt-2"},Ha={class:"d-flex justify-space-between mb-2"},Ka={class:"font-weight-bold text-h6"},Xa={class:"d-flex justify-space-between mb-2"},Ja={class:"font-weight-bold"},Qa={class:"d-flex justify-space-between"},Za={class:"font-weight-bold"},eo={class:"text-h6 mt-2"},to={class:"d-flex justify-space-between mb-2"},ao={class:"font-weight-bold"},oo={class:"d-flex justify-space-between mb-2"},lo={class:"font-weight-bold"},so={class:"d-flex justify-space-between"},ro={class:"font-weight-bold"},no={class:"text-center"},io={class:"font-weight-medium"},uo={class:"text-caption text-medium-emphasis"},co={class:"text-right"},mo={class:"text-right font-weight-medium"},po={class:"text-right"},_o={class:"text-right"},vo={class:"text-center"},fo={class:"text-center"},go={class:"text-center"},yo={class:"text-center"},bo={class:"text-caption"},ho={class:"text-caption text-medium-emphasis"},xo={class:"text-center"},ko={key:0,class:"text-center py-8"},wo={key:3},So={key:4},Do={key:0,class:"text-caption"},Ro={key:1,class:"text-caption"},Po={class:"text-caption text-medium-emphasis mb-2"},qo={class:"text-center py-12"},zo={class:"d-flex justify-center align-center py-8"},Fo={key:4},Co={class:"d-flex align-center justify-space-between mb-2"},Ao={class:"text-h3 font-weight-bold text-primary"},To={class:"d-flex align-center justify-space-between mb-2"},Vo={class:"text-h3 font-weight-bold text-success"},$o={class:"d-flex align-center justify-space-between mb-2"},Uo={class:"text-h3 font-weight-bold text-info"},Lo={class:"d-flex align-center justify-space-between mb-2"},Mo={class:"text-h3 font-weight-bold text-warning"},jo={key:0},Oo={key:1,class:"text-center py-8"},Bo={key:0},Eo={key:1,class:"text-center py-8"},No={class:"font-weight-medium"},Wo={class:"text-right font-weight-medium"},Io={class:"text-center"},Yo={key:0},Go={key:1,class:"text-center py-8"},Ho={key:0},Ko={key:1,class:"text-center py-8"},Xo={class:"text-right font-weight-medium"},Jo={class:"text-center"},Qo={key:5},Zo={class:"text-caption text-medium-emphasis mb-2"},el={class:"text-center py-12"},tl={class:"d-flex justify-center align-center py-8"},al={key:0,class:"ml-2"},ol={key:0,class:"text-left"},ll={key:1,class:"text-right"},sl={key:2,class:"text-right"},rl={key:3,class:"text-right"},nl={key:4,class:"text-right"},il={key:5,class:"text-right"},dl={key:0},ul={class:"font-weight-medium"},cl={class:"text-caption text-medium-emphasis"},ml={class:"font-weight-medium"},pl={class:"text-right font-weight-medium"},_l={key:1,class:"text-right"},vl={key:2,class:"text-right"},fl={class:"font-weight-medium"},gl={key:3,class:"text-right"},yl={key:4,class:"text-right"},bl={key:5,class:"text-right"},hl={class:"text-right"},xl={class:"text-right"},kl={class:"text-center"},wl={class:"text-center"},Sl={class:"text-caption"},Dl={class:"text-caption text-medium-emphasis"},Rl={class:"text-center"},Pl={key:1,class:"text-medium-emphasis text-caption"},ql={class:"text-center py-12"},zl={class:"text-medium-emphasis"},Fl={key:6},Cl={class:"d-flex gap-2"},Al={class:"d-flex justify-center align-center py-8"},Tl={key:2},Vl={class:"d-flex align-center gap-2"},$l={class:"font-weight-bold"},Ul={class:"d-flex align-center gap-2"},Ll={class:"font-weight-bold"},Ml={class:"d-flex align-center gap-2"},jl={class:"font-weight-bold"},Ol={class:"font-weight-bold"},Bl={class:"font-weight-bold"},El={class:"text-h4 font-weight-bold"},Nl={class:"text-h4 font-weight-bold"},Wl={key:0},Il={class:"text-h6 mb-3"},Yl={class:"font-weight-bold"},Gl={class:"font-weight-medium"},Hl={class:"text-right font-weight-medium"},Kl={class:"text-right"},Xl={class:"text-center"},Jl={class:"text-center py-12"},Ql=yt({__name:"index",setup(F){const v=Et();It({title:"Analytics"});const{rankingData:p,loading:L,error:x,currentSortBy:H,formattedRanking:R,topThree:A,globalStats:q,loadRanking:X}=xa(),{comparisonData:h,loading:z,error:$,loadComparison:U,getDiffColor:ne,getDiffIcon:J}=ka(),{domains:Q,loadDomains:Te}=Gt(),{loadProviderRankings:w}=kt(),{reportData:de,aggregatedData:te,loading:T,error:C,loadDashboardStats:B,loadAggregatedStats:Ie,providerChartData:Re,topStatesChartData:Ve,speedByStateChartData:ce,technologyChartData:Pe,topCards:qe}=Ht(),{formattedReports:Ye,loading:Ge,loadReports:He}=Yt(),{formattedRanking:$e,loading:Ke,error:Ee,totalEntries:Xe,filters:f,isAggregatedByProvider:c,loadRankingByState:S,updateFilters:N,clearFilters:W}=Sa(),{states:ae,loading:ve,error:oe,fetchStates:xe}=Kt(),K=P("ranking"),me=P([]),ze=P(""),ie=P(""),E=P(null),Y=P("all"),ke=P(!1),O=P(null),le=P(null),se=P(null),k=P(null),Fe=[{title:"ðŸ“… Today",value:"today"},{title:"ðŸ“… Yesterday",value:"yesterday"},{title:"ðŸ“… Last Week",value:"last_week"},{title:"ðŸ“… Last Month",value:"last_month"},{title:"ðŸ“… Last Year",value:"last_year"},{title:"ðŸ“… All Time",value:"all_time"}],Je=[{value:"score",label:"Overall Score"},{value:"volume",label:"Total Requests"},{value:"success",label:"Success Rate"},{value:"speed",label:"Average Speed"}],nt=ee(()=>!Q.value||!Array.isArray(Q.value)?[]:Q.value.map(u=>({value:u.id,title:u.name})));bt(()=>{X("score"),Te(),w(),v.query.state_date_from&&N({date_from:v.query.state_date_from}),v.query.state_date_to&&N({date_to:v.query.state_date_to}),v.query.domain_dashboard_date_from&&(se.value=v.query.domain_dashboard_date_from),v.query.domain_dashboard_date_to&&(k.value=v.query.domain_dashboard_date_to),v.query.domain_dashboard_period&&(le.value=v.query.domain_dashboard_period)});const wt=u=>{X(u)},Ue=u=>{Oe(`/domains/${u}/dashboard`)},St=(u,t)=>{Oe(`/domains/${u}/state/${t}/dashboard`)};ee(()=>!E.value||!Q.value||!Array.isArray(Q.value)?null:Q.value.find(u=>u.id===E.value));const Qe=ee(()=>E.value?Ye.value.filter(u=>u.domain_id===E.value):[]),Dt=ee(()=>[...[{id:"all",reportDate:"All Reports Combined",statusColor:"primary",data_version:"Aggregated"}],...Qe.value]);ue(E,async u=>{u&&(await He({domain_id:u,per_page:100}),await Ne(),Y.value="all",ke.value=!1)}),ue([se,k],()=>{E.value&&Y.value==="all"&&K.value==="domain-dashboard"&&qt()});const Rt=u=>{if(!u||u==="all_time")return{date_from:null,date_to:null};const t=new Date;t.setHours(0,0,0,0);let s,_=new Date(t);switch(u){case"today":s=new Date(t),_=new Date(t);break;case"yesterday":s=new Date(t),s.setDate(s.getDate()-1),_=new Date(s);break;case"last_week":s=new Date(t),s.setDate(s.getDate()-6);break;case"last_month":s=new Date(t),s.setDate(s.getDate()-29);break;case"last_year":s=new Date(t),s.setDate(s.getDate()-364);break;default:return{date_from:null,date_to:null}}const m=V=>{const Le=V.getFullYear(),fe=String(V.getMonth()+1).padStart(2,"0"),re=String(V.getDate()).padStart(2,"0");return`${Le}-${fe}-${re}`};return{date_from:m(s),date_to:m(_)}},it=()=>{const u={},t=v.query;Object.keys(t).forEach(s=>{!s.startsWith("domain_dashboard_")&&s!=="domain_date_from"&&s!=="domain_date_to"&&s!=="domain_period"&&(u[s]=t[s])}),se.value&&(u.domain_dashboard_date_from=se.value),k.value&&(u.domain_dashboard_date_to=k.value),le.value&&(u.domain_dashboard_period=le.value),Oe({query:Object.keys(u).length>0?u:{}},{replace:!0})},Pt=()=>{if(le.value){const u=Rt(le.value);se.value=u.date_from,k.value=u.date_to}else se.value=null,k.value=null;it(),Ne()},qt=()=>{se.value||k.value,le.value=null,it(),Ne()},Ne=async()=>{E.value&&(Y.value==="all"?(ke.value=!1,await Ie(E.value,{period:le.value,date_from:se.value,date_to:k.value})):Y.value&&(ke.value=!1,await B(Y.value)))};ue(Y,async u=>{E.value&&(u==="all"?(ke.value=!1,await Ne()):u&&(ke.value=!1,await B(u)))});const dt=ee(()=>{if(Y.value==="all"&&te.value)return`Showing aggregated data from ${Qe.value.length} report(s)`;const u=Qe.value.find(t=>t.id===Y.value);return u&&Y.value!=="all"?`Report Date: ${u.reportDate} | Status: ${u.statusLabel}`:""}),zt=()=>{me.value.length<2||(U(me.value,void 0,ze.value||void 0,ie.value||void 0),K.value="comparison")},Ft=()=>{me.value=[],ze.value="",ie.value=""},Ce=u=>u>=1e6?(u/1e6).toFixed(1)+"M":u>=1e3?(u/1e3).toFixed(1)+"K":u.toString(),Ze=u=>u.toFixed(1)+"%",Ct=u=>u.toFixed(2),At=ee(()=>!ae.value||!Array.isArray(ae.value)?[]:ae.value.map(u=>({value:u.id,title:`${u.name} (${u.code})`}))),et=u=>{if(!u||!ae.value||!Array.isArray(ae.value))return"";const t=ae.value.find(s=>s.id===u);return t?`${t.name} (${t.code})`:""};ue(K,async u=>{u==="state-ranking"&&ae.value.length===0&&!ve.value&&await xe()}),ue(O,async u=>{u&&(N({state_id:u}),await S())});const Tt=u=>{if(!u||u==="all_time")return{date_from:null,date_to:null};const t=new Date;t.setHours(0,0,0,0);let s,_=new Date(t);switch(u){case"today":s=new Date(t),_=new Date(t);break;case"yesterday":s=new Date(t),s.setDate(s.getDate()-1),_=new Date(s);break;case"last_week":s=new Date(t),s.setDate(s.getDate()-6);break;case"last_month":s=new Date(t),s.setDate(s.getDate()-29);break;case"last_year":s=new Date(t),s.setDate(s.getDate()-364);break;default:return{date_from:null,date_to:null}}const m=V=>{const Le=V.getFullYear(),fe=String(V.getMonth()+1).padStart(2,"0"),re=String(V.getDate()).padStart(2,"0");return`${Le}-${fe}-${re}`};return{date_from:m(s),date_to:m(_)}},Ae=P(!1);ue(()=>f.value.period,async(u,t)=>{if(!(!O.value||Ae.value)&&u!==t){Ae.value=!0;try{if(u){const s=Tt(u);N({date_from:s.date_from,date_to:s.date_to})}else N({date_from:null,date_to:null});await rt(),tt(),await S()}finally{setTimeout(()=>{Ae.value=!1},100)}}}),ue(()=>f.value.sort_by,async()=>{O.value&&await S()}),ue(()=>f.value.provider_id,async()=>{O.value&&await S()}),ue(()=>f.value.aggregate_by_provider,async()=>{O.value&&await S()});const ut=async()=>{if(!(!O.value||Ae.value)){Ae.value=!0;try{const u=f.value.period;f.value.date_from||f.value.date_to?u&&N({period:null}):u&&N({period:null}),tt(),await S()}finally{setTimeout(()=>{Ae.value=!1},100)}}},tt=()=>{const u={},t=v.query;Object.keys(t).forEach(m=>{!m.startsWith("state_")&&m!=="state_date_from"&&m!=="state_date_to"&&(u[m]=t[m])}),f.value.date_from&&(u.state_date_from=f.value.date_from),f.value.date_to&&(u.state_date_to=f.value.date_to);const s=t.state_date_from,_=t.state_date_to;(u.state_date_from!==s||u.state_date_to!==_)&&Oe({query:Object.keys(u).length>0?u:{}},{replace:!0})},Vt=u=>u===1?"warning":u===2?"grey":u===3?"orange":"default",$t=u=>u<=3?"mdi-medal":"mdi-numeric-"+u+"-circle",at=u=>u&&{Fiber:"blue",Cable:"green",DSL:"orange",Mobile:"purple",Satellite:"red"}[u]||"grey",ct=ee(()=>{if(te.value?.providers&&Array.isArray(te.value.providers)){const u=[...te.value.providers],t=u.reduce((s,_)=>s+_.total_count,0);return u.map(s=>({provider_id:s.provider_id,name:s.name,technology:s.technology||"Unknown",total_count:s.total_count,percentage:t>0?s.total_count/t*100:0,avg_success_rate:s.avg_success_rate,avg_speed:s.avg_speed})).sort((s,_)=>_.percentage-s.percentage)}if(de.value?.raw_data?.providers?.top_providers&&Array.isArray(de.value.raw_data.providers.top_providers)){const u=[...de.value.raw_data.providers.top_providers],t=u.reduce((s,_)=>s+(_.total_count||0),0);return u.map(s=>({provider_id:s.provider_id||s.id,name:s.name,technology:s.technology||"Unknown",total_count:s.total_count||0,percentage:t>0?(s.total_count||0)/t*100:0,avg_success_rate:s.avg_success_rate||0,avg_speed:s.avg_speed||0})).sort((s,_)=>_.percentage-s.percentage)}return[]}),mt=ee(()=>{if(te.value){const u=te.value.technology_distribution;if(u&&Array.isArray(u)&&u.length>0){const t=[...u],s=t.reduce((_,m)=>_+(m.count||m.total_count||0),0);return t.map(_=>{const m=_.count||_.total_count||0;return{technology:_.technology||_.tech||_.name||"Unknown",total_count:m,percentage:s>0?m/s*100:0}}).sort((_,m)=>m.percentage-_.percentage)}if(te.value.providers&&Array.isArray(te.value.providers)){const t=new Map;if(te.value.providers.forEach(s=>{if(s.technology){const _=t.get(s.technology)||0;t.set(s.technology,_+(s.total_count||0))}}),t.size>0){const s=Array.from(t.values()).reduce((_,m)=>_+m,0);return Array.from(t.entries()).map(([_,m])=>({technology:_,total_count:m,percentage:s>0?m/s*100:0})).sort((_,m)=>m.percentage-_.percentage)}}}if(de.value?.raw_data){const u=de.value.raw_data.technology_metrics;if(u?.distribution&&Array.isArray(u.distribution)){const s=[...u.distribution],_=s.reduce((m,V)=>m+(V.count||V.total_count||0),0);return s.map(m=>{const V=m.count||m.total_count||0;return{technology:m.technology||m.tech||m.name||"Unknown",total_count:V,percentage:_>0?V/_*100:0}}).sort((m,V)=>V.percentage-m.percentage)}const t=de.value.raw_data.technology_distribution;if(t&&Array.isArray(t)&&t.length>0){const s=[...t],_=s.reduce((m,V)=>m+(V.count||V.total_count||0),0);return s.map(m=>{const V=m.count||m.total_count||0;return{technology:m.technology||m.tech||m.name||"Unknown",total_count:V,percentage:_>0?V/_*100:0}}).sort((m,V)=>V.percentage-m.percentage)}}return[]});return(u,t)=>{const s=D("v-col"),_=D("v-row"),m=D("v-icon"),V=D("v-tab"),Le=D("v-tabs"),fe=D("v-progress-circular"),re=D("v-alert"),ge=D("v-select"),Z=D("v-card-text"),G=D("v-card"),ye=D("apexchart"),we=D("v-divider"),pe=D("v-btn"),j=D("v-chip"),Me=D("v-table"),Se=D("v-list-item-title"),be=D("v-list-item"),We=ft,ot=D("v-tooltip"),Ut=D("v-switch"),pt=D("v-text-field"),Lt=D("v-form"),_t=D("v-card-title"),Mt=D("v-list"),jt=D("v-card-actions");return d(),g("div",null,[a(_,{class:"mb-4"},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>t[19]||(t[19]=[o("h1",{class:"text-h4 font-weight-bold"},"Analytics",-1),o("p",{class:"text-body-1 text-medium-emphasis"}," Global Address Search Analytics ",-1)])),_:1})]),_:1}),a(_,{class:"mb-4"},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(Le,{modelValue:K.value,"onUpdate:modelValue":t[0]||(t[0]=l=>K.value=l),color:"primary"},{default:e(()=>[a(V,{value:"ranking"},{default:e(()=>[a(m,{class:"mr-2"},{default:e(()=>t[20]||(t[20]=[n("mdi-trophy")])),_:1}),t[21]||(t[21]=n(" Domain Ranking "))]),_:1}),a(V,{value:"provider-ranking"},{default:e(()=>[a(m,{class:"mr-2"},{default:e(()=>t[22]||(t[22]=[n("mdi-account-network")])),_:1}),t[23]||(t[23]=n(" Provider Rankings "))]),_:1}),a(V,{value:"domain-dashboard"},{default:e(()=>[a(m,{class:"mr-2"},{default:e(()=>t[24]||(t[24]=[n("mdi-chart-box")])),_:1}),t[25]||(t[25]=n(" Domain Dashboard "))]),_:1}),a(V,{value:"state-ranking"},{default:e(()=>[a(m,{class:"mr-2"},{default:e(()=>t[26]||(t[26]=[n("mdi-map-marker")])),_:1}),t[27]||(t[27]=n(" State Ranking "))]),_:1}),a(V,{value:"comparison"},{default:e(()=>[a(m,{class:"mr-2"},{default:e(()=>t[28]||(t[28]=[n("mdi-compare")])),_:1}),t[29]||(t[29]=n(" Compare Domains "))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),r(L)?(d(),b(_,{key:0},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,null,{default:e(()=>[o("div",Da,[a(fe,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):r(x)?(d(),b(_,{key:1},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,null,{default:e(()=>[a(re,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[n(i(r(x)),1)]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0),K.value==="ranking"?(d(),g("div",Ra,[a(_,{class:"mb-4"},{default:e(()=>[a(s,{cols:"12",class:"d-flex justify-end"},{default:e(()=>[a(ge,{"model-value":r(H),"onUpdate:modelValue":wt,items:Je,"item-title":"label","item-value":"value",label:"Sort By",variant:"outlined",density:"compact","hide-details":"",style:{width:"200px"},"prepend-inner-icon":"mdi-sort"},null,8,["model-value"])]),_:1})]),_:1}),r(p)?(d(),g("div",Pa,[a(_,{class:"mb-4"},{default:e(()=>[a(s,{cols:"12",sm:"6",md:"3"},{default:e(()=>[a(G,{elevation:"2",class:"h-100"},{default:e(()=>[a(Z,null,{default:e(()=>[o("div",qa,[t[31]||(t[31]=o("div",{class:"text-h6 text-medium-emphasis"},"Total Domains",-1)),a(m,{color:"primary",size:"32"},{default:e(()=>t[30]||(t[30]=[n("mdi-domain")])),_:1})]),o("div",za,i(r(q).totalDomains),1),t[32]||(t[32]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Active domains ",-1))]),_:1})]),_:1})]),_:1}),a(s,{cols:"12",sm:"6",md:"3"},{default:e(()=>[a(G,{elevation:"2",class:"h-100"},{default:e(()=>[a(Z,null,{default:e(()=>[o("div",Fa,[t[34]||(t[34]=o("div",{class:"text-h6 text-medium-emphasis"},"Total Requests",-1)),a(m,{color:"success",size:"32"},{default:e(()=>t[33]||(t[33]=[n("mdi-chart-line")])),_:1})]),o("div",Ca,i(Ce(r(q).totalRequests)),1),t[35]||(t[35]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Across all domains ",-1))]),_:1})]),_:1})]),_:1}),a(s,{cols:"12",sm:"6",md:"3"},{default:e(()=>[a(G,{elevation:"2",class:"h-100"},{default:e(()=>[a(Z,null,{default:e(()=>[o("div",Aa,[t[37]||(t[37]=o("div",{class:"text-h6 text-medium-emphasis"},"Avg Success Rate",-1)),a(m,{color:"info",size:"32"},{default:e(()=>t[36]||(t[36]=[n("mdi-check-circle")])),_:1})]),o("div",Ta,i(r(q).avgSuccessRate.toFixed(1))+"% ",1),t[38]||(t[38]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Average across domains ",-1))]),_:1})]),_:1})]),_:1}),a(s,{cols:"12",sm:"6",md:"3"},{default:e(()=>[a(G,{elevation:"2",class:"h-100"},{default:e(()=>[a(Z,null,{default:e(()=>[o("div",Va,[t[40]||(t[40]=o("div",{class:"text-h6 text-medium-emphasis"},"Avg Speed",-1)),a(m,{color:"warning",size:"32"},{default:e(()=>t[39]||(t[39]=[n("mdi-speedometer")])),_:1})]),o("div",$a,i(r(q).avgSpeed>0?r(q).avgSpeed.toFixed(1):"N/A"),1),t[41]||(t[41]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Mbps average ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),a(_,{class:"mb-4"},{default:e(()=>[a(s,{cols:"12",md:"6"},{default:e(()=>[a(M,null,{default:e(()=>[r(R).length>0?(d(),b(ye,{key:0,type:"bar",height:"300",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Top Domains by Volume",align:"left",style:{fontSize:"16px",fontWeight:600}},plotOptions:{bar:{horizontal:!0,borderRadius:4,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(l){return Ce(l)},offsetX:30},xaxis:{categories:r(R).slice(0,5).map(l=>l.domain.name)},colors:["#1976d2"]},series:[{name:"Requests",data:r(R).slice(0,5).map(l=>l.metrics.total_requests)}]},null,8,["options","series"])):(d(),g("div",Ua,[a(m,{size:"64",color:"grey"},{default:e(()=>t[42]||(t[42]=[n("mdi-chart-bar")])),_:1}),t[43]||(t[43]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No data available",-1))]))]),_:1})]),_:1}),a(s,{cols:"12",md:"6"},{default:e(()=>[a(M,null,{default:e(()=>[r(R).length>0?(d(),b(ye,{key:0,type:"donut",height:"300",options:{chart:{type:"donut",fontFamily:"inherit"},title:{text:"Success Rate Distribution",align:"left",style:{fontSize:"16px",fontWeight:600}},labels:["Excellent (â‰¥95%)","Good (90-95%)","Fair (80-90%)","Poor (<80%)"],colors:["#4caf50","#8bc34a","#ffc107","#f44336"],legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(l){return l.toFixed(0)+"%"}}},series:[r(R).filter(l=>l.metrics.success_rate>=95).length,r(R).filter(l=>l.metrics.success_rate>=90&&l.metrics.success_rate<95).length,r(R).filter(l=>l.metrics.success_rate>=80&&l.metrics.success_rate<90).length,r(R).filter(l=>l.metrics.success_rate<80).length]},null,8,["options","series"])):(d(),g("div",La,[a(m,{size:"64",color:"grey"},{default:e(()=>t[44]||(t[44]=[n("mdi-chart-donut")])),_:1}),t[45]||(t[45]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No data available",-1))]))]),_:1})]),_:1})]),_:1}),a(_,{class:"mb-4"},{default:e(()=>[a(s,{cols:"12",md:"6"},{default:e(()=>[a(M,null,{default:e(()=>[r(R).length>0?(d(),b(ye,{key:0,type:"bar",height:"300",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Reports per Domain",align:"left",style:{fontSize:"16px",fontWeight:600}},plotOptions:{bar:{borderRadius:4,columnWidth:"60%"}},dataLabels:{enabled:!1},xaxis:{categories:r(R).map(l=>l.domain.name),labels:{rotate:-45,style:{fontSize:"11px"}}},yaxis:{title:{text:"Number of Reports"}},colors:["#ff9800"]},series:[{name:"Reports",data:r(R).map(l=>l.coverage.total_reports)}]},null,8,["options","series"])):(d(),g("div",Ma,[a(m,{size:"64",color:"grey"},{default:e(()=>t[46]||(t[46]=[n("mdi-chart-bar")])),_:1}),t[47]||(t[47]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No data available",-1))]))]),_:1})]),_:1}),a(s,{cols:"12",md:"6"},{default:e(()=>[a(M,null,{default:e(()=>[r(R).filter(l=>l.metrics.avg_speed>0).length>0?(d(),b(ye,{key:0,type:"bar",height:"300",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Average Speed by Domain",align:"left",style:{fontSize:"16px",fontWeight:600}},plotOptions:{bar:{borderRadius:4,columnWidth:"60%"}},dataLabels:{enabled:!0,formatter:function(l){return l.toFixed(0)+" Mbps"}},xaxis:{categories:r(R).filter(l=>l.metrics.avg_speed>0).map(l=>l.domain.name),labels:{rotate:-45,style:{fontSize:"11px"}}},yaxis:{title:{text:"Speed (Mbps)"}},colors:["#9c27b0"]},series:[{name:"Avg Speed",data:r(R).filter(l=>l.metrics.avg_speed>0).map(l=>l.metrics.avg_speed)}]},null,8,["options","series"])):(d(),g("div",ja,[a(m,{size:"64",color:"grey"},{default:e(()=>t[48]||(t[48]=[n("mdi-speedometer")])),_:1}),t[49]||(t[49]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No speed data available",-1))]))]),_:1})]),_:1})]),_:1}),r(A).length>=3?(d(),b(_,{key:0,class:"mb-4"},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,{title:"ðŸ† Top 3 Domains"},{default:e(()=>[a(_,null,{default:e(()=>[a(s,{cols:"12",md:"4",class:"order-md-1"},{default:e(()=>[a(G,{elevation:"4",class:"h-100",color:"grey-lighten-4"},{default:e(()=>[a(Z,{class:"text-center"},{default:e(()=>[a(m,{size:"48",color:"grey"},{default:e(()=>t[50]||(t[50]=[n("mdi-medal")])),_:1}),t[55]||(t[55]=o("div",{class:"text-h5 font-weight-bold mt-2"},"#2",-1)),o("div",Oa,i(r(A)[1].domain.name),1),a(we,{class:"my-3"}),o("div",Ba,[t[51]||(t[51]=o("span",{class:"text-caption"},"Score:",-1)),o("span",Ea,i(r(A)[1].formattedScore),1)]),o("div",Na,[t[52]||(t[52]=o("span",{class:"text-caption"},"Requests:",-1)),o("span",Wa,i(r(A)[1].formattedRequests),1)]),o("div",Ia,[t[53]||(t[53]=o("span",{class:"text-caption"},"Success:",-1)),o("span",Ya,i(r(A)[1].formattedSuccessRate),1)]),a(pe,{color:"primary",variant:"tonal",size:"small",class:"mt-3",onClick:t[1]||(t[1]=l=>Ue(r(A)[1].domain.id))},{default:e(()=>t[54]||(t[54]=[n(" View Dashboard ")])),_:1})]),_:1})]),_:1})]),_:1}),a(s,{cols:"12",md:"4",class:"order-md-0"},{default:e(()=>[a(G,{elevation:"8",class:"h-100",color:"warning-lighten-4"},{default:e(()=>[a(Z,{class:"text-center"},{default:e(()=>[a(m,{size:"64",color:"warning"},{default:e(()=>t[56]||(t[56]=[n("mdi-trophy")])),_:1}),t[61]||(t[61]=o("div",{class:"text-h4 font-weight-bold mt-2"},"ðŸ‘‘ #1",-1)),o("div",Ga,i(r(A)[0].domain.name),1),a(we,{class:"my-3"}),o("div",Ha,[t[57]||(t[57]=o("span",{class:"text-caption"},"Score:",-1)),o("span",Ka,i(r(A)[0].formattedScore),1)]),o("div",Xa,[t[58]||(t[58]=o("span",{class:"text-caption"},"Requests:",-1)),o("span",Ja,i(r(A)[0].formattedRequests),1)]),o("div",Qa,[t[59]||(t[59]=o("span",{class:"text-caption"},"Success:",-1)),o("span",Za,i(r(A)[0].formattedSuccessRate),1)]),a(pe,{color:"warning",variant:"flat",size:"small",class:"mt-3",onClick:t[2]||(t[2]=l=>Ue(r(A)[0].domain.id))},{default:e(()=>t[60]||(t[60]=[n(" View Dashboard ")])),_:1})]),_:1})]),_:1})]),_:1}),a(s,{cols:"12",md:"4",class:"order-md-2"},{default:e(()=>[a(G,{elevation:"4",class:"h-100",color:"orange-lighten-4"},{default:e(()=>[a(Z,{class:"text-center"},{default:e(()=>[a(m,{size:"48",color:"orange"},{default:e(()=>t[62]||(t[62]=[n("mdi-medal")])),_:1}),t[67]||(t[67]=o("div",{class:"text-h5 font-weight-bold mt-2"},"#3",-1)),o("div",eo,i(r(A)[2].domain.name),1),a(we,{class:"my-3"}),o("div",to,[t[63]||(t[63]=o("span",{class:"text-caption"},"Score:",-1)),o("span",ao,i(r(A)[2].formattedScore),1)]),o("div",oo,[t[64]||(t[64]=o("span",{class:"text-caption"},"Requests:",-1)),o("span",lo,i(r(A)[2].formattedRequests),1)]),o("div",so,[t[65]||(t[65]=o("span",{class:"text-caption"},"Success:",-1)),o("span",ro,i(r(A)[2].formattedSuccessRate),1)]),a(pe,{color:"primary",variant:"tonal",size:"small",class:"mt-3",onClick:t[3]||(t[3]=l=>Ue(r(A)[2].domain.id))},{default:e(()=>t[66]||(t[66]=[n(" View Dashboard ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0),a(_,null,{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(vt,{title:"Complete Ranking"},{default:e(()=>[a(Me,{"fixed-header":"",height:"600px"},{default:e(()=>[t[69]||(t[69]=o("thead",null,[o("tr",null,[o("th",{class:"text-center",style:{width:"80px"}},"Rank"),o("th",{class:"text-left"},"Domain"),o("th",{class:"text-right"},"Score"),o("th",{class:"text-right"},"Total Requests"),o("th",{class:"text-right"},"Success Rate"),o("th",{class:"text-right"},"Avg Speed"),o("th",{class:"text-center"},"Providers"),o("th",{class:"text-center"},"States"),o("th",{class:"text-center"},"Reports"),o("th",{class:"text-center"},"Period"),o("th",{class:"text-center"},"Actions")])],-1)),o("tbody",null,[(d(!0),g(_e,null,he(r(R),l=>(d(),g("tr",{key:l.domain.id},[o("td",no,[a(j,{color:Vt(l.rank),variant:"flat",size:"small"},{default:e(()=>[l.rank<=3?(d(),b(m,{key:0,size:"small",class:"mr-1"},{default:e(()=>[n(i($t(l.rank)),1)]),_:2},1024)):y("",!0),n(" "+i(l.rank),1)]),_:2},1032,["color"])]),o("td",null,[o("div",io,i(l.domain.name),1),o("div",uo,i(l.domain.slug),1)]),o("td",co,[a(j,{color:"primary",variant:"tonal",size:"small"},{default:e(()=>[n(i(l.formattedScore),1)]),_:2},1024)]),o("td",mo,i(l.formattedRequests),1),o("td",po,[a(j,{color:l.metrics.success_rate>=90?"success":l.metrics.success_rate>=70?"warning":"error",variant:"tonal",size:"small"},{default:e(()=>[n(i(l.formattedSuccessRate),1)]),_:2},1032,["color"])]),o("td",_o,i(l.formattedSpeed),1),o("td",vo,[a(j,{size:"small",variant:"outlined"},{default:e(()=>[n(i(l.metrics.unique_providers),1)]),_:2},1024)]),o("td",fo,[a(j,{size:"small",variant:"outlined"},{default:e(()=>[n(i(l.metrics.unique_states),1)]),_:2},1024)]),o("td",go,i(l.coverage.total_reports),1),o("td",yo,[o("div",bo,i(l.formattedPeriod),1),o("div",ho,i(l.coverage.days_covered)+" days",1)]),o("td",xo,[a(pe,{icon:"",size:"small",variant:"text",color:"primary",onClick:I=>Ue(l.domain.id),title:"View Dashboard"},{default:e(()=>[a(m,null,{default:e(()=>t[68]||(t[68]=[n("mdi-chart-box")])),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:1}),r(R).length===0?(d(),g("div",ko,[a(m,{size:"64",color:"grey"},{default:e(()=>t[70]||(t[70]=[n("mdi-chart-box-outline")])),_:1}),t[71]||(t[71]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No ranking data available",-1))])):y("",!0)]),_:1})]),_:1})]),_:1})])):y("",!0)])):y("",!0),K.value==="provider-ranking"?(d(),g("div",wo,[a(ha)])):y("",!0),K.value==="domain-dashboard"?(d(),g("div",So,[a(_,{class:"mb-4"},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,null,{default:e(()=>[a(_,null,{default:e(()=>[a(s,{cols:"12",md:"6"},{default:e(()=>[a(ge,{modelValue:E.value,"onUpdate:modelValue":t[4]||(t[4]=l=>E.value=l),items:nt.value,label:"Select Domain",variant:"outlined","prepend-inner-icon":"mdi-domain",hint:"Choose a domain to view its detailed dashboard","persistent-hint":"",clearable:""},{item:e(({props:l,item:I})=>[a(be,lt(st(l)),{prepend:e(()=>[a(m,{color:"primary"},{default:e(()=>t[72]||(t[72]=[n("mdi-domain")])),_:1})]),default:e(()=>[a(Se,null,{default:e(()=>[n(i(I.raw.title),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1}),E.value?(d(),b(s,{key:0,cols:"12",md:"6"},{default:e(()=>[a(ge,{modelValue:Y.value,"onUpdate:modelValue":t[5]||(t[5]=l=>Y.value=l),items:Dt.value,"item-title":"reportDate","item-value":"id",label:"Select Report",variant:"outlined",density:"compact",loading:r(Ge),"prepend-inner-icon":"mdi-calendar"},{item:e(({props:l,item:I})=>[a(be,lt(st(l)),{prepend:e(()=>[a(j,{color:I.raw.statusColor,size:"x-small",variant:"tonal"},null,8,["color"])]),subtitle:e(()=>[I.raw.id!=="all"?(d(),g("span",Do,"ID: "+i(I.raw.id)+" | Version: "+i(I.raw.data_version),1)):(d(),g("span",Ro,"Combined data from all reports"))]),_:2},1040)]),_:1},8,["modelValue","items","loading"])]),_:1})):y("",!0)]),_:1}),E.value&&dt.value?(d(),b(_,{key:0},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(re,{color:"info",variant:"tonal",density:"compact"},{default:e(()=>[a(m,{start:""},{default:e(()=>t[73]||(t[73]=[n("mdi-information")])),_:1}),n(" "+i(dt.value),1)]),_:1})]),_:1})]),_:1})):y("",!0)]),_:1})]),_:1})]),_:1}),E.value&&Y.value==="all"?(d(),b(_,{key:0,class:"mb-4"},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(G,{variant:"outlined",class:"pa-3"},{default:e(()=>[o("div",Po,[a(m,{size:"small",class:"mr-1"},{default:e(()=>t[74]||(t[74]=[n("mdi-filter")])),_:1}),t[75]||(t[75]=n(" Filter by Period or Date Range "))]),a(_,null,{default:e(()=>[a(s,{cols:"12",md:"3"},{default:e(()=>[a(ge,{modelValue:le.value,"onUpdate:modelValue":[t[6]||(t[6]=l=>le.value=l),Pt],items:Fe,label:"Period",clearable:"",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-range"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",sm:"6",md:"4"},{default:e(()=>[a(We,{modelValue:se.value,"onUpdate:modelValue":t[7]||(t[7]=l=>se.value=l),label:"Start Date","prepend-inner-icon":"mdi-calendar-start"},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",sm:"6",md:"4"},{default:e(()=>[a(We,{modelValue:k.value,"onUpdate:modelValue":t[8]||(t[8]=l=>k.value=l),label:"End Date","prepend-inner-icon":"mdi-calendar-end"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0),E.value?r(T)?(d(),b(_,{key:2},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,null,{default:e(()=>[o("div",zo,[a(fe,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):r(C)?(d(),b(_,{key:3},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,null,{default:e(()=>[a(re,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[n(i(r(C)),1)]),_:1})]),_:1})]),_:1})]),_:1})):E.value&&(r(de)||r(te))?(d(),g("div",Fo,[a(_,{class:"mb-4"},{default:e(()=>[a(s,{cols:"12",sm:"6",md:"3"},{default:e(()=>[a(G,{elevation:"2",class:"h-100"},{default:e(()=>[a(Z,null,{default:e(()=>[o("div",Co,[t[80]||(t[80]=o("div",{class:"text-h6 text-medium-emphasis"},"Total Requests",-1)),a(m,{color:"primary",size:"32"},{default:e(()=>t[79]||(t[79]=[n("mdi-chart-line")])),_:1})]),o("div",Ao,i(Ce(r(qe).totalRequests)),1),t[81]||(t[81]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," All time requests ",-1))]),_:1})]),_:1})]),_:1}),a(s,{cols:"12",sm:"6",md:"3"},{default:e(()=>[a(G,{elevation:"2",class:"h-100"},{default:e(()=>[a(Z,null,{default:e(()=>[o("div",To,[t[83]||(t[83]=o("div",{class:"text-h6 text-medium-emphasis"},"Success Rate",-1)),a(m,{color:"success",size:"32"},{default:e(()=>t[82]||(t[82]=[n("mdi-check-circle")])),_:1})]),o("div",Vo,i(Ze(r(qe).successRate)),1),t[84]||(t[84]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Successful requests ",-1))]),_:1})]),_:1})]),_:1}),a(s,{cols:"12",sm:"6",md:"3"},{default:e(()=>[a(G,{elevation:"2",class:"h-100"},{default:e(()=>[a(Z,null,{default:e(()=>[o("div",$o,[t[86]||(t[86]=o("div",{class:"text-h6 text-medium-emphasis"},"Daily Average",-1)),a(m,{color:"info",size:"32"},{default:e(()=>t[85]||(t[85]=[n("mdi-calendar-today")])),_:1})]),o("div",Uo,i(Ct(r(qe).dailyAverage)),1),t[87]||(t[87]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Average per day ",-1))]),_:1})]),_:1})]),_:1}),a(s,{cols:"12",sm:"6",md:"3"},{default:e(()=>[a(G,{elevation:"2",class:"h-100"},{default:e(()=>[a(Z,null,{default:e(()=>[o("div",Lo,[t[89]||(t[89]=o("div",{class:"text-h6 text-medium-emphasis"},"Unique Providers",-1)),a(m,{color:"warning",size:"32"},{default:e(()=>t[88]||(t[88]=[n("mdi-domain")])),_:1})]),o("div",Mo,i(r(qe).uniqueProviders),1),t[90]||(t[90]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Different providers ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),a(_,{class:"mb-4"},{default:e(()=>[a(s,{cols:"12",md:"6"},{default:e(()=>[a(M,null,{default:e(()=>[r(Re).series.length>0?(d(),g("div",jo,[a(ye,{type:"donut",height:"350",options:{chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Provider Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:r(Re).labels,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(l){return l.toFixed(1)+"%"}}},series:r(Re).series},null,8,["options","series"])])):(d(),g("div",Oo,[a(m,{size:"64",color:"grey"},{default:e(()=>t[91]||(t[91]=[n("mdi-chart-donut")])),_:1}),t[92]||(t[92]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No provider data available",-1))]))]),_:1})]),_:1}),a(s,{cols:"12",md:"6"},{default:e(()=>[a(M,null,{default:e(()=>[r(Ve).data.length>0?(d(),g("div",Bo,[a(ye,{type:"bar",height:"350",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Top States by Requests",align:"left",style:{fontSize:"18px",fontWeight:600}},plotOptions:{bar:{horizontal:!0,borderRadius:4,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(l){return l>=1e6?(l/1e6).toFixed(1)+"M":l>=1e3?(l/1e3).toFixed(1)+"K":l.toString()},offsetX:30},xaxis:{categories:r(Ve).categories},colors:["#1976d2"]},series:[{name:"Requests",data:r(Ve).data}]},null,8,["options","series"])])):(d(),g("div",Eo,[a(m,{size:"64",color:"grey"},{default:e(()=>t[93]||(t[93]=[n("mdi-chart-bar")])),_:1}),t[94]||(t[94]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No state data available",-1))]))]),_:1})]),_:1})]),_:1}),ct.value.length>0?(d(),b(_,{key:0,class:"mb-4"},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,{title:"Provider Distribution Details"},{default:e(()=>[a(Me,null,{default:e(()=>[t[95]||(t[95]=o("thead",null,[o("tr",null,[o("th",{class:"text-left"},"Provider"),o("th",{class:"text-left"},"Technology"),o("th",{class:"text-right"},"Total Requests"),o("th",{class:"text-center"},"Percentage")])],-1)),o("tbody",null,[(d(!0),g(_e,null,he(ct.value,l=>(d(),g("tr",{key:l.provider_id},[o("td",No,i(l.name),1),o("td",null,[a(j,{color:at(l.technology),variant:"tonal",size:"small"},{default:e(()=>[n(i(l.technology),1)]),_:2},1032,["color"])]),o("td",Wo,i(Ce(l.total_count)),1),o("td",Io,[a(j,{color:l.percentage>=20?"success":l.percentage>=10?"info":"default",variant:"tonal",size:"small"},{default:e(()=>[n(i(Ze(l.percentage)),1)]),_:2},1032,["color"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0),a(_,null,{default:e(()=>[a(s,{cols:"12",md:"6"},{default:e(()=>[a(M,null,{default:e(()=>[r(ce).data.length>0?(d(),g("div",Yo,[a(ye,{type:"bar",height:"350",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Average Speed by State",align:"left",style:{fontSize:"18px",fontWeight:600}},plotOptions:{bar:{horizontal:!1,borderRadius:8,columnWidth:"55%",distributed:!1}},dataLabels:{enabled:!1},xaxis:{categories:r(ce).categories,labels:{style:{fontSize:"12px"}}},yaxis:{title:{text:"Average Speed (Mbps)"}},colors:["#4caf50"],grid:{show:!0,borderColor:"#f0f0f0"}},series:[{name:"Avg Speed (Mbps)",data:r(ce).data}]},null,8,["options","series"])])):(d(),g("div",Go,[a(m,{size:"64",color:"grey"},{default:e(()=>t[96]||(t[96]=[n("mdi-speedometer")])),_:1}),t[97]||(t[97]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No speed data available",-1))]))]),_:1})]),_:1}),a(s,{cols:"12",md:"6"},{default:e(()=>[a(M,null,{default:e(()=>[r(Pe).series.length>0?(d(),g("div",Ho,[a(ye,{type:"donut",height:"350",options:{chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Technology Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:r(Pe).labels,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(l){return l.toFixed(1)+"%"}}},series:r(Pe).series},null,8,["options","series"])])):(d(),g("div",Ko,[a(m,{size:"64",color:"grey"},{default:e(()=>t[98]||(t[98]=[n("mdi-chart-donut")])),_:1}),t[99]||(t[99]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No technology data available",-1))]))]),_:1})]),_:1})]),_:1}),mt.value.length>0?(d(),b(_,{key:1,class:"mb-4"},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,{title:"Technology Distribution Details"},{default:e(()=>[a(Me,null,{default:e(()=>[t[100]||(t[100]=o("thead",null,[o("tr",null,[o("th",{class:"text-left"},"Technology"),o("th",{class:"text-right"},"Total Requests"),o("th",{class:"text-center"},"Percentage")])],-1)),o("tbody",null,[(d(!0),g(_e,null,he(mt.value,(l,I)=>(d(),g("tr",{key:I},[o("td",null,[a(j,{color:at(l.technology),variant:"tonal",size:"small"},{default:e(()=>[n(i(l.technology),1)]),_:2},1032,["color"])]),o("td",Xo,i(Ce(l.total_count)),1),o("td",Jo,[a(j,{color:l.percentage>=30?"success":l.percentage>=15?"info":"default",variant:"tonal",size:"small"},{default:e(()=>[n(i(Ze(l.percentage)),1)]),_:2},1032,["color"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0)])):y("",!0):(d(),b(_,{key:1},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,null,{default:e(()=>[o("div",qo,[a(m,{size:"80",color:"grey"},{default:e(()=>t[76]||(t[76]=[n("mdi-chart-box-outline")])),_:1}),t[77]||(t[77]=o("h3",{class:"text-h5 mt-4 mb-2"},"Select a domain",-1)),t[78]||(t[78]=o("p",{class:"text-medium-emphasis"}," Choose a domain from the dropdown above to view its detailed dashboard ",-1))])]),_:1})]),_:1})]),_:1}))])):y("",!0),K.value==="state-ranking"?(d(),g("div",Qo,[a(_,{class:"mb-4"},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,{title:"State Ranking Filters"},{default:e(()=>[a(_,null,{default:e(()=>[a(s,{cols:"12",md:"4"},{default:e(()=>[a(ge,{modelValue:O.value,"onUpdate:modelValue":t[9]||(t[9]=l=>O.value=l),items:At.value,label:"Select State",variant:"outlined","prepend-inner-icon":"mdi-map-marker",hint:"Select a state to view provider rankings","persistent-hint":"",clearable:"",loading:r(ve),disabled:r(ve)},{item:e(({props:l,item:I})=>[a(be,lt(st(l)),{prepend:e(()=>[a(m,{color:"primary"},{default:e(()=>t[101]||(t[101]=[n("mdi-map-marker")])),_:1})]),default:e(()=>[a(Se,null,{default:e(()=>[n(i(I.raw.title),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"]),r(oe)?(d(),b(re,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:e(()=>[n(i(r(oe)),1)]),_:1})):y("",!0)]),_:1}),O.value?(d(),b(s,{key:0,cols:"12",md:"3"},{default:e(()=>[a(ge,{modelValue:r(f).period,"onUpdate:modelValue":t[10]||(t[10]=l=>r(f).period=l),items:[{value:"today",title:"Today"},{value:"yesterday",title:"Yesterday"},{value:"last_week",title:"Last Week"},{value:"last_month",title:"Last Month"},{value:"last_year",title:"Last Year"},{value:"all_time",title:"All Time"}],label:"Period",variant:"outlined","prepend-inner-icon":"mdi-calendar"},null,8,["modelValue"])]),_:1})):y("",!0),O.value?(d(),b(s,{key:1,cols:"12",md:"2"},{default:e(()=>[a(ge,{modelValue:r(f).sort_by,"onUpdate:modelValue":t[11]||(t[11]=l=>r(f).sort_by=l),items:[{value:"total_requests",title:"Total Requests"},{value:"success_rate",title:"Success Rate"},{value:"avg_speed",title:"Avg Speed"},{value:"total_reports",title:"Total Reports"}],label:"Sort By",variant:"outlined","prepend-inner-icon":"mdi-sort",density:"compact"},null,8,["modelValue"])]),_:1})):y("",!0),O.value?(d(),b(s,{key:2,cols:"12",md:"2"},{default:e(()=>[a(Ut,{modelValue:r(f).aggregate_by_provider,"onUpdate:modelValue":t[12]||(t[12]=l=>r(f).aggregate_by_provider=l),label:"Aggregate by Provider",color:"primary",density:"compact","hide-details":""},{prepend:e(()=>[a(ot,{text:"When enabled, combines all domains for a provider into one entry."},{activator:e(({props:l})=>[a(m,Be(l,{size:"small"}),{default:e(()=>t[102]||(t[102]=[n("mdi-information-outline")])),_:2},1040)]),_:1})]),_:1},8,["modelValue"])]),_:1})):y("",!0),O.value?(d(),b(s,{key:3,cols:"12",md:"2"},{default:e(()=>[a(pe,{color:"primary",variant:"outlined",block:"",onClick:t[13]||(t[13]=l=>{r(W)(),tt(),r(S)()})},{default:e(()=>t[103]||(t[103]=[n(" Clear Filters ")])),_:1})]),_:1})):y("",!0)]),_:1}),O.value?(d(),b(_,{key:0,class:"mt-2"},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(G,{variant:"outlined",class:"pa-3"},{default:e(()=>[o("div",Zo,[a(m,{size:"small",class:"mr-1"},{default:e(()=>t[104]||(t[104]=[n("mdi-calendar-range")])),_:1}),t[105]||(t[105]=n(" Custom Date Range (Optional) "))]),a(_,null,{default:e(()=>[a(s,{cols:"12",sm:"6",md:"4"},{default:e(()=>[a(We,{"model-value":r(f).date_from??null,label:"Start Date","prepend-inner-icon":"mdi-calendar-start","onUpdate:modelValue":t[14]||(t[14]=async l=>{r(N)({date_from:l??null}),await rt(),ut()})},null,8,["model-value"])]),_:1}),a(s,{cols:"12",sm:"6",md:"4"},{default:e(()=>[a(We,{"model-value":r(f).date_to??null,label:"End Date","prepend-inner-icon":"mdi-calendar-end","onUpdate:modelValue":t[15]||(t[15]=async l=>{r(N)({date_to:l??null}),await rt(),ut()})},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0)]),_:1})]),_:1})]),_:1}),O.value?r(Ke)?(d(),b(_,{key:1},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,null,{default:e(()=>[o("div",tl,[a(fe,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):r(Ee)?(d(),b(_,{key:2},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,null,{default:e(()=>[a(re,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[n(i(r(Ee)),1)]),_:1})]),_:1})]),_:1})]),_:1})):O.value&&r($e).length>0?(d(),b(_,{key:3},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,{title:`Provider Rankings - ${et(O.value)}`},{default:e(()=>[a(re,{type:"info",variant:"tonal",class:"mb-4",density:"compact"},{default:e(()=>[a(m,{start:""},{default:e(()=>t[109]||(t[109]=[n("mdi-information")])),_:1}),n(" Showing "+i(r(Xe))+" "+i(r(c)?"provider":"domain-provider")+" ranking(s) for "+i(et(O.value))+" ",1),r(c)?(d(),g("span",al,[a(j,{size:"x-small",color:"primary",variant:"tonal"},{default:e(()=>t[110]||(t[110]=[n("Aggregated by Provider")])),_:1})])):y("",!0)]),_:1}),a(Me,null,{default:e(()=>[o("thead",null,[o("tr",null,[t[112]||(t[112]=o("th",{class:"text-left"},"Rank",-1)),r(c)?y("",!0):(d(),g("th",ol,"Domain")),t[113]||(t[113]=o("th",{class:"text-left"},"Provider",-1)),t[114]||(t[114]=o("th",{class:"text-right"},"Total Requests",-1)),r(c)?y("",!0):(d(),g("th",ll,"% of Domain")),r(c)?y("",!0):(d(),g("th",sl,"Provider Total")),r(c)?y("",!0):(d(),g("th",rl,t[111]||(t[111]=[o("div",null,"% of Provider",-1),o("div",{class:"text-caption text-medium-emphasis"},"(row/provider)",-1)]))),r(c)?(d(),g("th",nl,"% of State")):y("",!0),r(c)?(d(),g("th",il,"Domains")):y("",!0),t[115]||(t[115]=o("th",{class:"text-right"},"Success Rate",-1)),t[116]||(t[116]=o("th",{class:"text-right"},"Avg Speed",-1)),t[117]||(t[117]=o("th",{class:"text-center"},"Reports",-1)),t[118]||(t[118]=o("th",{class:"text-center"},"Period",-1)),t[119]||(t[119]=o("th",{class:"text-center"},"Actions",-1))])]),o("tbody",null,[(d(!0),g(_e,null,he(r($e),(l,I)=>(d(),g("tr",{key:r(c)?`provider-${l.provider_id}`:`domain-${"domain_id"in l?l.domain_id:I}-provider-${l.provider_id}`},[o("td",null,[a(j,{color:l.rank<=3?"primary":"default",variant:"flat",size:"small"},{default:e(()=>[l.rank===1?(d(),b(m,{key:0,size:"small",class:"mr-1"},{default:e(()=>t[120]||(t[120]=[n("mdi-trophy")])),_:1})):l.rank===2?(d(),b(m,{key:1,size:"small",class:"mr-1"},{default:e(()=>t[121]||(t[121]=[n("mdi-medal")])),_:1})):l.rank===3?(d(),b(m,{key:2,size:"small",class:"mr-1"},{default:e(()=>t[122]||(t[122]=[n("mdi-medal-outline")])),_:1})):y("",!0),n(" "+i(l.rank),1)]),_:2},1032,["color"])]),!r(c)&&"domain_name"in l?(d(),g("td",dl,[o("div",ul,i(l.domain_name),1),o("div",cl,i(l.domain_slug),1)])):y("",!0),o("td",null,[o("div",ml,i(l.provider_name),1),"technology"in l&&l.technology?(d(),b(j,{key:0,size:"x-small",variant:"outlined",class:"mt-1"},{default:e(()=>[n(i(l.technology),1)]),_:2},1024)):y("",!0)]),o("td",pl,i(l.formattedRequests),1),!r(c)&&"formattedPercentage"in l?(d(),g("td",_l,[a(j,{color:"primary",variant:"tonal",size:"small"},{default:e(()=>[n(i(l.formattedPercentage),1)]),_:2},1024)])):y("",!0),!r(c)&&"formattedProviderTotalRequests"in l?(d(),g("td",vl,[o("div",fl,i(l.formattedProviderTotalRequests),1),t[123]||(t[123]=o("div",{class:"text-caption text-medium-emphasis"},"All domains",-1))])):y("",!0),!r(c)&&"formattedPercentageOfProvider"in l?(d(),g("td",gl,[a(ot,{text:"Percentage that this domain+provider row represents of the provider's total in this state"},{activator:e(({props:je})=>[a(j,Be({ref_for:!0},je,{color:"info",variant:"tonal",size:"small"}),{default:e(()=>[n(i(l.formattedPercentageOfProvider),1)]),_:2},1040)]),_:2},1024),t[124]||(t[124]=o("div",{class:"text-caption text-medium-emphasis mt-1"},"of provider",-1))])):y("",!0),r(c)&&"formattedPercentage"in l?(d(),g("td",yl,[a(j,{color:"primary",variant:"tonal",size:"small"},{default:e(()=>[n(i(l.formattedPercentage),1)]),_:2},1024)])):y("",!0),r(c)&&"formattedDomains"in l?(d(),g("td",bl,[a(ot,{text:l.formattedDomains||""},{activator:e(({props:je})=>[a(j,Be({ref_for:!0},je,{color:"info",variant:"tonal",size:"small"}),{default:e(()=>[n(i("domainsCount"in l?l.domainsCount:0)+" domain(s) ",1)]),_:2},1040)]),_:2},1032,["text"])])):y("",!0),o("td",hl,[a(j,{color:l.avg_success_rate>=90?"success":l.avg_success_rate>=70?"warning":"error",variant:"tonal",size:"small"},{default:e(()=>[n(i(l.formattedSuccessRate),1)]),_:2},1032,["color"])]),o("td",xl,i(l.formattedSpeed),1),o("td",kl,[a(j,{size:"small",variant:"outlined"},{default:e(()=>[n(i(l.total_reports),1)]),_:2},1024)]),o("td",wl,[o("div",Sl,i(l.period_start)+" to "+i(l.period_end),1),o("div",Dl,i(l.days_covered)+" days",1)]),o("td",Rl,[!r(c)&&"domain_id"in l?(d(),b(pe,{key:0,icon:"",size:"small",variant:"text",color:"primary",onClick:je=>St(l.domain_id,O.value),title:"View Domain State Dashboard"},{default:e(()=>[a(m,null,{default:e(()=>t[125]||(t[125]=[n("mdi-eye")])),_:1})]),_:2},1032,["onClick"])):(d(),g("span",Pl,"-"))])]))),128))])]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})):O.value&&r($e).length===0?(d(),b(_,{key:4},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,null,{default:e(()=>[o("div",ql,[a(m,{size:"64",color:"grey"},{default:e(()=>t[126]||(t[126]=[n("mdi-database-off")])),_:1}),t[127]||(t[127]=o("h3",{class:"text-h6 mt-4 mb-2"},"No Data Available",-1)),o("p",zl," No provider rankings found for "+i(et(O.value))+" with the selected filters. ",1)])]),_:1})]),_:1})]),_:1})):y("",!0):(d(),b(_,{key:0},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,null,{default:e(()=>[o("div",el,[a(m,{size:"80",color:"grey"},{default:e(()=>t[106]||(t[106]=[n("mdi-map-marker-outline")])),_:1}),t[107]||(t[107]=o("h3",{class:"text-h5 mt-4 mb-2"},"Select a State",-1)),t[108]||(t[108]=o("p",{class:"text-medium-emphasis"}," Choose a state from the dropdown above to view provider rankings for that state ",-1))])]),_:1})]),_:1})]),_:1}))])):y("",!0),K.value==="comparison"?(d(),g("div",Fl,[a(_,{class:"mb-6"},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(vt,{title:"Select Domains to Compare"},{default:e(()=>[a(Lt,{onSubmit:Nt(zt,["prevent"])},{default:e(()=>[a(_,null,{default:e(()=>[a(s,{cols:"12",md:"6"},{default:e(()=>[a(ge,{modelValue:me.value,"onUpdate:modelValue":t[16]||(t[16]=l=>me.value=l),items:nt.value,label:"Select Domains (minimum 2)",variant:"outlined",multiple:"",chips:"","closable-chips":"",hint:"The first domain will be used as the baseline","persistent-hint":""},null,8,["modelValue","items"])]),_:1}),a(s,{cols:"12",md:"3"},{default:e(()=>[a(pt,{modelValue:ze.value,"onUpdate:modelValue":t[17]||(t[17]=l=>ze.value=l),label:"From Date (Optional)",type:"date",variant:"outlined",clearable:""},null,8,["modelValue"])]),_:1}),a(s,{cols:"12",md:"3"},{default:e(()=>[a(pt,{modelValue:ie.value,"onUpdate:modelValue":t[18]||(t[18]=l=>ie.value=l),label:"To Date (Optional)",type:"date",variant:"outlined",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(_,null,{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[o("div",Cl,[a(pe,{type:"submit",color:"primary","prepend-icon":"mdi-compare",disabled:me.value.length<2,loading:r(z)},{default:e(()=>t[128]||(t[128]=[n(" Compare Domains ")])),_:1},8,["disabled","loading"]),a(pe,{variant:"outlined",onClick:Ft,"prepend-icon":"mdi-refresh"},{default:e(()=>t[129]||(t[129]=[n(" Clear ")])),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(z)?(d(),b(_,{key:0},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,null,{default:e(()=>[o("div",Al,[a(fe,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):r($)?(d(),b(_,{key:1},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,null,{default:e(()=>[a(re,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[n(i(r($)),1)]),_:1})]),_:1})]),_:1})]),_:1})):r(h)&&r(h).domains?(d(),g("div",Tl,[a(_,null,{default:e(()=>[(d(!0),g(_e,null,he(r(h).domains,(l,I)=>(d(),b(s,{key:l.domain.id,cols:"12",md:r(h).domains.length===2?6:r(h).domains.length===3?4:3},{default:e(()=>[a(G,{elevation:"4",class:Wt([{"border-primary":I===0},"h-100"])},{default:e(()=>[a(_t,{class:"d-flex align-center justify-space-between"},{default:e(()=>[o("div",null,[n(i(l.domain.name)+" ",1),I===0?(d(),b(j,{key:0,color:"primary",size:"x-small",class:"ml-2"},{default:e(()=>t[130]||(t[130]=[n(" Baseline ")])),_:1})):y("",!0)])]),_:2},1024),a(Z,null,{default:e(()=>[a(Mt,{density:"compact"},{default:e(()=>[a(be,null,{prepend:e(()=>[a(m,{color:"primary"},{default:e(()=>t[131]||(t[131]=[n("mdi-chart-line")])),_:1})]),append:e(()=>[o("div",Vl,[o("span",$l,i(Ce(l.metrics.total_requests)),1),l.comparison?(d(),b(j,{key:0,color:r(ne)(l.comparison.requests_diff),size:"x-small",variant:"tonal"},{default:e(()=>[a(m,{size:"x-small"},{default:e(()=>[n(i(r(J)(l.comparison.requests_diff)),1)]),_:2},1024),n(" "+i(l.comparison.requests_diff_label),1)]),_:2},1032,["color"])):y("",!0)])]),default:e(()=>[a(Se,null,{default:e(()=>t[132]||(t[132]=[n("Total Requests")])),_:1})]),_:2},1024),a(we,{class:"my-2"}),a(be,null,{prepend:e(()=>[a(m,{color:"success"},{default:e(()=>t[133]||(t[133]=[n("mdi-check-circle")])),_:1})]),append:e(()=>[o("div",Ul,[o("span",Ll,i(l.metrics.success_rate.toFixed(1))+"%",1),l.comparison?(d(),b(j,{key:0,color:r(ne)(l.comparison.success_diff),size:"x-small",variant:"tonal"},{default:e(()=>[a(m,{size:"x-small"},{default:e(()=>[n(i(r(J)(l.comparison.success_diff)),1)]),_:2},1024),n(" "+i(l.comparison.success_diff_label),1)]),_:2},1032,["color"])):y("",!0)])]),default:e(()=>[a(Se,null,{default:e(()=>t[134]||(t[134]=[n("Success Rate")])),_:1})]),_:2},1024),a(we,{class:"my-2"}),a(be,null,{prepend:e(()=>[a(m,{color:"info"},{default:e(()=>t[135]||(t[135]=[n("mdi-speedometer")])),_:1})]),append:e(()=>[o("div",Ml,[o("span",jl,i(l.metrics.avg_speed.toFixed(1))+" Mbps",1),l.comparison?(d(),b(j,{key:0,color:r(ne)(l.comparison.speed_diff),size:"x-small",variant:"tonal"},{default:e(()=>[a(m,{size:"x-small"},{default:e(()=>[n(i(r(J)(l.comparison.speed_diff)),1)]),_:2},1024),n(" "+i(l.comparison.speed_diff_label),1)]),_:2},1032,["color"])):y("",!0)])]),default:e(()=>[a(Se,null,{default:e(()=>t[136]||(t[136]=[n("Average Speed")])),_:1})]),_:2},1024),l.metrics.unique_providers?(d(),b(we,{key:0,class:"my-2"})):y("",!0),l.metrics.unique_providers?(d(),b(be,{key:1},{prepend:e(()=>[a(m,{color:"warning"},{default:e(()=>t[137]||(t[137]=[n("mdi-domain")])),_:1})]),append:e(()=>[o("span",Ol,i(l.metrics.unique_providers),1)]),default:e(()=>[a(Se,null,{default:e(()=>t[138]||(t[138]=[n("Unique Providers")])),_:1})]),_:2},1024)):y("",!0),l.metrics.unique_states?(d(),b(we,{key:2,class:"my-2"})):y("",!0),l.metrics.unique_states?(d(),b(be,{key:3},{prepend:e(()=>[a(m,{color:"secondary"},{default:e(()=>t[139]||(t[139]=[n("mdi-map-marker")])),_:1})]),append:e(()=>[o("span",Bl,i(l.metrics.unique_states),1)]),default:e(()=>[a(Se,null,{default:e(()=>t[140]||(t[140]=[n("Unique States")])),_:1})]),_:2},1024)):y("",!0)]),_:2},1024)]),_:2},1024),a(jt,null,{default:e(()=>[a(pe,{variant:"text",color:"primary",onClick:je=>Ue(l.domain.id),"prepend-icon":"mdi-chart-box",block:""},{default:e(()=>t[141]||(t[141]=[n(" View Dashboard ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1032,["md"]))),128))]),_:1}),r(h).provider_data?(d(),b(_,{key:0},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(G,{elevation:"4"},{default:e(()=>[a(_t,{class:"d-flex align-center"},{default:e(()=>[a(m,{start:"",color:"primary"},{default:e(()=>t[142]||(t[142]=[n("mdi-account-network")])),_:1}),t[143]||(t[143]=n(" Provider Overview "))]),_:1}),a(Z,null,{default:e(()=>[a(_,{class:"mb-4"},{default:e(()=>[a(s,{cols:"12",md:"6"},{default:e(()=>[a(G,{variant:"tonal",color:"primary"},{default:e(()=>[a(Z,{class:"text-center"},{default:e(()=>[o("div",El,i(r(h).provider_data.unique_providers_count),1),t[144]||(t[144]=o("div",{class:"text-caption"},"Total Unique Providers",-1))]),_:1})]),_:1})]),_:1}),a(s,{cols:"12",md:"6"},{default:e(()=>[a(G,{variant:"tonal",color:"primary"},{default:e(()=>[a(Z,{class:"text-center"},{default:e(()=>[o("div",Nl,i(r(h).provider_data.common_providers.length),1),t[145]||(t[145]=o("div",{class:"text-caption"},"Common Providers (in all domains)",-1))]),_:1})]),_:1})]),_:1})]),_:1}),r(h).provider_data.common_providers.length>0?(d(),g("div",Wl,[o("h3",Il,[a(m,{start:"",size:"small"},{default:e(()=>t[146]||(t[146]=[n("mdi-chart-bar")])),_:1}),t[147]||(t[147]=n(" All Providers in Selected Domains "))]),a(re,{color:"primary",variant:"tonal",density:"compact",class:"mb-3"},{default:e(()=>[n(" Aggregated data for all providers across "+i(r(h).total_compared)+" selected domains ",1)]),_:1}),a(Me,{density:"compact"},{default:e(()=>[t[148]||(t[148]=o("thead",null,[o("tr",null,[o("th",{class:"text-left"},"Rank"),o("th",{class:"text-left"},"Provider"),o("th",{class:"text-left"},"Technology"),o("th",{class:"text-right"},"Total Requests"),o("th",{class:"text-right"},"Avg Speed"),o("th",{class:"text-center"},"Appearances")])],-1)),o("tbody",null,[(d(!0),g(_e,null,he(r(h).provider_data.common_providers,(l,I)=>(d(),g("tr",{key:l.provider_id},[o("td",Yl,"#"+i(I+1),1),o("td",Gl,i(l.provider_name),1),o("td",null,[a(j,{size:"small",variant:"tonal",color:at(l.technology)},{default:e(()=>[n(i(l.technology),1)]),_:2},1032,["color"])]),o("td",Hl,i(l.total_requests.toLocaleString()),1),o("td",Kl,i(l.avg_speed.toFixed(0))+" ms",1),o("td",Xl,[a(j,{size:"small",variant:"tonal",color:l.appearances>=r(h).total_compared*20?"success":"info"},{default:e(()=>[n(i(l.appearances)+" reports ",1)]),_:2},1032,["color"])])]))),128))])]),_:1})])):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0)])):!r(z)&&!r($)?(d(),b(_,{key:3},{default:e(()=>[a(s,{cols:"12"},{default:e(()=>[a(M,null,{default:e(()=>[o("div",Jl,[a(m,{size:"80",color:"grey"},{default:e(()=>t[149]||(t[149]=[n("mdi-compare")])),_:1}),t[150]||(t[150]=o("h3",{class:"text-h5 mt-4 mb-2"},"Select domains to compare",-1)),t[151]||(t[151]=o("p",{class:"text-medium-emphasis"}," Choose at least 2 domains from the selector above to see a detailed comparison ",-1))])]),_:1})]),_:1})]),_:1})):y("",!0)])):y("",!0)])}}}),is=ht(Ql,[["__scopeId","data-v-4393a274"]]);export{is as default};
