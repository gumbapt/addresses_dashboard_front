import{e as V,l as C,s as it,x as St,d as Ct,o as Ft,H as qt,c as p,a as t,h as k,i as q,w as e,r as x,q as l,g as a,j as f,t as n,F as G,m as K,n as zt,G as Rt,b as i}from"./aleRfsrb.js";import{_ as S}from"./DsVtTWtI.js";import{u as Lt}from"./CbDAeH4C.js";import{u as Tt}from"./CXAudRH5.js";const $t=()=>{const c=V(null),O=V(!1),B=V(null),J=new St,v=async(h,d)=>{O.value=!0,B.value=null;try{const _=new URLSearchParams;_.append("state_id",d.state_id.toString()),d.period&&_.append("period",d.period),d.date_from&&_.append("date_from",d.date_from),d.date_to&&_.append("date_to",d.date_to),d.sort_by&&_.append("sort_by",d.sort_by),d.cities_limit&&_.append("cities_limit",d.cities_limit.toString());const z=`/reports/domain/${h}/state-stats?${_.toString()}`,R=await J.get(z);R.success&&R.data?c.value=R.data:(B.value="Failed to load domain state statistics",c.value=null)}catch(_){B.value=_ instanceof Error?_.message:"Unexpected error loading domain state statistics",c.value=null}finally{O.value=!1}},at=C(()=>{var d;if(!((d=c.value)!=null&&d.provider_distribution))return{series:[],labels:[]};const h=c.value.provider_distribution.slice(0,8);return{series:h.map(_=>_.total_count),labels:h.map(_=>_.name)}}),Q=C(()=>{var d,_,z,R;if((d=c.value)!=null&&d.cities_chart_data)return{categories:c.value.cities_chart_data.labels,data:((_=c.value.cities_chart_data.datasets[0])==null?void 0:_.data)||[],percentages:c.value.cities_chart_data.percentages,raw_data:c.value.cities_chart_data.raw_data,colors:((z=c.value.cities_chart_data.datasets[0])==null?void 0:z.backgroundColor)||[]};if(!((R=c.value)!=null&&R.top_cities))return{categories:[],data:[],percentages:[],raw_data:[],colors:[]};const h=c.value.top_cities.slice(0,10);return{categories:h.map(N=>N.name),data:h.map(N=>N.total_requests),percentages:[],raw_data:h,colors:[]}}),ot=C(()=>{var h;return(h=c.value)!=null&&h.technology_distribution?{series:c.value.technology_distribution.map(d=>d.total_count),labels:c.value.technology_distribution.map(d=>d.technology)}:{series:[],labels:[]}}),j=C(()=>{var h;return(h=c.value)!=null&&h.daily_trends?{categories:c.value.daily_trends.map(d=>new Date(d.date).toLocaleDateString("pt-BR",{month:"short",day:"numeric"})),data:c.value.daily_trends.map(d=>d.total_requests)}:{categories:[],data:[]}}),m=C(()=>{var h;return(h=c.value)!=null&&h.kpis?{totalRequests:c.value.kpis.total_requests,successRate:c.value.kpis.success_rate,dailyAverage:c.value.kpis.daily_average,uniqueProviders:c.value.kpis.unique_providers}:{totalRequests:0,successRate:0,dailyAverage:0,uniqueProviders:0}});return{stats:it(c),loading:it(O),error:it(B),fetchStats:v,providerChartData:at,topCitiesChartData:Q,technologyChartData:ot,dailyTrendsChartData:j,topCards:m}},Pt={class:"d-flex align-center justify-space-between flex-wrap gap-4"},At={class:"flex-grow-1"},Vt={class:"text-h4 font-weight-bold"},Bt={key:0,class:"text-body-1 text-medium-emphasis"},Nt={class:"d-flex justify-center align-center py-8"},Dt={key:2},Wt={class:"d-flex align-center justify-space-between mb-2"},Et={class:"text-h3 font-weight-bold text-primary"},It={class:"d-flex align-center justify-space-between mb-2"},Ot={class:"text-h3 font-weight-bold text-success"},Ut={class:"d-flex align-center justify-space-between mb-2"},jt={class:"text-h3 font-weight-bold text-info"},Mt={class:"d-flex align-center justify-space-between mb-2"},Ht={class:"text-h3 font-weight-bold text-warning"},Yt={key:0},Zt={key:1,class:"text-center py-8"},Gt={key:0},Kt={key:1,class:"text-center py-8"},Jt={key:0},Qt={key:1,class:"text-center py-8"},Xt={key:2,class:"text-center py-8"},te={key:3,class:"mt-4"},ee={class:"d-flex align-center mb-2"},se={class:"font-weight-medium text-body-2"},ae={class:"text-h6 text-primary font-weight-bold"},oe={key:0,class:"text-caption text-medium-emphasis"},le={class:"text-caption text-medium-emphasis mt-1"},ie={class:"font-weight-medium"},ne={class:"text-caption text-medium-emphasis"},re={class:"text-right font-weight-medium"},de={class:"text-right"},ue={class:"text-right"},ce={class:"text-right"},me={class:"font-weight-medium"},pe={class:"text-caption text-medium-emphasis"},_e={class:"text-right font-weight-medium"},fe={class:"text-right"},ve={class:"text-right"},he={class:"d-flex align-center justify-space-between w-100 pr-4"},ge={class:"font-weight-bold text-h6"},xe={class:"text-caption text-medium-emphasis ml-2"},be={key:0},ye={key:1,class:"text-center py-8"},we={key:0},ke={key:1,class:"text-center py-8"},Se={class:"font-weight-medium"},Ce={class:"text-right"},Fe={class:"text-right"},Te=Ct({__name:"dashboard",setup(c){const O=Rt(),B=C(()=>parseInt(O.params.id)),J=C(()=>parseInt(O.params.stateId)),{stats:v,loading:at,error:Q,fetchStats:ot,providerChartData:j,topCitiesChartData:m,technologyChartData:h,dailyTrendsChartData:d,topCards:_}=$t(),{domains:z,loadDomains:R}=Lt(),{states:N,fetchStates:dt}=Tt(),D=V("last_month"),L=V(""),T=V(""),X=V("total_count"),tt=V(10),ut=C(()=>!z.value||!Array.isArray(z.value)?null:z.value.find(u=>u.id===B.value)),nt=C(()=>!N.value||!Array.isArray(N.value)?null:N.value.find(u=>u.id===J.value));Ft(async()=>{await R(),await dt(),await rt()}),qt([D,L,T,X,tt],()=>{rt()});const rt=async()=>{const u={state_id:J.value,sort_by:X.value,cities_limit:tt.value};L.value&&T.value?(u.date_from=L.value,u.date_to=T.value):D.value&&(u.period=D.value),await ot(B.value,u)},M=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1","#14B8A6","#A855F7","#22C55E","#F43F5E","#0EA5E9","#64748B","#D946EF","#FBBF24","#34D399","#60A5FA"],ct=C(()=>({chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Provider Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:j.value.labels,colors:M,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(u){return u.toFixed(1)+"%"}}})),mt=C(()=>{const u=m.value.categories||[];return{chart:{type:"bar",fontFamily:"inherit",height:Math.max(400,(m.value.categories.length||5)*50),toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,borderRadius:4,barHeight:"70%",distributed:m.value.colors.length>0}},dataLabels:{enabled:!0,formatter:function(s,H){const r=H.dataPointIndex,g=u[r]||"",$=m.value.percentages[r];return $!==void 0?`${g}: ${s.toLocaleString()} (${$.toFixed(1)}%)`:`${g}: ${s.toLocaleString()}`},style:{fontSize:"11px",fontWeight:600,colors:["#fff"]}},xaxis:{title:{text:"Number of Requests"},labels:{formatter:function(s){return s.toLocaleString()}}},yaxis:{categories:u,labels:{style:{fontSize:"12px"},maxWidth:150}},colors:m.value.colors.length>0?m.value.colors:M,grid:{show:!0,borderColor:"#f0f0f0",xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},tooltip:{custom:function({series:s,seriesIndex:H,dataPointIndex:r,w:g}){const $=u[r]||"Unknown",et=s[H][r],st=m.value.percentages[r];let P='<div style="padding: 8px;">';return P+=`<div style="font-weight: 600; margin-bottom: 4px;">${$}</div>`,P+=`<div>${et.toLocaleString()} requisições`,st!==void 0&&(P+=` (${st.toFixed(1)}%)`),P+="</div>",P+="</div>",P}}}}),pt=C(()=>({chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Technology Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:h.value.labels,colors:M,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(u){return u.toFixed(1)+"%"}}})),_t=C(()=>({chart:{type:"line",fontFamily:"inherit",height:350,toolbar:{show:!1}},title:{text:"Daily Trends",align:"left",style:{fontSize:"18px",fontWeight:600}},dataLabels:{enabled:!1},xaxis:{categories:d.value.categories,labels:{style:{fontSize:"12px"}}},yaxis:{title:{text:"Number of Requests"}},colors:["#4caf50"],grid:{show:!0,borderColor:"#f0f0f0"},stroke:{curve:"smooth",width:3}})),ft=u=>u>=1e6?(u/1e6).toFixed(1)+"M":u>=1e3?(u/1e3).toFixed(1)+"K":u.toString(),vt=u=>u.toFixed(1)+"%",ht=u=>u.toFixed(2),gt=()=>{zt("/dashboard?tab=state-ranking")};return(u,s)=>{const H=x("v-btn"),r=x("v-col"),g=x("v-row"),$=x("v-select"),et=x("v-text-field"),st=x("v-progress-circular"),P=x("v-alert"),w=x("v-icon"),Y=x("v-card-text"),Z=x("v-card"),U=x("apexchart"),xt=x("v-divider"),W=x("v-chip"),lt=x("v-table"),bt=x("v-expansion-panel-title"),yt=x("v-expansion-panel-text"),wt=x("v-expansion-panel"),kt=x("v-expansion-panels");return i(),p("div",null,[t(g,{class:"mb-4"},{default:e(()=>[t(r,{cols:"12"},{default:e(()=>{var o,b,A;return[a("div",Pt,[a("div",At,[t(H,{variant:"text","prepend-icon":"mdi-arrow-left",onClick:gt,class:"mb-2"},{default:e(()=>s[8]||(s[8]=[f(" Back to State Ranking ")])),_:1}),a("h1",Vt,n(((o=ut.value)==null?void 0:o.name)||"Domain")+" - "+n(((b=nt.value)==null?void 0:b.name)||"State")+" ("+n((A=nt.value)==null?void 0:A.code)+") ",1),l(v)?(i(),p("p",Bt," Period: "+n(l(v).period.date_from)+" to "+n(l(v).period.date_to)+" | "+n(l(v).period.days_covered)+" days | "+n(l(v).period.total_reports)+" reports ",1)):q("",!0)])])]}),_:1})]),_:1}),t(g,{class:"mb-4"},{default:e(()=>[t(r,{cols:"12"},{default:e(()=>[t(S,{title:"Filters"},{default:e(()=>[t(g,null,{default:e(()=>[t(r,{cols:"12",md:"3"},{default:e(()=>[t($,{modelValue:D.value,"onUpdate:modelValue":[s[0]||(s[0]=o=>D.value=o),s[1]||(s[1]=()=>{L.value="",T.value=""})],items:[{value:"today",title:"Today"},{value:"yesterday",title:"Yesterday"},{value:"last_week",title:"Last Week"},{value:"last_month",title:"Last Month"},{value:"last_year",title:"Last Year"},{value:"all_time",title:"All Time"}],label:"Period",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar"},null,8,["modelValue"])]),_:1}),t(r,{cols:"12",md:"2"},{default:e(()=>[t(et,{modelValue:L.value,"onUpdate:modelValue":[s[2]||(s[2]=o=>L.value=o),s[3]||(s[3]=()=>{L.value&&T.value&&(D.value=null)})],label:"Date From",type:"date",variant:"outlined",density:"compact",clearable:"","prepend-inner-icon":"mdi-calendar-start"},null,8,["modelValue"])]),_:1}),t(r,{cols:"12",md:"2"},{default:e(()=>[t(et,{modelValue:T.value,"onUpdate:modelValue":[s[4]||(s[4]=o=>T.value=o),s[5]||(s[5]=()=>{L.value&&T.value&&(D.value=null)})],label:"Date To",type:"date",variant:"outlined",density:"compact",clearable:"","prepend-inner-icon":"mdi-calendar-end"},null,8,["modelValue"])]),_:1}),t(r,{cols:"12",md:"3"},{default:e(()=>[t($,{modelValue:X.value,"onUpdate:modelValue":s[6]||(s[6]=o=>X.value=o),items:[{value:"total_count",title:"Total Requests"},{value:"success_rate",title:"Success Rate"},{value:"avg_speed",title:"Avg Speed"}],label:"Sort By",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-sort"},null,8,["modelValue"])]),_:1}),t(r,{cols:"12",md:"2"},{default:e(()=>[t($,{modelValue:tt.value,"onUpdate:modelValue":s[7]||(s[7]=o=>tt.value=o),modelModifiers:{number:!0},items:[{value:5,title:"Top 5"},{value:10,title:"Top 10"},{value:20,title:"Top 20"},{value:50,title:"Top 50"},{value:100,title:"Top 100"}],"item-value":"value","item-title":"title",label:"Cities Limit",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-city"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(at)?(i(),k(g,{key:0},{default:e(()=>[t(r,{cols:"12"},{default:e(()=>[t(S,null,{default:e(()=>[a("div",Nt,[t(st,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):l(Q)?(i(),k(g,{key:1},{default:e(()=>[t(r,{cols:"12"},{default:e(()=>[t(S,null,{default:e(()=>[t(P,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[f(n(l(Q)),1)]),_:1})]),_:1})]),_:1})]),_:1})):l(v)?(i(),p("div",Dt,[t(g,{class:"mb-4"},{default:e(()=>[t(r,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(Z,{elevation:"2",class:"h-100"},{default:e(()=>[t(Y,null,{default:e(()=>[a("div",Wt,[s[10]||(s[10]=a("div",{class:"text-h6 text-medium-emphasis"},"Total Requests",-1)),t(w,{color:"primary",size:"32"},{default:e(()=>s[9]||(s[9]=[f("mdi-chart-line")])),_:1})]),a("div",Et,n(ft(l(_).totalRequests)),1),s[11]||(s[11]=a("div",{class:"text-caption text-medium-emphasis mt-1"}," All time requests ",-1))]),_:1})]),_:1})]),_:1}),t(r,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(Z,{elevation:"2",class:"h-100"},{default:e(()=>[t(Y,null,{default:e(()=>[a("div",It,[s[13]||(s[13]=a("div",{class:"text-h6 text-medium-emphasis"},"Success Rate",-1)),t(w,{color:"success",size:"32"},{default:e(()=>s[12]||(s[12]=[f("mdi-check-circle")])),_:1})]),a("div",Ot,n(vt(l(_).successRate)),1),s[14]||(s[14]=a("div",{class:"text-caption text-medium-emphasis mt-1"}," Successful requests ",-1))]),_:1})]),_:1})]),_:1}),t(r,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(Z,{elevation:"2",class:"h-100"},{default:e(()=>[t(Y,null,{default:e(()=>[a("div",Ut,[s[16]||(s[16]=a("div",{class:"text-h6 text-medium-emphasis"},"Daily Average",-1)),t(w,{color:"info",size:"32"},{default:e(()=>s[15]||(s[15]=[f("mdi-calendar-today")])),_:1})]),a("div",jt,n(ht(l(_).dailyAverage)),1),s[17]||(s[17]=a("div",{class:"text-caption text-medium-emphasis mt-1"}," Average per day ",-1))]),_:1})]),_:1})]),_:1}),t(r,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(Z,{elevation:"2",class:"h-100"},{default:e(()=>[t(Y,null,{default:e(()=>[a("div",Mt,[s[19]||(s[19]=a("div",{class:"text-h6 text-medium-emphasis"},"Unique Providers",-1)),t(w,{color:"warning",size:"32"},{default:e(()=>s[18]||(s[18]=[f("mdi-domain")])),_:1})]),a("div",Ht,n(l(_).uniqueProviders),1),s[20]||(s[20]=a("div",{class:"text-caption text-medium-emphasis mt-1"}," Different providers ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{class:"mb-4"},{default:e(()=>[t(r,{cols:"12",md:"6"},{default:e(()=>[t(S,null,{default:e(()=>[l(j).series.length>0?(i(),p("div",Yt,[t(U,{type:"donut",height:"350",options:ct.value,series:l(j).series},null,8,["options","series"])])):(i(),p("div",Zt,[t(w,{size:"64",color:"grey"},{default:e(()=>s[21]||(s[21]=[f("mdi-chart-donut")])),_:1}),s[22]||(s[22]=a("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No provider data available",-1))]))]),_:1})]),_:1}),t(r,{cols:"12",md:"6"},{default:e(()=>[t(S,null,{default:e(()=>[l(h).series.length>0?(i(),p("div",Gt,[t(U,{type:"donut",height:"350",options:pt.value,series:l(h).series},null,8,["options","series"])])):(i(),p("div",Kt,[t(w,{size:"64",color:"grey"},{default:e(()=>s[23]||(s[23]=[f("mdi-chart-donut")])),_:1}),s[24]||(s[24]=a("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No technology data available",-1))]))]),_:1})]),_:1})]),_:1}),l(v)?(i(),k(g,{key:0,class:"mb-4"},{default:e(()=>[t(r,{cols:"12"},{default:e(()=>[t(S,{title:"Distribution of Requests by City"},{default:e(()=>[l(m)&&l(m).data&&l(m).data.length>0&&l(m).categories&&l(m).categories.length>0?(i(),p("div",Jt,[t(U,{type:"bar",height:Math.max(400,(l(m).categories.length||5)*50),options:mt.value,series:[{name:"Requests",data:l(m).data}]},null,8,["height","options","series"])])):l(v).top_cities&&l(v).top_cities.length>0?(i(),p("div",Qt,[t(w,{size:"64",color:"grey"},{default:e(()=>s[25]||(s[25]=[f("mdi-chart-bar")])),_:1}),s[26]||(s[26]=a("p",{class:"text-h6 mt-4 text-medium-emphasis"},"City chart data not available, but cities are listed below",-1))])):(i(),p("div",Xt,[t(w,{size:"64",color:"grey"},{default:e(()=>s[27]||(s[27]=[f("mdi-chart-bar")])),_:1}),s[28]||(s[28]=a("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No city data available",-1))])),l(m).raw_data&&l(m).raw_data.length>0||l(v).top_cities&&l(v).top_cities.length>0?(i(),p("div",te,[t(xt,{class:"mb-4"}),s[29]||(s[29]=a("div",{class:"text-subtitle-2 text-medium-emphasis mb-3"},"City Rankings",-1)),t(g,null,{default:e(()=>[(i(!0),p(G,null,K(l(m).raw_data&&l(m).raw_data.length>0?l(m).raw_data:l(v).top_cities,(o,b)=>(i(),k(r,{key:o.city_id,cols:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[t(Z,{variant:"outlined",class:"h-100"},{default:e(()=>[t(Y,{class:"pa-3"},{default:e(()=>[a("div",ee,[t(W,{color:b<3?"primary":"default",variant:"flat",size:"small",class:"mr-2"},{default:e(()=>[f(" #"+n(b+1),1)]),_:2},1032,["color"]),a("div",se,n(o.name),1)]),a("div",ae,n(o.total_requests.toLocaleString()),1),"percentage"in o?(i(),p("div",oe,n(o.percentage.toFixed(1))+"% of total ",1)):q("",!0),a("div",le,n("report_count"in o?o.report_count:0)+" report(s) ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):q("",!0)]),_:1})]),_:1})]),_:1})):q("",!0),l(d).data.length>0?(i(),k(g,{key:1,class:"mb-4"},{default:e(()=>[t(r,{cols:"12"},{default:e(()=>[t(S,null,{default:e(()=>[t(U,{type:"line",height:"350",options:_t.value,series:[{name:"Requests",data:l(d).data}]},null,8,["options","series"])]),_:1})]),_:1})]),_:1})):q("",!0),l(v).provider_distribution.length>0?(i(),k(g,{key:2,class:"mb-4"},{default:e(()=>[t(r,{cols:"12"},{default:e(()=>[t(S,{title:"Provider Distribution"},{default:e(()=>[t(lt,null,{default:e(()=>[s[30]||(s[30]=a("thead",null,[a("tr",null,[a("th",{class:"text-left"},"Provider"),a("th",{class:"text-right"},"Total Requests"),a("th",{class:"text-right"},"Percentage"),a("th",{class:"text-right"},"Success Rate"),a("th",{class:"text-right"},"Avg Speed (Mbps)")])],-1)),a("tbody",null,[(i(!0),p(G,null,K(l(v).provider_distribution,o=>(i(),p("tr",{key:o.provider_id},[a("td",null,[a("div",ie,n(o.name),1),a("div",ne,n(o.slug),1)]),a("td",re,n(o.total_count.toLocaleString()),1),a("td",de,[t(W,{color:"primary",variant:"tonal",size:"small"},{default:e(()=>[f(n(o.percentage.toFixed(1))+"% ",1)]),_:2},1024)]),a("td",ue,[t(W,{color:o.avg_success_rate>=90?"success":o.avg_success_rate>=70?"warning":"error",variant:"tonal",size:"small"},{default:e(()=>[f(n(o.avg_success_rate.toFixed(1))+"% ",1)]),_:2},1032,["color"])]),a("td",ce,n(o.avg_speed.toFixed(2)),1)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})):q("",!0),l(m).raw_data&&l(m).raw_data.length>0?(i(),k(g,{key:3,class:"mb-4"},{default:e(()=>[t(r,{cols:"12"},{default:e(()=>[t(S,{title:"Cities Distribution"},{default:e(()=>[t(lt,null,{default:e(()=>[s[34]||(s[34]=a("thead",null,[a("tr",null,[a("th",{class:"text-left"},"Rank"),a("th",{class:"text-left"},"City"),a("th",{class:"text-right"},"Total Requests"),a("th",{class:"text-right"},"Percentage"),a("th",{class:"text-right"},"Reports")])],-1)),a("tbody",null,[(i(!0),p(G,null,K(l(m).raw_data,(o,b)=>(i(),p("tr",{key:o.city_id},[a("td",null,[t(W,{color:b<3?"primary":"default",variant:"flat",size:"small"},{default:e(()=>[b===0?(i(),k(w,{key:0,size:"small",class:"mr-1"},{default:e(()=>s[31]||(s[31]=[f("mdi-trophy")])),_:1})):b===1?(i(),k(w,{key:1,size:"small",class:"mr-1"},{default:e(()=>s[32]||(s[32]=[f("mdi-medal")])),_:1})):b===2?(i(),k(w,{key:2,size:"small",class:"mr-1"},{default:e(()=>s[33]||(s[33]=[f("mdi-medal-outline")])),_:1})):q("",!0),f(" #"+n(b+1),1)]),_:2},1032,["color"])]),a("td",null,[a("div",me,n(o.name),1),a("div",pe,"ID: "+n(o.city_id),1)]),a("td",_e,n(o.total_requests.toLocaleString()),1),a("td",fe,[t(W,{color:"primary",variant:"tonal",size:"small"},{default:e(()=>[f(n("percentage"in o?o.percentage.toFixed(1):"0.0")+"% ",1)]),_:2},1024)]),a("td",ve,[t(W,{size:"small",variant:"outlined"},{default:e(()=>[f(n("report_count"in o?o.report_count:0),1)]),_:2},1024)])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})):q("",!0),l(v).cities_detailed_charts&&l(v).cities_detailed_charts.length>0?(i(),k(g,{key:4,class:"mb-4"},{default:e(()=>[t(r,{cols:"12"},{default:e(()=>[t(S,{title:"Detailed Analysis by City"},{default:e(()=>[t(kt,{variant:"accordion",class:"mb-4"},{default:e(()=>[(i(!0),p(G,null,K(l(v).cities_detailed_charts,o=>(i(),k(wt,{key:o.city_id},{default:e(()=>[t(bt,null,{default:e(()=>[a("div",he,[a("div",null,[a("span",ge,n(o.city_name),1),a("span",xe," ("+n(o.total_requests.toLocaleString())+" requests) ",1)]),t(W,{color:"primary",variant:"tonal",size:"small"},{default:e(()=>[f(" ID: "+n(o.city_id),1)]),_:2},1024)])]),_:2},1024),t(yt,null,{default:e(()=>[t(g,null,{default:e(()=>[t(r,{cols:"12",md:"6"},{default:e(()=>[t(S,{title:`Providers - ${o.city_name}`},{default:e(()=>{var b,A;return[o.providers_chart.labels.length>0?(i(),p("div",be,[t(U,{type:"bar",height:"300",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Provider Distribution",align:"left",style:{fontSize:"16px",fontWeight:600}},plotOptions:{bar:{horizontal:!0,borderRadius:4,distributed:!0}},dataLabels:{enabled:!0,formatter:function(y,E){const I=E.dataPointIndex,F=o.providers_chart.percentages[I];return F!==void 0?`${y.toLocaleString()} (${F.toFixed(1)}%)`:y.toLocaleString()},style:{fontSize:"11px",fontWeight:600,colors:["#fff"]}},xaxis:{title:{text:"Number of Requests"},labels:{formatter:function(y){return y.toLocaleString()}}},yaxis:{categories:o.providers_chart.labels,labels:{style:{fontSize:"12px"},maxWidth:120}},colors:(b=o.providers_chart.datasets[0])!=null&&b.backgroundColor&&o.providers_chart.datasets[0].backgroundColor.length>0?o.providers_chart.datasets[0].backgroundColor:M,grid:{show:!0,borderColor:"#f0f0f0",xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},tooltip:{y:{formatter:function(y,E){const I=E.dataPointIndex,F=o.providers_chart.percentages[I];return F!==void 0?`${y.toLocaleString()} requisições (${F.toFixed(1)}%)`:`${y.toLocaleString()} requisições`}}}},series:[{name:"Requests",data:((A=o.providers_chart.datasets[0])==null?void 0:A.data)||[]}]},null,8,["options","series"])])):(i(),p("div",ye,[t(w,{size:"64",color:"grey"},{default:e(()=>s[35]||(s[35]=[f("mdi-chart-bar")])),_:1}),s[36]||(s[36]=a("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No provider data available",-1))]))]}),_:2},1032,["title"])]),_:2},1024),t(r,{cols:"12",md:"6"},{default:e(()=>[t(S,{title:`Technologies - ${o.city_name}`},{default:e(()=>{var b,A;return[o.technologies_chart.labels.length>0?(i(),p("div",we,[t(U,{type:"bar",height:"300",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Technology Distribution",align:"left",style:{fontSize:"16px",fontWeight:600}},plotOptions:{bar:{horizontal:!0,borderRadius:4,distributed:!0}},dataLabels:{enabled:!0,formatter:function(y,E){const I=E.dataPointIndex,F=o.technologies_chart.percentages[I];return F!==void 0?`${y.toLocaleString()} (${F.toFixed(1)}%)`:y.toLocaleString()},style:{fontSize:"11px",fontWeight:600,colors:["#fff"]}},xaxis:{title:{text:"Number of Requests"},labels:{formatter:function(y){return y.toLocaleString()}}},yaxis:{categories:o.technologies_chart.labels,labels:{style:{fontSize:"12px"},maxWidth:120}},colors:(b=o.technologies_chart.datasets[0])!=null&&b.backgroundColor&&o.technologies_chart.datasets[0].backgroundColor.length>0?o.technologies_chart.datasets[0].backgroundColor:M,grid:{show:!0,borderColor:"#f0f0f0",xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},tooltip:{y:{formatter:function(y,E){const I=E.dataPointIndex,F=o.technologies_chart.percentages[I];return F!==void 0?`${y.toLocaleString()} requisições (${F.toFixed(1)}%)`:`${y.toLocaleString()} requisições`}}}},series:[{name:"Requests",data:((A=o.technologies_chart.datasets[0])==null?void 0:A.data)||[]}]},null,8,["options","series"])])):(i(),p("div",ke,[t(w,{size:"64",color:"grey"},{default:e(()=>s[37]||(s[37]=[f("mdi-chart-bar")])),_:1}),s[38]||(s[38]=a("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No technology data available",-1))]))]}),_:2},1032,["title"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})):q("",!0),l(v).top_zip_codes.length>0?(i(),k(g,{key:5},{default:e(()=>[t(r,{cols:"12",md:"6"},{default:e(()=>[t(S,{title:"Top Zip Codes"},{default:e(()=>[t(lt,null,{default:e(()=>[s[39]||(s[39]=a("thead",null,[a("tr",null,[a("th",{class:"text-left"},"Zip Code"),a("th",{class:"text-right"},"Total Requests"),a("th",{class:"text-right"},"Reports")])],-1)),a("tbody",null,[(i(!0),p(G,null,K(l(v).top_zip_codes,o=>(i(),p("tr",{key:o.zip_code_id},[a("td",Se,n(o.code),1),a("td",Ce,n(o.total_requests.toLocaleString()),1),a("td",Fe,n(o.report_count),1)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})):q("",!0)])):q("",!0)])}}});export{Te as default};
