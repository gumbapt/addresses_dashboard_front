import{x as R,e as d,l as m,s as p}from"./CsriCXU6.js";class U{apiClient;constructor(){this.apiClient=new R}async getDomains(r=1,e=15,a,n){try{let o=`/domains?page=${r}&per_page=${e}`;return a&&(o+=`&search=${encodeURIComponent(a)}`),n!==void 0&&(o+=`&is_active=${n}`),await this.apiClient.get(o)}catch(o){throw console.error("Get domains failed:",o),new Error("Failed to fetch domains")}}async getDomain(r){try{return await this.apiClient.get(`/domains/${r}`)}catch(e){throw console.error("Get domain failed:",e),new Error("Failed to fetch domain")}}async createDomain(r){try{return await this.apiClient.post("/domains",r)}catch(e){throw console.error("Create domain failed:",e),new Error("Failed to create domain")}}async updateDomain(r,e){try{return await this.apiClient.put(`/domains/${r}`,e)}catch(a){throw console.error("Update domain failed:",a),new Error("Failed to update domain")}}async deleteDomain(r){try{return await this.apiClient.delete(`/domains/${r}`)}catch(e){throw console.error("Delete domain failed:",e),new Error("Failed to delete domain")}}async regenerateApiKey(r){try{return await this.apiClient.post(`/domains/${r}/regenerate-api-key`)}catch(e){throw console.error("Regenerate API key failed:",e),new Error("Failed to regenerate API key")}}}class P{domainRepository;constructor(){this.domainRepository=new U}async getDomains(r=1,e=15,a,n){try{const o=await this.domainRepository.getDomains(r,e,a,n);return{success:o.success,data:o,message:"Domains loaded successfully"}}catch(o){return{success:!1,error:o instanceof Error?o.message:"Unknown error"}}}async getDomain(r){try{const e=await this.domainRepository.getDomain(r);return{success:e.success,data:e.data,message:"Domain loaded successfully"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async createDomain(r){try{const e=await this.domainRepository.createDomain(r);return{success:e.success,data:e.data,message:e.message||"Domain created successfully"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async updateDomain(r,e){try{const a=await this.domainRepository.updateDomain(r,e);return{success:a.success,data:a.data,message:a.message||"Domain updated successfully"}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unknown error"}}}async deleteDomain(r){try{const e=await this.domainRepository.deleteDomain(r);return{success:e.success,data:e.success,message:e.message||"Domain deleted successfully"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async regenerateApiKey(r){try{const e=await this.domainRepository.regenerateApiKey(r);return{success:e.success,data:e.data,message:"API key regenerated successfully"}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}}const x=()=>{const i=d([]),r=d(null),e=d(!1),a=d(null),n=new P,o=async(s=1,t=15,c,u)=>{e.value=!0,a.value=null;try{const l=await n.getDomains(s,t,c,u);l.success&&l.data?(i.value=l.data.data||[],r.value=l.data.pagination||null):(a.value=l.error||"Failed to load domains",i.value=[])}catch{a.value="Unexpected error loading domains",i.value=[]}finally{e.value=!1}},g=()=>{r.value&&r.value.current_page<r.value.last_page&&o(r.value.current_page+1,r.value.per_page)},h=()=>{r.value&&r.value.current_page>1&&o(r.value.current_page-1,r.value.per_page)},w=s=>{r.value&&s>=1&&s<=r.value.last_page&&o(s,r.value.per_page)},D=s=>{o(1,s)},f=s=>({...s,statusColor:s.is_active?"success":"error",createdDate:new Date(s.created_at).toLocaleDateString("en-US"),lastModified:new Date(s.updated_at).toLocaleDateString("en-US")}),v=m(()=>!i.value||!Array.isArray(i.value)?[]:i.value.map(f)),_=m(()=>r.value&&r.value.current_page<r.value.last_page),M=m(()=>r.value&&r.value.current_page>1),E=m(()=>{if(!r.value)return[];const s=[],t=r.value.current_page,c=r.value.last_page;let u=Math.max(1,t-2),l=Math.min(c,t+2);t<=3?l=Math.min(c,5):t>=c-2&&(u=Math.max(1,c-4));for(let y=u;y<=l;y++)s.push(y);return s}),C=async s=>{try{return await n.createDomain(s)}catch(t){return{success:!1,error:t instanceof Error?t.message:"Failed to create domain"}}},F=async(s,t)=>{try{return await n.updateDomain(s,t)}catch(c){return{success:!1,error:c instanceof Error?c.message:"Failed to update domain"}}},k=async s=>{try{return await n.deleteDomain(s)}catch(t){return{success:!1,error:t instanceof Error?t.message:"Failed to delete domain"}}},A=async s=>{try{return await n.regenerateApiKey(s)}catch(t){return{success:!1,error:t instanceof Error?t.message:"Failed to regenerate API key"}}};return{domains:p(i),pagination:p(r),loading:p(e),error:p(a),formattedDomains:v,canGoNext:_,canGoPrev:M,pageNumbers:E,loadDomains:o,nextPage:g,prevPage:h,goToPage:w,changePerPage:D,formatDomainForDisplay:f,createDomain:C,updateDomain:F,deleteDomain:k,regenerateApiKey:A}};export{x as u};
