import{R as F}from"./Bxl7p1dO.js";import{e as u,l as c,s as p}from"./D86ISdAe.js";const M=()=>{const r=u([]),t=u(null),s=u(!1),l=u(null),v=new F,n=async e=>{s.value=!0,l.value=null;try{const a=await v.getReports(e);a.success&&a.data?(r.value=a.data.data||[],t.value=a.data.meta||null):(l.value=a.error||"Failed to load reports",r.value=[])}catch{l.value="Unexpected error loading reports",r.value=[]}finally{s.value=!1}},y=async e=>{s.value=!0,l.value=null;try{const a=await v.getReport(e);return a.success&&a.data?a.data:(l.value=a.error||"Failed to load report",null)}catch{return l.value="Unexpected error loading report",null}finally{s.value=!1}},R=async()=>{s.value=!0,l.value=null;try{const e=await v.getRecentReports();e.success&&e.data?r.value=e.data||[]:(l.value=e.error||"Failed to load recent reports",r.value=[])}catch{l.value="Unexpected error loading recent reports",r.value=[]}finally{s.value=!1}},h=e=>{t.value&&t.value.current_page<t.value.last_page&&n({...e,page:t.value.current_page+1,per_page:t.value.per_page})},P=e=>{t.value&&t.value.current_page>1&&n({...e,page:t.value.current_page-1,per_page:t.value.per_page})},x=(e,a)=>{t.value&&e>=1&&e<=t.value.last_page&&n({...a,page:e,per_page:t.value.per_page})},S=(e,a)=>{n({...a,page:1,per_page:e})},g=e=>({pending:"warning",processing:"info",processed:"success",failed:"error"})[e]||"default",d=e=>({pending:"Pending",processing:"Processing",processed:"Processed",failed:"Failed"})[e]||e,f=e=>{var a;return{...e,statusColor:g(e.status),statusLabel:d(e.status),reportDate:new Date(e.report_date).toLocaleDateString("en-US"),createdDate:new Date(e.created_at).toLocaleDateString("en-US"),domainName:((a=e.domain)==null?void 0:a.name)||"N/A"}},w=c(()=>!r.value||!Array.isArray(r.value)?[]:r.value.map(f)),D=c(()=>t.value&&t.value.current_page<t.value.last_page),L=c(()=>t.value&&t.value.current_page>1),b=c(()=>{if(!t.value)return[];const e=[],a=t.value.current_page,o=t.value.last_page;let m=Math.max(1,a-2),_=Math.min(o,a+2);a<=3?_=Math.min(o,5):a>=o-2&&(m=Math.max(1,o-4));for(let i=m;i<=_;i++)e.push(i);return e});return{reports:p(r),meta:p(t),loading:p(s),error:p(l),formattedReports:w,canGoNext:D,canGoPrev:L,pageNumbers:b,loadReports:n,loadReport:y,loadRecentReports:R,nextPage:h,prevPage:P,goToPage:x,changePerPage:S,formatReportForDisplay:f,getStatusColor:g,getStatusLabel:d}};export{M as u};
