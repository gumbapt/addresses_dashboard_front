import{d as ge,l as I,h as f,w as e,r,a as l,g as d,j as n,t as m,i as C,b as c,_ as ye,e as D,f as Ge,o as Se,c as $,q as g,F as pe,m as fe,k as Ve,v as Me,u as Be,K as je}from"./acMalUgX.js";import{_ as ve}from"./CK2JTH4_.js";import{u as Pe}from"./h05Uk6ld.js";import{u as Te}from"./BnO4xpfj.js";const qe=["innerHTML"],We=ge({__name:"ConfirmDialog",props:{modelValue:{type:Boolean},title:{default:"Confirm"},message:{},type:{default:"confirm"},confirmText:{default:"Confirm"},cancelText:{default:"Cancel"},loading:{type:Boolean,default:!1}},emits:["update:modelValue","confirm","cancel"],setup(T,{emit:b}){const U=T,z=b,O=I({get:()=>U.modelValue,set:u=>z("update:modelValue",u)}),E=I(()=>{switch(U.type){case"warning":return"mdi-alert";case"danger":return"mdi-alert-circle";case"success":return"mdi-check-circle";case"info":return"mdi-information";case"alert":return"mdi-information";case"confirm":default:return"mdi-help-circle"}}),k=I(()=>{switch(U.type){case"warning":return"warning";case"danger":return"error";case"success":return"success";case"info":return"info";case"alert":return"info";case"confirm":default:return"primary"}}),x=I(()=>{switch(U.type){case"danger":return"error";case"warning":return"warning";case"success":return"success";default:return"primary"}}),M=()=>{z("confirm"),U.loading||(O.value=!1)},B=()=>{U.loading||(z("cancel"),O.value=!1)};return(u,v)=>{const h=r("v-icon"),N=r("v-card-title"),A=r("v-divider"),L=r("v-card-text"),j=r("v-spacer"),P=r("v-btn"),_=r("v-card-actions"),o=r("v-card"),i=r("v-dialog");return c(),f(i,{modelValue:O.value,"onUpdate:modelValue":v[0]||(v[0]=p=>O.value=p),"max-width":"500",persistent:""},{default:e(()=>[l(o,null,{default:e(()=>[l(N,{class:"d-flex align-center"},{default:e(()=>[l(h,{color:k.value,class:"mr-3",size:"28"},{default:e(()=>[n(m(E.value),1)]),_:1},8,["color"]),d("span",null,m(u.title),1)]),_:1}),l(A),l(L,{class:"pt-4 pb-3"},{default:e(()=>[d("div",{class:"text-body-1",innerHTML:u.message},null,8,qe)]),_:1}),l(A),l(_,{class:"pa-4"},{default:e(()=>[l(j),u.type!=="alert"?(c(),f(P,{key:0,variant:"outlined",color:"grey",onClick:B,disabled:u.loading},{default:e(()=>[n(m(u.cancelText),1)]),_:1},8,["disabled"])):C("",!0),l(P,{color:x.value,variant:"flat",onClick:M,loading:u.loading,disabled:u.loading},{default:e(()=>[n(m(u.confirmText),1)]),_:1},8,["color","loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),he=ye(We,[["__scopeId","data-v-2b0e6b6e"]]),$e=()=>{const T=D({isOpen:!1,title:"Confirm",message:"",type:"confirm",confirmText:"Confirm",cancelText:"Cancel",loading:!1,resolve:void 0}),b=u=>new Promise(v=>{T.value={isOpen:!0,title:u.title||"Confirm",message:u.message,type:u.type||"confirm",confirmText:u.confirmText||"Confirm",cancelText:u.cancelText||"Cancel",loading:!1,resolve:v}});return{dialogState:T,showDialog:b,confirm:async(u,v)=>b({title:v||"Confirm Action",message:u,type:"confirm",confirmText:"Confirm",cancelText:"Cancel"}),alert:async(u,v)=>b({title:v||"Information",message:u,type:"alert",confirmText:"OK"}),warning:async(u,v)=>b({title:v||"Warning",message:u,type:"warning",confirmText:"Confirm",cancelText:"Cancel"}),danger:async(u,v)=>b({title:v||"Danger",message:u,type:"danger",confirmText:"Delete",cancelText:"Cancel"}),success:async(u,v)=>b({title:v||"Success",message:u,type:"success",confirmText:"OK"}),handleConfirm:()=>{T.value.resolve&&T.value.resolve(!0),T.value.isOpen=!1},handleCancel:()=>{T.value.resolve&&T.value.resolve(!1),T.value.isOpen=!1},setLoading:u=>{T.value.loading=u}}},Ke={class:"batch-domain-selector"},He={key:1},Re={key:1,class:"mb-4"},Je={class:"d-flex align-center justify-space-between mb-2"},Qe={class:"text-subtitle-1"},Xe={key:2},Ye={class:"d-flex align-center justify-space-between mb-2"},Ze={class:"text-subtitle-1"},el=ge({__name:"BatchDomainSelector",props:{groupId:{},groupName:{},onSuccess:{type:Function}},setup(T){const b=T,{domains:U,loadDomains:z}=Pe(),{addDomainsToGroup:O}=Te(),E=Ge(),k=$e(),x=D([]),M=D(!1),B=D(!1),u=I(()=>U.value.filter(_=>!0)),v=I(()=>{const _={"No Group":[],"Other Groups":[]};return u.value.forEach(o=>{o.domain_group_id?o.domain_group_id!==b.groupId&&_["Other Groups"].push(o):_["No Group"].push(o)}),_}),h=I(()=>x.value.some(_=>{const o=u.value.find(i=>i.id===_);return o&&o.domain_group_id&&o.domain_group_id!==b.groupId})),N=I(()=>x.value.filter(_=>{const o=u.value.find(i=>i.id===_);return o&&o.domain_group_id&&o.domain_group_id!==b.groupId}).length),A=_=>{const o=x.value.indexOf(_);o>-1?x.value.splice(o,1):x.value.push(_)},L=_=>{(v.value[_]||[]).forEach(i=>{x.value.includes(i.id)||x.value.push(i.id)})},j=()=>{x.value=[]},P=async()=>{var _;if(x.value.length===0){E.warning("Please select at least one domain");return}if(!(h.value&&!await k.warning(`<p><strong>${N.value} domain(s) will be MOVED</strong> from their current groups.</p><p class="mt-2">Do you want to continue?</p>`,"‚ö†Ô∏è Domain Move Warning"))){B.value=!0;try{const o=await O(b.groupId,x.value);if(o.success){if(((_=o.data)==null?void 0:_.domains_moved)>0){const i=o.data.moved_from||[],p=i.map(q=>q.domain_name).join(", "),F=[...new Set(i.map(q=>q.current_group_name))].join(", ");E.warning(`${o.data.domains_moved} domain(s) were moved from: ${F}`)}E.success(o.message||"Domains added successfully"),x.value=[],b.onSuccess&&b.onSuccess(),await z()}else E.error(o.error||"Failed to add domains")}catch(o){E.error(o instanceof Error?o.message:"Unexpected error")}finally{B.value=!1}}};return Se(async()=>{M.value=!0,await z(),M.value=!1}),(_,o)=>{const i=he,p=r("v-btn"),F=r("v-card-title"),q=r("v-progress-circular"),w=r("v-alert"),G=r("v-icon"),se=r("v-checkbox"),Y=r("v-list-item-title"),ie=r("v-list-item-subtitle"),re=r("v-list-item"),ue=r("v-list"),Z=r("v-chip"),de=r("v-card-text"),_e=r("v-spacer"),ce=r("v-card-actions");return c(),$("div",Ke,[l(i,{modelValue:g(k).dialogState.value.isOpen,"onUpdate:modelValue":o[0]||(o[0]=y=>g(k).dialogState.value.isOpen=y),title:g(k).dialogState.value.title,message:g(k).dialogState.value.message,type:g(k).dialogState.value.type,confirmText:g(k).dialogState.value.confirmText,cancelText:g(k).dialogState.value.cancelText,loading:g(k).dialogState.value.loading,onConfirm:g(k).handleConfirm,onCancel:g(k).handleCancel},null,8,["modelValue","title","message","type","confirmText","cancelText","loading","onConfirm","onCancel"]),l(F,{class:"d-flex align-center justify-space-between px-0"},{default:e(()=>[d("span",null,"Add Domains to "+m(_.groupName),1),d("div",null,[l(p,{size:"small",variant:"text",onClick:j,disabled:x.value.length===0},{default:e(()=>o[3]||(o[3]=[n(" Clear Selection ")])),_:1},8,["disabled"])])]),_:1}),l(de,{class:"px-0"},{default:e(()=>[M.value?(c(),f(w,{key:0,type:"info",variant:"tonal"},{default:e(()=>[l(q,{indeterminate:"",size:"20",class:"mr-2"}),o[4]||(o[4]=n(" Loading domains... "))]),_:1})):(c(),$("div",He,[h.value?(c(),f(w,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mb-4"},{default:e(()=>[o[5]||(o[5]=d("strong",null,"‚ö†Ô∏è Warning:",-1)),n(" "+m(N.value)+" domain(s) will be MOVED from their current groups. ",1)]),_:1})):C("",!0),v.value["No Group"].length>0?(c(),$("div",Re,[d("div",Je,[d("h4",Qe,[l(G,{size:"small",class:"mr-1"},{default:e(()=>o[6]||(o[6]=[n("mdi-folder-open-outline")])),_:1}),n(" Ungrouped Domains ("+m(v.value["No Group"].length)+") ",1)]),l(p,{size:"x-small",variant:"text",color:"primary",onClick:o[1]||(o[1]=y=>L("No Group"))},{default:e(()=>o[7]||(o[7]=[n(" Select All ")])),_:1})]),l(ue,{density:"compact",class:"domain-list"},{default:e(()=>[(c(!0),$(pe,null,fe(v.value["No Group"],y=>(c(),f(re,{key:y.id,onClick:Q=>A(y.id),class:"cursor-pointer"},{prepend:e(()=>[l(se,{"model-value":x.value.includes(y.id),onClick:Ve(Q=>A(y.id),["stop"]),"hide-details":"",density:"compact"},null,8,["model-value","onClick"])]),default:e(()=>[l(Y,null,{default:e(()=>[n(m(y.name),1)]),_:2},1024),l(ie,null,{default:e(()=>[n(m(y.domain_url),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})])):C("",!0),v.value["Other Groups"].length>0?(c(),$("div",Xe,[d("div",Ye,[d("h4",Ze,[l(G,{size:"small",class:"mr-1",color:"warning"},{default:e(()=>o[8]||(o[8]=[n("mdi-folder-swap-outline")])),_:1}),n(" Domains in Other Groups ("+m(v.value["Other Groups"].length)+") ",1)]),l(p,{size:"x-small",variant:"text",color:"warning",onClick:o[2]||(o[2]=y=>L("Other Groups"))},{default:e(()=>o[9]||(o[9]=[n(" Select All ")])),_:1})]),l(w,{type:"info",variant:"tonal",density:"compact",class:"mb-2"},{default:e(()=>o[10]||(o[10]=[n(" These domains will be MOVED from their current groups ")])),_:1}),l(ue,{density:"compact",class:"domain-list"},{default:e(()=>[(c(!0),$(pe,null,fe(v.value["Other Groups"],y=>(c(),f(re,{key:y.id,onClick:Q=>A(y.id),class:"cursor-pointer"},{prepend:e(()=>[l(se,{"model-value":x.value.includes(y.id),onClick:Ve(Q=>A(y.id),["stop"]),"hide-details":"",density:"compact",color:"warning"},null,8,["model-value","onClick"])]),default:e(()=>[l(Y,null,{default:e(()=>[n(m(y.name),1)]),_:2},1024),l(ie,null,{default:e(()=>[n(m(y.domain_url)+" ",1),y.domainGroup?(c(),f(Z,{key:0,size:"x-small",color:"warning",variant:"outlined",class:"ml-2"},{default:e(()=>[n(" Currently in: "+m(y.domainGroup.name),1)]),_:2},1024)):C("",!0)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})])):C("",!0),u.value.length===0?(c(),f(w,{key:3,type:"info",variant:"tonal"},{default:e(()=>o[11]||(o[11]=[n(" No domains available. All domains are already in this group. ")])),_:1})):C("",!0)]))]),_:1}),l(ce,{class:"px-0"},{default:e(()=>[l(Z,{color:"info",variant:"tonal"},{default:e(()=>[n(m(x.value.length)+" domain(s) selected ",1)]),_:1}),l(_e),l(p,{color:"primary",onClick:P,loading:B.value,disabled:B.value||x.value.length===0||M.value},{default:e(()=>o[12]||(o[12]=[n(" Add Selected Domains ")])),_:1},8,["loading","disabled"])]),_:1})])}}}),ll=ye(el,[["__scopeId","data-v-02904fe3"]]),tl={class:"d-flex align-center justify-space-between"},al={class:"d-flex gap-2"},nl={class:"d-flex justify-center align-center py-8"},ol={class:"d-flex align-center"},sl={class:"font-weight-medium"},il={class:"text-caption text-medium-emphasis"},rl={class:"text-truncate",style:{"max-width":"300px"}},ul={key:0},dl={key:0,class:"text-caption text-error mt-1"},cl={class:"d-flex justify-center gap-1"},ml={class:"d-flex justify-end mt-4"},vl={class:"text-body-2 text-medium-emphasis"},pl={key:0,class:"text-center py-4"},fl={key:1},_l=ge({__name:"index",setup(T){const{formattedGroups:b,loading:U,error:z,loadDomainGroups:O,createDomainGroup:E,updateDomainGroup:k,deleteDomainGroup:x,getGroupDomains:M}=Te();Me();const{user:B}=Be(),u=$e(),v=I(()=>{var s;return((s=B.value)==null?void 0:s.is_super_admin)===!0}),h=Ge(),N=D(""),A=D("all"),L=D(!1),j=D(!1),P=D(!1),_=D(!1),o=D(!1),i=D(null),p=D({name:"",description:"",is_active:!0,max_domains:null,settings:{}}),F=D([]),q=D(!1),w=D(!1),G=D(null),se=[{value:"all",label:"All Status"},{value:!0,label:"Active"},{value:!1,label:"Inactive"}],Y=I(()=>b.value.filter(s=>{const t=s.name.toLowerCase().includes(N.value.toLowerCase())||s.description&&s.description.toLowerCase().includes(N.value.toLowerCase()),X=A.value==="all"||s.is_active===A.value;return t&&X})),ie=()=>{if(!v.value){h.warning("Only Super Admins can create domain groups");return}i.value=null,p.value={name:"",description:"",is_active:!0,max_domains:null,settings:{}},L.value=!0},re=s=>{if(!v.value){h.warning("Only Super Admins can edit domain groups");return}i.value={...s},p.value={name:s.name,description:s.description||"",is_active:s.is_active,max_domains:s.max_domains,settings:s.settings||{}},j.value=!0},ue=async s=>{if(!v.value){h.warning("Only Super Admins can delete domain groups");return}await u.danger(`<p>Are you sure you want to delete the group <strong>"${s.name}"</strong>?</p><p class="mt-2">This action cannot be undone.</p>`+(s.domainsCount>0?`<p class="mt-2 text-warning"><strong>‚ö†Ô∏è Warning:</strong> This group contains ${s.domainsCount} domain(s). They will become ungrouped.</p>`:""),"üóëÔ∏è Delete Domain Group")&&(i.value=s,await Q())},Z=async s=>{i.value=s,_.value=!0,await ce(s.id)},de=s=>{i.value=s,o.value=!0},_e=async()=>{await O(),i.value&&await ce(i.value.id),o.value=!1},ce=async s=>{q.value=!0;try{console.log("üîç Loading domains for group ID:",s);const t=await M(s);if(console.log("üîç Result from getGroupDomains:",t),t.success&&t.data){const X=t.data;console.log("üîç Setting groupDomains to:",X),F.value=X}else console.error("‚ùå Failed:",t),F.value=[]}catch(t){console.error("‚ùå Error:",t),F.value=[]}finally{q.value=!1}},y=async()=>{w.value=!0,G.value=null;try{let s;console.log("üîç saveGroup - selectedGroup:",i.value),console.log("üîç saveGroup - mode:",i.value?"UPDATE":"CREATE"),i.value?(console.log("üîç Updating group ID:",i.value.id),s=await k(i.value.id,p.value)):(console.log("üîç Creating new group"),s=await E(p.value)),console.log("üîç saveGroup - result:",s),s.success?(L.value=!1,j.value=!1,i.value=null,h.success(s.message||"Domain group saved successfully"),await O()):(G.value=s.error||"Failed to save domain group",h.error(s.error||"Failed to save domain group"))}catch(s){G.value=s instanceof Error?s.message:"Unexpected error",h.error(s instanceof Error?s.message:"Unexpected error")}finally{w.value=!1}},Q=async()=>{if(i.value){w.value=!0,G.value=null;try{const s=await x(i.value.id);s.success?(P.value=!1,i.value=null,h.success("Domain group deleted successfully"),await O()):(G.value=s.error||"Failed to delete domain group",h.error(s.error||"Failed to delete domain group"))}catch(s){G.value=s instanceof Error?s.message:"Unexpected error",h.error(s instanceof Error?s.message:"Unexpected error")}finally{w.value=!1}}},Ae=()=>{N.value="",A.value="all"};return Se(()=>{O()}),(s,t)=>{const X=he,S=r("v-btn"),H=r("v-alert"),V=r("v-col"),W=r("v-row"),ee=r("v-text-field"),Oe=r("v-select"),R=r("v-chip"),xe=r("v-progress-circular"),J=r("v-icon"),Ue=r("v-tooltip"),ze=r("v-table"),le=r("v-card-title"),Ce=r("v-textarea"),be=r("v-switch"),we=r("v-form"),te=r("v-card-text"),me=r("v-spacer"),ae=r("v-card-actions"),ne=r("v-card"),oe=r("v-dialog"),Ee=r("v-list-item-title"),Ne=r("v-list-item-subtitle"),Le=r("v-list-item"),Fe=r("v-list"),Ie=r("v-divider");return c(),$("div",null,[l(X,{modelValue:g(u).dialogState.value.isOpen,"onUpdate:modelValue":t[0]||(t[0]=a=>g(u).dialogState.value.isOpen=a),title:g(u).dialogState.value.title,message:g(u).dialogState.value.message,type:g(u).dialogState.value.type,confirmText:g(u).dialogState.value.confirmText,cancelText:g(u).dialogState.value.cancelText,loading:g(u).dialogState.value.loading,onConfirm:g(u).handleConfirm,onCancel:g(u).handleCancel},null,8,["modelValue","title","message","type","confirmText","cancelText","loading","onConfirm","onCancel"]),l(W,{class:"mb-4"},{default:e(()=>[l(V,{cols:"12"},{default:e(()=>[d("div",tl,[t[24]||(t[24]=d("div",null,[d("h1",{class:"text-h4 font-weight-bold"},"Domain Groups"),d("p",{class:"text-body-1 text-medium-emphasis"}," Organize and manage domain groups ")],-1)),v.value?(c(),f(S,{key:0,color:"primary","prepend-icon":"mdi-plus",onClick:ie,size:"large"},{default:e(()=>t[22]||(t[22]=[n(" Create Group ")])),_:1})):(c(),f(H,{key:1,type:"info",variant:"tonal",density:"compact"},{default:e(()=>t[23]||(t[23]=[n(" Only Super Admins can create groups ")])),_:1}))])]),_:1})]),_:1}),l(W,{class:"mb-6"},{default:e(()=>[l(V,{cols:"12"},{default:e(()=>[l(ve,{title:"Filters"},{default:e(()=>[l(W,null,{default:e(()=>[l(V,{cols:"12",md:"6"},{default:e(()=>[l(ee,{modelValue:N.value,"onUpdate:modelValue":t[1]||(t[1]=a=>N.value=a),label:"Search by name or description","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),l(V,{cols:"12",md:"6"},{default:e(()=>[l(Oe,{modelValue:A.value,"onUpdate:modelValue":t[2]||(t[2]=a=>A.value=a),items:se,"item-title":"label","item-value":"value",label:"Status",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),l(W,null,{default:e(()=>[l(V,{cols:"12"},{default:e(()=>[d("div",al,[l(S,{variant:"outlined",onClick:Ae,"prepend-icon":"mdi-refresh"},{default:e(()=>t[25]||(t[25]=[n(" Clear Filters ")])),_:1}),l(R,{color:"primary",variant:"tonal",class:"ml-auto"},{default:e(()=>[n(m(Y.value.length)+" groups found ",1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),g(U)?(c(),f(W,{key:0},{default:e(()=>[l(V,{cols:"12"},{default:e(()=>[l(ve,null,{default:e(()=>[d("div",nl,[l(xe,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):g(z)?(c(),f(W,{key:1},{default:e(()=>[l(V,{cols:"12"},{default:e(()=>[l(ve,null,{default:e(()=>[l(H,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[n(m(g(z)),1)]),_:1})]),_:1})]),_:1})]),_:1})):(c(),f(W,{key:2},{default:e(()=>[l(V,{cols:"12"},{default:e(()=>[l(ve,{title:"Domain Groups List"},{default:e(()=>[l(ze,{"fixed-header":"",height:"600px"},{default:e(()=>[t[34]||(t[34]=d("thead",null,[d("tr",null,[d("th",{class:"text-left"},"Name"),d("th",{class:"text-left"},"Description"),d("th",{class:"text-left"},"Domains"),d("th",{class:"text-left"},"Limit"),d("th",{class:"text-left"},"Status"),d("th",{class:"text-left"},"Created At"),d("th",{class:"text-center"},"Actions")])],-1)),d("tbody",null,[(c(!0),$(pe,null,fe(Y.value,a=>(c(),$("tr",{key:a.id},[d("td",null,[d("div",ol,[l(J,{class:"mr-2",color:a.is_active?"primary":"grey"},{default:e(()=>t[26]||(t[26]=[n(" mdi-folder ")])),_:2},1032,["color"]),d("div",null,[d("div",sl,m(a.name),1),d("div",il,m(a.slug),1)])])]),d("td",null,[d("div",rl,m(a.description||"-"),1)]),d("td",null,[l(R,{color:"info",variant:"tonal",size:"small",onClick:K=>Z(a),style:{cursor:"pointer"}},{default:e(()=>[n(m(a.domainsCount)+" domains ",1)]),_:2},1032,["onClick"])]),d("td",null,[a.max_domains?(c(),$("div",ul,[l(R,{color:a.isFull?"error":"success",variant:"tonal",size:"small"},{default:e(()=>[n(m(a.limitLabel),1)]),_:2},1032,["color"]),a.isFull?(c(),$("div",dl," Full ")):C("",!0)])):(c(),f(R,{key:1,variant:"outlined",size:"small"},{default:e(()=>t[27]||(t[27]=[n(" Unlimited ")])),_:1}))]),d("td",null,[l(R,{color:a.statusColor,variant:"tonal",size:"small"},{default:e(()=>[n(m(a.statusLabel),1)]),_:2},1032,["color"])]),d("td",null,m(a.createdDate),1),d("td",null,[d("div",cl,[l(S,{icon:"",size:"small",variant:"text",color:"info",onClick:K=>Z(a),title:"View Domains"},{default:e(()=>[l(J,null,{default:e(()=>t[28]||(t[28]=[n("mdi-eye")])),_:1})]),_:2},1032,["onClick"]),v.value?(c(),f(S,{key:0,icon:"",size:"small",variant:"text",color:"success",onClick:K=>de(a),title:"Add Domains"},{default:e(()=>[l(J,null,{default:e(()=>t[29]||(t[29]=[n("mdi-plus-circle")])),_:1})]),_:2},1032,["onClick"])):C("",!0),v.value?(c(),f(S,{key:1,icon:"",size:"small",variant:"text",color:"primary",onClick:K=>re(a),title:"Edit"},{default:e(()=>[l(J,null,{default:e(()=>t[30]||(t[30]=[n("mdi-pencil")])),_:1})]),_:2},1032,["onClick"])):C("",!0),v.value?(c(),f(S,{key:2,icon:"",size:"small",variant:"text",color:"error",onClick:K=>ue(a),title:"Delete",disabled:a.domainsCount>0},{default:e(()=>[l(J,null,{default:e(()=>t[31]||(t[31]=[n("mdi-delete")])),_:1})]),_:2},1032,["onClick","disabled"])):C("",!0),v.value&&a.domainsCount>0?(c(),f(Ue,{key:3,location:"top"},{activator:e(({props:K})=>[l(J,je({ref_for:!0},K,{size:"small",color:"grey"}),{default:e(()=>t[32]||(t[32]=[n("mdi-information")])),_:2},1040)]),default:e(()=>[t[33]||(t[33]=n(" Cannot delete group with domains "))]),_:1})):C("",!0)])])]))),128))])]),_:1}),d("div",ml,[d("div",vl," Total: "+m(g(b).length)+" groups ",1)])]),_:1})]),_:1})]),_:1})),l(oe,{modelValue:L.value,"onUpdate:modelValue":t[8]||(t[8]=a=>L.value=a),"max-width":"700px",scrollable:""},{default:e(()=>[l(ne,null,{default:e(()=>[l(le,null,{default:e(()=>t[35]||(t[35]=[n("Create Domain Group")])),_:1}),l(te,null,{default:e(()=>[l(we,null,{default:e(()=>[l(W,null,{default:e(()=>[l(V,{cols:"12"},{default:e(()=>[l(ee,{modelValue:p.value.name,"onUpdate:modelValue":t[3]||(t[3]=a=>p.value.name=a),label:"Group Name",variant:"outlined",required:"",placeholder:"e.g., Production Sites",hint:"A unique name for this group","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(V,{cols:"12"},{default:e(()=>[l(Ce,{modelValue:p.value.description,"onUpdate:modelValue":t[4]||(t[4]=a=>p.value.description=a),label:"Description",variant:"outlined",rows:"3",placeholder:"Describe the purpose of this group...",hint:"Optional description","persistent-hint":""},null,8,["modelValue"])]),_:1}),l(V,{cols:"12",md:"6"},{default:e(()=>[l(ee,{modelValue:p.value.max_domains,"onUpdate:modelValue":t[5]||(t[5]=a=>p.value.max_domains=a),modelModifiers:{number:!0},label:"Max Domains",variant:"outlined",type:"number",min:"1",placeholder:"Leave empty for unlimited",hint:"Maximum number of domains allowed in this group","persistent-hint":"",clearable:""},null,8,["modelValue"])]),_:1}),l(V,{cols:"12",md:"6"},{default:e(()=>[l(be,{modelValue:p.value.is_active,"onUpdate:modelValue":t[6]||(t[6]=a=>p.value.is_active=a),label:"Active Group",color:"primary",hint:"Inactive groups cannot accept new domains","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(ae,null,{default:e(()=>[l(me),G.value?(c(),f(H,{key:0,type:"error",variant:"tonal",density:"compact",class:"mr-4"},{default:e(()=>[n(m(G.value),1)]),_:1})):C("",!0),l(S,{onClick:t[7]||(t[7]=a=>L.value=!1),disabled:w.value},{default:e(()=>t[36]||(t[36]=[n("Cancel")])),_:1},8,["disabled"]),l(S,{color:"primary",onClick:y,loading:w.value,disabled:w.value},{default:e(()=>t[37]||(t[37]=[n("Create Group")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(oe,{modelValue:j.value,"onUpdate:modelValue":t[14]||(t[14]=a=>j.value=a),"max-width":"700px",scrollable:""},{default:e(()=>[l(ne,null,{default:e(()=>[l(le,null,{default:e(()=>{var a;return[n("Edit Domain Group: "+m((a=i.value)==null?void 0:a.name),1)]}),_:1}),l(te,null,{default:e(()=>[l(we,null,{default:e(()=>[l(W,null,{default:e(()=>[l(V,{cols:"12"},{default:e(()=>[l(ee,{modelValue:p.value.name,"onUpdate:modelValue":t[9]||(t[9]=a=>p.value.name=a),label:"Group Name",variant:"outlined",required:""},null,8,["modelValue"])]),_:1}),l(V,{cols:"12"},{default:e(()=>[l(Ce,{modelValue:p.value.description,"onUpdate:modelValue":t[10]||(t[10]=a=>p.value.description=a),label:"Description",variant:"outlined",rows:"3"},null,8,["modelValue"])]),_:1}),l(V,{cols:"12",md:"6"},{default:e(()=>[l(ee,{modelValue:p.value.max_domains,"onUpdate:modelValue":t[11]||(t[11]=a=>p.value.max_domains=a),modelModifiers:{number:!0},label:"Max Domains",variant:"outlined",type:"number",min:"1",placeholder:"Leave empty for unlimited",hint:"Cannot be less than current domain count","persistent-hint":"",clearable:""},null,8,["modelValue"]),i.value&&i.value.domainsCount>0?(c(),f(H,{key:0,type:"info",variant:"tonal",density:"compact",class:"mt-2"},{default:e(()=>[n(" Current domains: "+m(i.value.domainsCount),1)]),_:1})):C("",!0)]),_:1}),l(V,{cols:"12",md:"6"},{default:e(()=>[l(be,{modelValue:p.value.is_active,"onUpdate:modelValue":t[12]||(t[12]=a=>p.value.is_active=a),label:"Active Group",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(ae,null,{default:e(()=>[l(me),G.value?(c(),f(H,{key:0,type:"error",variant:"tonal",density:"compact",class:"mr-4"},{default:e(()=>[n(m(G.value),1)]),_:1})):C("",!0),l(S,{onClick:t[13]||(t[13]=a=>j.value=!1),disabled:w.value},{default:e(()=>t[38]||(t[38]=[n("Cancel")])),_:1},8,["disabled"]),l(S,{color:"primary",onClick:y,loading:w.value,disabled:w.value},{default:e(()=>t[39]||(t[39]=[n("Save Changes")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(oe,{modelValue:P.value,"onUpdate:modelValue":t[16]||(t[16]=a=>P.value=a),"max-width":"400px"},{default:e(()=>[l(ne,null,{default:e(()=>[l(le,null,{default:e(()=>t[40]||(t[40]=[n("Confirm Deletion")])),_:1}),l(te,null,{default:e(()=>{var a;return[t[41]||(t[41]=d("p",null,"Are you sure you want to delete this domain group?",-1)),d("p",null,[d("strong",null,m((a=i.value)==null?void 0:a.name),1)]),i.value&&i.value.domainsCount>0?(c(),f(H,{key:0,type:"warning",variant:"tonal",density:"compact",class:"mt-4"},{default:e(()=>[n(" This group has "+m(i.value.domainsCount)+" domain(s). Please remove them first. ",1)]),_:1})):C("",!0),G.value?(c(),f(H,{key:1,type:"error",variant:"tonal",density:"compact",class:"mt-4"},{default:e(()=>[n(m(G.value),1)]),_:1})):C("",!0)]}),_:1}),l(ae,null,{default:e(()=>[l(me),l(S,{onClick:t[15]||(t[15]=a=>P.value=!1),disabled:w.value},{default:e(()=>t[42]||(t[42]=[n("Cancel")])),_:1},8,["disabled"]),l(S,{color:"error",onClick:Q,loading:w.value,disabled:w.value||i.value&&i.value.domainsCount>0},{default:e(()=>t[43]||(t[43]=[n(" Delete ")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(oe,{modelValue:_.value,"onUpdate:modelValue":t[19]||(t[19]=a=>_.value=a),"max-width":"800px",scrollable:""},{default:e(()=>[l(ne,null,{default:e(()=>[l(le,null,{default:e(()=>{var a;return[n("Domains in "+m((a=i.value)==null?void 0:a.name),1)]}),_:1}),l(te,null,{default:e(()=>[q.value?(c(),$("div",pl,[l(xe,{indeterminate:"",color:"primary"})])):F.value.length===0?(c(),$("div",fl,[l(H,{type:"info",variant:"tonal"},{default:e(()=>t[44]||(t[44]=[n(" No domains in this group yet ")])),_:1})])):(c(),f(Fe,{key:2,density:"compact"},{default:e(()=>[(c(!0),$(pe,null,fe(F.value,a=>(c(),f(Le,{key:a.id},{prepend:e(()=>[l(J,{color:"primary"},{default:e(()=>t[45]||(t[45]=[n("mdi-web")])),_:1})]),append:e(()=>[l(R,{color:a.is_active?"success":"error",size:"small",variant:"tonal"},{default:e(()=>[n(m(a.is_active?"Active":"Inactive"),1)]),_:2},1032,["color"])]),default:e(()=>[l(Ee,null,{default:e(()=>[n(m(a.name),1)]),_:2},1024),l(Ne,null,{default:e(()=>[n(m(a.domain_url),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1}),l(ae,null,{default:e(()=>[l(R,{color:"info",variant:"tonal"},{default:e(()=>[n(m(F.value.length)+" domain(s) ",1)]),_:1}),l(me),v.value?(c(),f(S,{key:0,color:"success",variant:"outlined",onClick:t[17]||(t[17]=a=>{_.value=!1,de(i.value)})},{default:e(()=>[l(J,{start:""},{default:e(()=>t[46]||(t[46]=[n("mdi-plus")])),_:1}),t[47]||(t[47]=n(" Add Domains "))]),_:1})):C("",!0),l(S,{onClick:t[18]||(t[18]=a=>_.value=!1)},{default:e(()=>t[48]||(t[48]=[n("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(oe,{modelValue:o.value,"onUpdate:modelValue":t[21]||(t[21]=a=>o.value=a),"max-width":"900px",scrollable:""},{default:e(()=>[l(ne,null,{default:e(()=>[l(le,{class:"d-flex align-center justify-space-between"},{default:e(()=>{var a,K,De;return[d("span",null,"Manage Domains: "+m((a=i.value)==null?void 0:a.name),1),(K=i.value)!=null&&K.max_domains?(c(),f(R,{key:0,color:(De=i.value)!=null&&De.isFull?"error":"info",variant:"tonal",size:"small"},{default:e(()=>{var ke;return[n(m((ke=i.value)==null?void 0:ke.limitLabel),1)]}),_:1},8,["color"])):C("",!0)]}),_:1}),l(Ie),l(te,null,{default:e(()=>[i.value?(c(),f(ll,{key:0,"group-id":i.value.id,"group-name":i.value.name,"on-success":_e},null,8,["group-id","group-name"])):C("",!0)]),_:1}),l(ae,null,{default:e(()=>[l(S,{onClick:t[20]||(t[20]=a=>o.value=!1)},{default:e(()=>t[49]||(t[49]=[n("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),bl=ye(_l,[["__scopeId","data-v-bbd7a5ba"]]);export{bl as default};
