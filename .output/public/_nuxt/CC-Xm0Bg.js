var et=Object.defineProperty;var tt=(S,i,m)=>i in S?et(S,i,{enumerable:!0,configurable:!0,writable:!0,value:m}):S[i]=m;var Le=(S,i,m)=>tt(S,typeof i!="symbol"?i+"":i,m);import{x as at,e as T,l as J,d as Ge,o as Ie,c as _,a as t,h as y,i as F,r as g,w as e,q as l,j as n,p as ot,g as o,K as Ne,t as r,F as pe,m as ke,b as d,_ as Ke,s as ne,C as Oe,H as We,I as Ee,k as st,n as lt,G as nt}from"./acMalUgX.js";import{_ as M}from"./BRNUzL-y.js";import{_ as Be}from"./CK2JTH4_.js";import{R as Xe,u as rt}from"./CZ_kP1hI.js";import{u as it}from"./h05Uk6ld.js";import{u as dt}from"./C-b4rtXj.js";class ut{constructor(){Le(this,"apiClient");this.apiClient=new at}async getRankings(i){try{const m=new URLSearchParams;i!=null&&i.provider_id&&m.append("provider_id",i.provider_id.toString()),i!=null&&i.technology&&m.append("technology",i.technology),i!=null&&i.period&&m.append("period",i.period),i!=null&&i.date_from&&m.append("date_from",i.date_from),i!=null&&i.date_to&&m.append("date_to",i.date_to),i!=null&&i.sort_by&&m.append("sort_by",i.sort_by),(i==null?void 0:i.aggregate_by_provider)!==void 0&&m.append("aggregate_by_provider",i.aggregate_by_provider?"true":"false"),i!=null&&i.page&&m.append("page",i.page.toString()),i!=null&&i.per_page&&m.append("per_page",i.per_page.toString()),i!=null&&i.limit&&!(i!=null&&i.page)&&!(i!=null&&i.per_page)&&m.append("limit",i.limit.toString());const c=`/reports/global/provider-ranking${m.toString()?`?${m.toString()}`:""}`;console.log("ðŸ” ProviderRankingRepository - URL:",c);const j=await this.apiClient.get(c);return console.log("ðŸ” ProviderRankingRepository - Response:",j),j}catch(m){throw console.error("ProviderRankingRepository - getRankings error:",m),m}}}class ct{constructor(){Le(this,"providerRankingRepository");this.providerRankingRepository=new ut}async getProviderRankings(i){var m;try{console.log("ðŸ” ProviderRankingService - getProviderRankings filters:",i);const c=await this.providerRankingRepository.getRankings(i);return console.log("ðŸ” ProviderRankingService - response:",c),c.success&&c.data?Array.isArray(c.data)?{success:!0,data:{rankings:c.data,totalEntries:((m=c.pagination)==null?void 0:m.total)||c.data.length,filters:c.filters||{},pagination:c.pagination,availableProviders:c.available_providers||[],aggregatedStats:c.aggregated_stats||void 0,globalStats:c.global_stats||void 0}}:{success:!0,data:{rankings:c.data.ranking||[],totalEntries:c.data.total_entries||0,filters:c.data.filters||{},availableProviders:c.available_providers||[],aggregatedStats:c.aggregated_stats||void 0,globalStats:c.global_stats||void 0}}:{success:!1,error:"Failed to fetch provider rankings"}}catch(c){return console.error("ProviderRankingService - getProviderRankings error:",c),{success:!1,error:c instanceof Error?c.message:"Failed to fetch provider rankings"}}}async getTopProviderDomain(i){try{const m=await this.providerRankingRepository.getRankings({provider_id:i,limit:1});if(m.success&&m.data){const c=Array.isArray(m.data)?m.data:m.data.ranking||[];if(c.length>0)return{success:!0,data:c[0]}}return{success:!0,data:null}}catch(m){return console.error("ProviderRankingService - getTopProviderDomain error:",m),{success:!1,error:m instanceof Error?m.message:"Failed to fetch top provider domain"}}}}const Ye=()=>{const S=T([]),i=T(0),m=T(null),c=T([]),j=T(null),R=T(null),b=T({technology:null,provider_id:null,period:"all_time",sort_by:"total_requests",page:1,per_page:15,aggregate_by_provider:!1}),U=T(!1),z=T(null),V=new ct,x=T("total_requests"),P=J(()=>{let h=S.value.map(w=>{var A,H;return{...w,requestsFormatted:w.total_requests.toLocaleString(),domainTotalFormatted:((A=w.domain_total_requests)==null?void 0:A.toLocaleString())||"-",percentageFormatted:((H=w.percentage_of_domain)==null?void 0:H.toFixed(1))||"0.0",percentageColor:Y(w.percentage_of_domain),successRateFormatted:w.avg_success_rate.toFixed(1),avgSpeedFormatted:w.avg_speed.toFixed(0),successRateColor:w.avg_success_rate>=90?"success":w.avg_success_rate>=70?"warning":"error",techColor:E(w.technology),hasMedal:w.rank<=3,medalEmoji:w.rank===1?"ðŸ¥‡":w.rank===2?"ðŸ¥ˆ":w.rank===3?"ðŸ¥‰":""}});return x.value==="domain_total"?h=h.sort((w,A)=>(A.domain_total_requests||0)-(w.domain_total_requests||0)):x.value==="percentage"?h=h.sort((w,A)=>(A.percentage_of_domain||0)-(w.percentage_of_domain||0)):x.value==="avg_speed"&&(h=h.sort((w,A)=>w.avg_speed-A.avg_speed)),h}),E=h=>h&&{Fiber:"blue",Cable:"green",DSL:"orange",Mobile:"purple",Satellite:"red"}[h]||"grey",Y=h=>h?h>=50?"error":h>=25?"warning":h>=10?"info":"success":"grey",G=async h=>{U.value=!0,z.value=null;try{const w=h||b.value,A=await V.getProviderRankings(w);A.success&&A.data?(S.value=A.data.rankings,i.value=A.data.totalEntries,m.value=A.data.pagination||null,c.value=A.data.availableProviders||[],j.value=A.data.aggregatedStats||null,R.value=A.data.globalStats||null):(z.value=A.error||"Failed to load provider rankings",S.value=[],m.value=null,c.value=[],j.value=null,R.value=null)}catch(w){z.value=w instanceof Error?w.message:"Unexpected error",S.value=[]}finally{U.value=!1}};return{rankings:S,formattedRankings:P,totalEntries:i,pagination:m,availableProviders:c,aggregatedStats:j,globalStats:R,filters:b,loading:U,error:z,localSortBy:x,loadProviderRankings:G,getTopProviderDomain:async h=>await V.getTopProviderDomain(h),updateFilters:h=>{b.value={...b.value,...h}},clearFilters:()=>{b.value={technology:null,provider_id:null,period:"all_time",sort_by:"total_requests",page:1,per_page:15,aggregate_by_provider:!1}},goToPage:async h=>{b.value.page=h,await G()},changePerPage:async h=>{b.value.per_page=h,b.value.page=1,await G()},changeLocalSort:h=>{x.value=h}}},mt={class:"provider-rankings"},pt={class:"d-flex align-center ga-2"},vt={class:"d-flex flex-wrap ga-4"},ft={class:"text-h4 font-weight-bold"},gt={class:"text-h4 font-weight-bold"},_t={class:"text-h4 font-weight-bold"},bt={class:"text-h4 font-weight-bold"},yt={class:"font-weight-bold"},xt={key:0,class:"mr-2"},ht={class:"font-weight-medium"},kt={class:"text-caption text-medium-emphasis"},St={key:0,class:"d-flex flex-wrap ga-1"},wt={key:1,class:"text-medium-emphasis"},Rt={class:"text-right font-weight-medium"},Dt={class:"text-right text-medium-emphasis"},zt={class:"text-center"},Pt={class:"text-right"},qt={class:"d-flex align-center"},Ft={class:"text-caption text-medium-emphasis"},Ct={class:"d-flex align-center ga-2"},Tt=Ge({__name:"ProviderRankingTable",setup(S){const{formattedRankings:i,totalEntries:m,pagination:c,availableProviders:j,aggregatedStats:R,globalStats:b,filters:U,loading:z,error:V,localSortBy:x,loadProviderRankings:P,updateFilters:E,clearFilters:Y,goToPage:G,changePerPage:I,changeLocalSort:B}=Ye(),C=T({...U.value}),Se=J(()=>!j.value||j.value.length===0?[]:j.value.map(q=>({title:`${q.name} (${q.total_requests.toLocaleString()} requests)`,value:q.id}))),ve=[{title:"ðŸ“… Today",value:"today"},{title:"ðŸ“… Yesterday",value:"yesterday"},{title:"ðŸ“… Last Week",value:"last_week"},{title:"ðŸ“… Last Month",value:"last_month"},{title:"ðŸ“… Last Year",value:"last_year"},{title:"ðŸ“… All Time",value:"all_time"}],we=[{title:"ðŸ”µ Fiber",value:"Fiber"},{title:"ðŸŸ¢ Cable",value:"Cable"},{title:"ðŸŸ¡ DSL",value:"DSL"},{title:"ðŸŸ£ Mobile",value:"Mobile"},{title:"ðŸ”´ Satellite",value:"Satellite"}],h=[{title:"ðŸ“Š Provider Requests",value:"total_requests"},{title:"ðŸ“Š Domain Total",value:"domain_total"},{title:"ðŸ“ˆ % of Domain",value:"percentage"},{title:"âš¡ Avg Speed",value:"avg_speed"}],w=[{title:"15 per page",value:15},{title:"25 per page",value:25},{title:"50 per page",value:50},{title:"100 per page",value:100}],A=()=>{if(!C.value.provider_id)return"";const q=j.value.find(u=>u.id===C.value.provider_id);return q?q.name:""},H=()=>{C.value.page=1,E(C.value),P()},fe=q=>{B(q)},ge=()=>{Y(),C.value={...U.value},C.value.aggregate_by_provider=!1,B("total_requests"),P()},_e=()=>{c.value&&c.value.current_page>1&&G(c.value.current_page-1)},re=()=>{c.value&&c.value.current_page<c.value.last_page&&G(c.value.current_page+1)},Pe=q=>{C.value.per_page=q,I(q)},qe=q=>q?q.includes(","):!1,Fe=q=>q?q.split(",").map(u=>u.trim()).filter(u=>u.length>0):[],Q=q=>({Fiber:"blue",Cable:"green",DSL:"orange",Mobile:"purple",Satellite:"red",Unknown:"grey"})[q]||"grey";return Ie(()=>{P()}),(q,u)=>{const W=g("v-icon"),$=g("v-select"),L=g("v-col"),be=g("v-switch"),Re=g("v-tooltip"),Z=g("v-card"),ye=g("v-btn"),ee=g("v-row"),xe=g("v-alert-title"),te=g("v-chip"),ie=g("v-alert"),de=g("v-card-text"),Ce=g("v-progress-circular"),ue=g("v-card-title"),Te=g("v-table"),Ve=g("v-card-actions");return d(),_("div",mt,[t(ee,{class:"mb-4"},{default:e(()=>[t(L,{cols:"12",md:"2"},{default:e(()=>[t($,{modelValue:C.value.provider_id,"onUpdate:modelValue":[u[0]||(u[0]=k=>C.value.provider_id=k),H],items:l(Se),label:"Provider",clearable:"",variant:"outlined",density:"compact"},{"prepend-inner":e(()=>[t(W,{size:"small"},{default:e(()=>u[5]||(u[5]=[n("mdi-account-network")])),_:1})]),_:1},8,["modelValue","items"])]),_:1}),t(L,{cols:"12",md:"2"},{default:e(()=>[t($,{modelValue:C.value.technology,"onUpdate:modelValue":[u[1]||(u[1]=k=>C.value.technology=k),H],items:we,label:"Technology",clearable:"",variant:"outlined",density:"compact"},{"prepend-inner":e(()=>[t(W,{size:"small"},{default:e(()=>u[6]||(u[6]=[n("mdi-network")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(L,{cols:"12",md:"2"},{default:e(()=>[t($,{modelValue:C.value.period,"onUpdate:modelValue":[u[2]||(u[2]=k=>C.value.period=k),H],items:ve,label:"Period",clearable:"",variant:"outlined",density:"compact"},{"prepend-inner":e(()=>[t(W,{size:"small"},{default:e(()=>u[7]||(u[7]=[n("mdi-calendar-range")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(L,{cols:"12",md:"2"},{default:e(()=>[t($,{modelValue:l(x),"onUpdate:modelValue":[u[3]||(u[3]=k=>ot(x)?x.value=k:null),fe],items:h,label:"Sort By",variant:"outlined",density:"compact"},{"prepend-inner":e(()=>[t(W,{size:"small"},{default:e(()=>u[8]||(u[8]=[n("mdi-sort")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(L,{cols:"12",md:"2"},{default:e(()=>[t(Z,{variant:"outlined",class:"pa-2"},{default:e(()=>[o("div",pt,[t(W,{size:"small",color:"primary"},{default:e(()=>u[9]||(u[9]=[n("mdi-group")])),_:1}),t(be,{modelValue:C.value.aggregate_by_provider,"onUpdate:modelValue":[u[4]||(u[4]=k=>C.value.aggregate_by_provider=k),H],label:"Aggregate by Provider",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),t(Re,{location:"top"},{activator:e(({props:k})=>[t(W,Ne(k,{size:"x-small",color:"grey",class:"ml-1"}),{default:e(()=>u[10]||(u[10]=[n(" mdi-information-outline ")])),_:2},1040)]),default:e(()=>[u[11]||(u[11]=o("span",null,"When enabled, aggregates all technologies of the same provider for each domain",-1))]),_:1})]),_:1})]),_:1}),t(L,{cols:"12",md:"2"},{default:e(()=>[t(ye,{block:"",variant:"outlined",color:"grey",onClick:ge},{default:e(()=>[t(W,{start:""},{default:e(()=>u[12]||(u[12]=[n("mdi-filter-off")])),_:1}),u[13]||(u[13]=n(" Clear Filters "))]),_:1})]),_:1})]),_:1}),l(b)?(d(),y(ee,{key:0,class:"mb-4"},{default:e(()=>[t(L,{cols:"12"},{default:e(()=>[t(ie,{color:"primary",variant:"tonal",border:"start",prominent:""},{default:e(()=>[t(xe,{class:"text-h6 mb-2"},{default:e(()=>[t(W,{start:"",size:"small"},{default:e(()=>u[14]||(u[14]=[n("mdi-chart-line")])),_:1}),n(" "+r(A())+" Global Statistics ",1)]),_:1}),o("div",vt,[o("div",null,[u[15]||(u[15]=o("strong",null,"Provider Requests:",-1)),n(" "+r(l(b).provider_total_requests.toLocaleString()),1)]),o("div",null,[u[16]||(u[16]=o("strong",null,"Global Requests:",-1)),n(" "+r(l(b).global_total_requests.toLocaleString()),1)]),o("div",null,[u[17]||(u[17]=o("strong",null,"Percentage of Global:",-1)),t(te,{color:"primary",variant:"tonal",size:"small",class:"ml-1"},{default:e(()=>[n(r(l(b).percentage_of_global.toFixed(2))+"% ",1)]),_:1})])])]),_:1})]),_:1})]),_:1})):F("",!0),l(R)?(d(),y(ee,{key:1,class:"mb-4"},{default:e(()=>[t(L,{cols:"12",md:"3"},{default:e(()=>[t(Z,{variant:"tonal",color:"primary"},{default:e(()=>[t(de,{class:"text-center"},{default:e(()=>[o("div",ft,r(l(R).total_requests.toLocaleString()),1),u[18]||(u[18]=o("div",{class:"text-caption text-medium-emphasis"},"Total Requests",-1))]),_:1})]),_:1})]),_:1}),t(L,{cols:"12",md:"3"},{default:e(()=>[t(Z,{variant:"tonal",color:"primary"},{default:e(()=>[t(de,{class:"text-center"},{default:e(()=>[o("div",gt,r(l(R).avg_speed.toFixed(0))+" ms ",1),u[19]||(u[19]=o("div",{class:"text-caption text-medium-emphasis"},"Avg Speed",-1))]),_:1})]),_:1})]),_:1}),t(L,{cols:"12",md:"3"},{default:e(()=>[t(Z,{variant:"tonal",color:"primary"},{default:e(()=>[t(de,{class:"text-center"},{default:e(()=>[o("div",_t,r(l(R).unique_domains),1),u[20]||(u[20]=o("div",{class:"text-caption text-medium-emphasis"},"Unique Domains",-1))]),_:1})]),_:1})]),_:1}),t(L,{cols:"12",md:"3"},{default:e(()=>[t(Z,{variant:"tonal",color:"primary"},{default:e(()=>[t(de,{class:"text-center"},{default:e(()=>[o("div",bt,r(l(R).unique_providers),1),u[21]||(u[21]=o("div",{class:"text-caption text-medium-emphasis"},"Unique Providers",-1))]),_:1})]),_:1})]),_:1})]),_:1})):F("",!0),l(z)?(d(),y(ie,{key:2,type:"info",variant:"tonal"},{default:e(()=>[t(Ce,{indeterminate:"",size:"20",class:"mr-2"}),u[22]||(u[22]=n(" Loading rankings... "))]),_:1})):l(V)?(d(),y(ie,{key:3,type:"error",variant:"tonal"},{default:e(()=>[n(r(l(V)),1)]),_:1})):(d(),y(Z,{key:4},{default:e(()=>[t(ue,{class:"d-flex align-center justify-space-between"},{default:e(()=>[u[23]||(u[23]=o("span",null,"ðŸ† Provider Rankings",-1)),t(te,{color:"primary",variant:"tonal"},{default:e(()=>[n(r(l(m))+" entries ",1)]),_:1})]),_:1}),t(Te,{"fixed-header":"",height:"600px"},{default:e(()=>[u[26]||(u[26]=o("thead",null,[o("tr",null,[o("th",{class:"text-left"},"Rank"),o("th",{class:"text-left"},"Domain"),o("th",{class:"text-left"},"Provider"),o("th",{class:"text-left"},"Technology"),o("th",{class:"text-right"},"Provider Requests"),o("th",{class:"text-right"},"Domain Total"),o("th",{class:"text-center"},"% of Domain"),o("th",{class:"text-right"},"Avg Speed")])],-1)),o("tbody",null,[(d(!0),_(pe,null,ke(l(i),k=>(d(),_("tr",{key:`${k.domain_id}-${k.provider_id}`},[o("td",yt,[k.hasMedal?(d(),_("span",xt,r(k.medalEmoji),1)):F("",!0),n(" #"+r(k.rank),1)]),o("td",null,[o("div",ht,r(k.domain_name),1),o("div",kt,r(k.domain_slug),1)]),o("td",null,r(k.provider_name),1),o("td",null,[k.technology?(d(),_("div",St,[qe(k.technology)?(d(),_(pe,{key:0},[(d(!0),_(pe,null,ke(Fe(k.technology),(ce,Ae)=>(d(),y(te,{key:Ae,color:Q(ce),variant:"tonal",size:"x-small",class:"mr-1 mb-1"},{default:e(()=>[n(r(ce.trim()),1)]),_:2},1032,["color"]))),128)),t(Re,{location:"top"},{activator:e(({props:ce})=>[t(W,Ne({ref_for:!0},ce,{size:"x-small",color:"primary",class:"ml-1"}),{default:e(()=>u[24]||(u[24]=[n(" mdi-information ")])),_:2},1040)]),default:e(()=>[u[25]||(u[25]=o("span",null,"Multiple technologies aggregated",-1))]),_:1})],64)):(d(),y(te,{key:1,color:k.techColor,variant:"tonal",size:"small"},{default:e(()=>[n(r(k.technology),1)]),_:2},1032,["color"]))])):(d(),_("span",wt,"Unknown"))]),o("td",Rt,r(k.requestsFormatted),1),o("td",Dt,r(k.domainTotalFormatted),1),o("td",zt,[t(te,{color:k.percentageColor,variant:"tonal",size:"small"},{default:e(()=>[n(r(k.percentageFormatted)+"% ",1)]),_:2},1032,["color"])]),o("td",Pt,r(k.avgSpeedFormatted)+" ms",1)]))),128))])]),_:1}),l(c)?(d(),y(Ve,{key:0,class:"justify-space-between pa-4"},{default:e(()=>[o("div",qt,[o("span",Ft," Showing "+r(l(c).from)+" to "+r(l(c).to)+" of "+r(l(c).total)+" entries ",1)]),o("div",Ct,[t($,{"model-value":C.value.per_page,items:w,"onUpdate:modelValue":Pe,density:"compact",variant:"outlined","hide-details":"",style:{width:"100px"}},null,8,["model-value"]),t(ye,{icon:"mdi-chevron-left",size:"small",variant:"text",disabled:l(c).current_page===1,onClick:_e},null,8,["disabled"]),t(te,{variant:"tonal",color:"primary"},{default:e(()=>[n(r(l(c).current_page)+" / "+r(l(c).last_page),1)]),_:1}),t(ye,{icon:"mdi-chevron-right",size:"small",variant:"text",disabled:l(c).current_page===l(c).last_page,onClick:re},null,8,["disabled"])])]),_:1})):F("",!0)]),_:1}))])}}}),Vt=Ke(Tt,[["__scopeId","data-v-64fd48fe"]]),At=()=>{const S=T(null),i=T(!1),m=T(null),c=T("score"),j=new Xe,R=async(x="score")=>{i.value=!0,m.value=null,c.value=x;try{const P=await j.getGlobalDomainRanking(x);P.success&&P.data?S.value=P.data:(m.value=P.error||"Failed to load ranking",S.value=null)}catch{m.value="Unexpected error loading ranking",S.value=null}finally{i.value=!1}},b=J(()=>{var x;return!((x=S.value)!=null&&x.ranking)||!Array.isArray(S.value.ranking)?[]:S.value.ranking.map(P=>({...P,formattedPeriod:`${new Date(P.coverage.period_start).toLocaleDateString()} - ${new Date(P.coverage.period_end).toLocaleDateString()}`,formattedRequests:U(P.metrics.total_requests),formattedSuccessRate:P.metrics.success_rate.toFixed(1)+"%",formattedSpeed:P.metrics.avg_speed>0?P.metrics.avg_speed.toFixed(1)+" Mbps":"N/A",formattedScore:P.metrics.score.toFixed(1)}))}),U=x=>x>=1e6?(x/1e6).toFixed(1)+"M":x>=1e3?(x/1e3).toFixed(1)+"K":x.toString(),z=J(()=>b.value.slice(0,3)),V=J(()=>{var I;if(!((I=S.value)!=null&&I.ranking)||S.value.ranking.length===0)return{totalDomains:0,totalRequests:0,avgSuccessRate:0,avgSpeed:0};const x=S.value.ranking,P=x.reduce((B,C)=>B+C.metrics.total_requests,0),E=x.reduce((B,C)=>B+C.metrics.success_rate,0)/x.length,Y=x.filter(B=>B.metrics.avg_speed>0),G=Y.length>0?Y.reduce((B,C)=>B+C.metrics.avg_speed,0)/Y.length:0;return{totalDomains:x.length,totalRequests:P,avgSuccessRate:E,avgSpeed:G}});return{rankingData:ne(S),loading:ne(i),error:ne(m),currentSortBy:ne(c),formattedRanking:b,topThree:z,globalStats:V,loadRanking:R}},$t=()=>{const S=T(null),i=T(!1),m=T(null),c=new Xe,j=async(z,V,x,P)=>{if(z.length<2){m.value="Please select at least 2 domains to compare";return}i.value=!0,m.value=null;try{const E=await c.compareDomains(z,V,x,P);E.success&&E.data?S.value=E.data:(m.value=E.error||"Failed to load comparison",S.value=null)}catch{m.value="Unexpected error loading comparison",S.value=null}finally{i.value=!1}},R=z=>z>=1e6?(z/1e6).toFixed(1)+"M":z>=1e3?(z/1e3).toFixed(1)+"K":z.toString(),b=(z,V=!1)=>V?z>0?"error":z<0?"success":"default":z>0?"success":z<0?"error":"default",U=z=>z>0?"mdi-arrow-up":z<0?"mdi-arrow-down":"mdi-minus";return{comparisonData:ne(S),loading:ne(i),error:ne(m),loadComparison:j,formatNumber:R,getDiffColor:b,getDiffIcon:U}},Lt={class:"d-flex justify-center align-center py-8"},Mt={key:2},jt={key:0},Ut={class:"d-flex align-center justify-space-between mb-2"},Nt={class:"text-h3 font-weight-bold text-primary"},Ot={class:"d-flex align-center justify-space-between mb-2"},Wt={class:"text-h3 font-weight-bold text-success"},Et={class:"d-flex align-center justify-space-between mb-2"},Bt={class:"text-h3 font-weight-bold text-info"},Gt={class:"d-flex align-center justify-space-between mb-2"},It={class:"text-h3 font-weight-bold text-warning"},Kt={key:1,class:"text-center py-8"},Xt={key:1,class:"text-center py-8"},Yt={key:1,class:"text-center py-8"},Ht={key:1,class:"text-center py-8"},Jt={class:"text-h6 mt-2"},Qt={class:"d-flex justify-space-between mb-2"},Zt={class:"font-weight-bold"},ea={class:"d-flex justify-space-between mb-2"},ta={class:"font-weight-bold"},aa={class:"d-flex justify-space-between"},oa={class:"font-weight-bold"},sa={class:"text-h5 mt-2"},la={class:"d-flex justify-space-between mb-2"},na={class:"font-weight-bold text-h6"},ra={class:"d-flex justify-space-between mb-2"},ia={class:"font-weight-bold"},da={class:"d-flex justify-space-between"},ua={class:"font-weight-bold"},ca={class:"text-h6 mt-2"},ma={class:"d-flex justify-space-between mb-2"},pa={class:"font-weight-bold"},va={class:"d-flex justify-space-between mb-2"},fa={class:"font-weight-bold"},ga={class:"d-flex justify-space-between"},_a={class:"font-weight-bold"},ba={class:"text-center"},ya={class:"font-weight-medium"},xa={class:"text-caption text-medium-emphasis"},ha={class:"text-right"},ka={class:"text-right font-weight-medium"},Sa={class:"text-right"},wa={class:"text-right"},Ra={class:"text-center"},Da={class:"text-center"},za={class:"text-center"},Pa={class:"text-center"},qa={class:"text-caption"},Fa={class:"text-caption text-medium-emphasis"},Ca={class:"text-center"},Ta={key:0,class:"text-center py-8"},Va={key:3},Aa={key:4},$a={key:0,class:"text-caption"},La={key:1,class:"text-caption"},Ma={class:"text-center py-12"},ja={class:"d-flex justify-center align-center py-8"},Ua={key:3},Na={class:"d-flex align-center justify-space-between mb-2"},Oa={class:"text-h3 font-weight-bold text-primary"},Wa={class:"d-flex align-center justify-space-between mb-2"},Ea={class:"text-h3 font-weight-bold text-success"},Ba={class:"d-flex align-center justify-space-between mb-2"},Ga={class:"text-h3 font-weight-bold text-info"},Ia={class:"d-flex align-center justify-space-between mb-2"},Ka={class:"text-h3 font-weight-bold text-warning"},Xa={key:0},Ya={key:1,class:"text-center py-8"},Ha={key:0},Ja={key:1,class:"text-center py-8"},Qa={key:0},Za={key:1,class:"text-center py-8"},eo={key:0},to={key:1,class:"text-center py-8"},ao={key:5},oo={class:"d-flex gap-2"},so={class:"d-flex justify-center align-center py-8"},lo={key:2},no={class:"d-flex align-center gap-2"},ro={class:"font-weight-bold"},io={class:"d-flex align-center gap-2"},uo={class:"font-weight-bold"},co={class:"d-flex align-center gap-2"},mo={class:"font-weight-bold"},po={class:"font-weight-bold"},vo={class:"font-weight-bold"},fo={class:"text-h4 font-weight-bold"},go={class:"text-h4 font-weight-bold"},_o={key:0},bo={class:"text-h6 mb-3"},yo={class:"font-weight-bold"},xo={class:"font-weight-medium"},ho={class:"text-right font-weight-medium"},ko={class:"text-right"},So={class:"text-center"},wo={class:"text-center py-12"},Ro=Ge({__name:"index",setup(S){const{rankingData:i,loading:m,error:c,currentSortBy:j,formattedRanking:R,topThree:b,globalStats:U,loadRanking:z}=At(),{comparisonData:V,loading:x,error:P,loadComparison:E,getDiffColor:Y,getDiffIcon:G}=$t(),{domains:I,loadDomains:B}=it(),{loadProviderRankings:C}=Ye(),{reportData:Se,aggregatedData:ve,loading:we,error:h,loadDashboardStats:w,loadAggregatedStats:A,providerChartData:H,topStatesChartData:fe,speedByStateChartData:ge,technologyChartData:_e,topCards:re}=dt(),{formattedReports:Pe,loading:qe,loadReports:Fe}=rt(),Q=T("ranking"),q=T([]),u=T(""),W=T(""),$=T(null),L=T("all"),be=T(!1),Re=[{value:"score",label:"Overall Score"},{value:"volume",label:"Total Requests"},{value:"success",label:"Success Rate"},{value:"speed",label:"Average Speed"}],Z=J(()=>!I.value||!Array.isArray(I.value)?[]:I.value.map(v=>({value:v.id,title:v.name})));Ie(()=>{z("score"),B(),C()});const ye=v=>{z(v)},ee=v=>{lt(`/domains/${v}/dashboard`)};J(()=>!$.value||!I.value||!Array.isArray(I.value)?null:I.value.find(v=>v.id===$.value));const xe=J(()=>$.value?Pe.value.filter(v=>v.domain_id===$.value):[]),te=J(()=>[...[{id:"all",reportDate:"All Reports Combined",statusColor:"primary",data_version:"Aggregated"}],...xe.value]);Oe($,async v=>{v&&(await Fe({domain_id:v,per_page:100}),await A(v),L.value="all",be.value=!1)}),Oe(L,async v=>{$.value&&(v==="all"?(be.value=!1,await A($.value)):v&&(be.value=!1,await w(v)))});const ie=J(()=>{if(L.value==="all"&&ve.value)return`Showing aggregated data from ${xe.value.length} report(s)`;const v=xe.value.find(a=>a.id===L.value);return v&&L.value!=="all"?`Report Date: ${v.reportDate} | Status: ${v.statusLabel}`:""}),de=()=>{q.value.length<2||(E(q.value,void 0,u.value||void 0,W.value||void 0),Q.value="comparison")},Ce=()=>{q.value=[],u.value="",W.value=""},ue=v=>v>=1e6?(v/1e6).toFixed(1)+"M":v>=1e3?(v/1e3).toFixed(1)+"K":v.toString(),Te=v=>v.toFixed(1)+"%",Ve=v=>v.toFixed(2),k=v=>v===1?"warning":v===2?"grey":v===3?"orange":"default",ce=v=>v<=3?"mdi-medal":"mdi-numeric-"+v+"-circle",Ae=v=>v&&{Fiber:"blue",Cable:"green",DSL:"orange",Mobile:"purple",Satellite:"red"}[v]||"grey";return(v,a)=>{const p=g("v-col"),D=g("v-row"),f=g("v-icon"),De=g("v-tab"),He=g("v-tabs"),$e=g("v-progress-circular"),he=g("v-alert"),ze=g("v-select"),N=g("v-card-text"),O=g("v-card"),ae=g("apexchart"),oe=g("v-divider"),se=g("v-btn"),K=g("v-chip"),Me=g("v-table"),me=g("v-list-item-title"),le=g("v-list-item"),je=g("v-text-field"),Je=g("v-form"),Ue=g("v-card-title"),Qe=g("v-list"),Ze=g("v-card-actions");return d(),_("div",null,[t(D,{class:"mb-4"},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>a[9]||(a[9]=[o("h1",{class:"text-h4 font-weight-bold"},"Global Dashboard",-1),o("p",{class:"text-body-1 text-medium-emphasis"}," Comprehensive platform analytics and domain comparison ",-1)])),_:1})]),_:1}),t(D,{class:"mb-4"},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(He,{modelValue:Q.value,"onUpdate:modelValue":a[0]||(a[0]=s=>Q.value=s),color:"primary"},{default:e(()=>[t(De,{value:"ranking"},{default:e(()=>[t(f,{class:"mr-2"},{default:e(()=>a[10]||(a[10]=[n("mdi-trophy")])),_:1}),a[11]||(a[11]=n(" Domain Ranking "))]),_:1}),t(De,{value:"provider-ranking"},{default:e(()=>[t(f,{class:"mr-2"},{default:e(()=>a[12]||(a[12]=[n("mdi-account-network")])),_:1}),a[13]||(a[13]=n(" Provider Rankings "))]),_:1}),t(De,{value:"domain-dashboard"},{default:e(()=>[t(f,{class:"mr-2"},{default:e(()=>a[14]||(a[14]=[n("mdi-chart-box")])),_:1}),a[15]||(a[15]=n(" Domain Dashboard "))]),_:1}),t(De,{value:"comparison"},{default:e(()=>[t(f,{class:"mr-2"},{default:e(()=>a[16]||(a[16]=[n("mdi-compare")])),_:1}),a[17]||(a[17]=n(" Compare Domains "))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(m)?(d(),y(D,{key:0},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(M,null,{default:e(()=>[o("div",Lt,[t($e,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):l(c)?(d(),y(D,{key:1},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(M,null,{default:e(()=>[t(he,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[n(r(l(c)),1)]),_:1})]),_:1})]),_:1})]),_:1})):F("",!0),Q.value==="ranking"?(d(),_("div",Mt,[t(D,{class:"mb-4"},{default:e(()=>[t(p,{cols:"12",class:"d-flex justify-end"},{default:e(()=>[t(ze,{"model-value":l(j),"onUpdate:modelValue":ye,items:Re,"item-title":"label","item-value":"value",label:"Sort By",variant:"outlined",density:"compact","hide-details":"",style:{width:"200px"},"prepend-inner-icon":"mdi-sort"},null,8,["model-value"])]),_:1})]),_:1}),l(i)?(d(),_("div",jt,[t(D,{class:"mb-4"},{default:e(()=>[t(p,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(O,{elevation:"2",class:"h-100"},{default:e(()=>[t(N,null,{default:e(()=>[o("div",Ut,[a[19]||(a[19]=o("div",{class:"text-h6 text-medium-emphasis"},"Total Domains",-1)),t(f,{color:"primary",size:"32"},{default:e(()=>a[18]||(a[18]=[n("mdi-domain")])),_:1})]),o("div",Nt,r(l(U).totalDomains),1),a[20]||(a[20]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Active domains ",-1))]),_:1})]),_:1})]),_:1}),t(p,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(O,{elevation:"2",class:"h-100"},{default:e(()=>[t(N,null,{default:e(()=>[o("div",Ot,[a[22]||(a[22]=o("div",{class:"text-h6 text-medium-emphasis"},"Total Requests",-1)),t(f,{color:"success",size:"32"},{default:e(()=>a[21]||(a[21]=[n("mdi-chart-line")])),_:1})]),o("div",Wt,r(ue(l(U).totalRequests)),1),a[23]||(a[23]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Across all domains ",-1))]),_:1})]),_:1})]),_:1}),t(p,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(O,{elevation:"2",class:"h-100"},{default:e(()=>[t(N,null,{default:e(()=>[o("div",Et,[a[25]||(a[25]=o("div",{class:"text-h6 text-medium-emphasis"},"Avg Success Rate",-1)),t(f,{color:"info",size:"32"},{default:e(()=>a[24]||(a[24]=[n("mdi-check-circle")])),_:1})]),o("div",Bt,r(l(U).avgSuccessRate.toFixed(1))+"% ",1),a[26]||(a[26]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Average across domains ",-1))]),_:1})]),_:1})]),_:1}),t(p,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(O,{elevation:"2",class:"h-100"},{default:e(()=>[t(N,null,{default:e(()=>[o("div",Gt,[a[28]||(a[28]=o("div",{class:"text-h6 text-medium-emphasis"},"Avg Speed",-1)),t(f,{color:"warning",size:"32"},{default:e(()=>a[27]||(a[27]=[n("mdi-speedometer")])),_:1})]),o("div",It,r(l(U).avgSpeed>0?l(U).avgSpeed.toFixed(1):"N/A"),1),a[29]||(a[29]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Mbps average ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(D,{class:"mb-4"},{default:e(()=>[t(p,{cols:"12",md:"6"},{default:e(()=>[t(M,null,{default:e(()=>[l(R).length>0?(d(),y(ae,{key:0,type:"bar",height:"300",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Top Domains by Volume",align:"left",style:{fontSize:"16px",fontWeight:600}},plotOptions:{bar:{horizontal:!0,borderRadius:4,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(s){return ue(s)},offsetX:30},xaxis:{categories:l(R).slice(0,5).map(s=>s.domain.name)},colors:["#1976d2"]},series:[{name:"Requests",data:l(R).slice(0,5).map(s=>s.metrics.total_requests)}]},null,8,["options","series"])):(d(),_("div",Kt,[t(f,{size:"64",color:"grey"},{default:e(()=>a[30]||(a[30]=[n("mdi-chart-bar")])),_:1}),a[31]||(a[31]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No data available",-1))]))]),_:1})]),_:1}),t(p,{cols:"12",md:"6"},{default:e(()=>[t(M,null,{default:e(()=>[l(R).length>0?(d(),y(ae,{key:0,type:"donut",height:"300",options:{chart:{type:"donut",fontFamily:"inherit"},title:{text:"Success Rate Distribution",align:"left",style:{fontSize:"16px",fontWeight:600}},labels:["Excellent (â‰¥95%)","Good (90-95%)","Fair (80-90%)","Poor (<80%)"],colors:["#4caf50","#8bc34a","#ffc107","#f44336"],legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(s){return s.toFixed(0)+"%"}}},series:[l(R).filter(s=>s.metrics.success_rate>=95).length,l(R).filter(s=>s.metrics.success_rate>=90&&s.metrics.success_rate<95).length,l(R).filter(s=>s.metrics.success_rate>=80&&s.metrics.success_rate<90).length,l(R).filter(s=>s.metrics.success_rate<80).length]},null,8,["options","series"])):(d(),_("div",Xt,[t(f,{size:"64",color:"grey"},{default:e(()=>a[32]||(a[32]=[n("mdi-chart-donut")])),_:1}),a[33]||(a[33]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No data available",-1))]))]),_:1})]),_:1})]),_:1}),t(D,{class:"mb-4"},{default:e(()=>[t(p,{cols:"12",md:"6"},{default:e(()=>[t(M,null,{default:e(()=>[l(R).length>0?(d(),y(ae,{key:0,type:"bar",height:"300",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Reports per Domain",align:"left",style:{fontSize:"16px",fontWeight:600}},plotOptions:{bar:{borderRadius:4,columnWidth:"60%"}},dataLabels:{enabled:!1},xaxis:{categories:l(R).map(s=>s.domain.name),labels:{rotate:-45,style:{fontSize:"11px"}}},yaxis:{title:{text:"Number of Reports"}},colors:["#ff9800"]},series:[{name:"Reports",data:l(R).map(s=>s.coverage.total_reports)}]},null,8,["options","series"])):(d(),_("div",Yt,[t(f,{size:"64",color:"grey"},{default:e(()=>a[34]||(a[34]=[n("mdi-chart-bar")])),_:1}),a[35]||(a[35]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No data available",-1))]))]),_:1})]),_:1}),t(p,{cols:"12",md:"6"},{default:e(()=>[t(M,null,{default:e(()=>[l(R).filter(s=>s.metrics.avg_speed>0).length>0?(d(),y(ae,{key:0,type:"bar",height:"300",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Average Speed by Domain",align:"left",style:{fontSize:"16px",fontWeight:600}},plotOptions:{bar:{borderRadius:4,columnWidth:"60%"}},dataLabels:{enabled:!0,formatter:function(s){return s.toFixed(0)+" Mbps"}},xaxis:{categories:l(R).filter(s=>s.metrics.avg_speed>0).map(s=>s.domain.name),labels:{rotate:-45,style:{fontSize:"11px"}}},yaxis:{title:{text:"Speed (Mbps)"}},colors:["#9c27b0"]},series:[{name:"Avg Speed",data:l(R).filter(s=>s.metrics.avg_speed>0).map(s=>s.metrics.avg_speed)}]},null,8,["options","series"])):(d(),_("div",Ht,[t(f,{size:"64",color:"grey"},{default:e(()=>a[36]||(a[36]=[n("mdi-speedometer")])),_:1}),a[37]||(a[37]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No speed data available",-1))]))]),_:1})]),_:1})]),_:1}),l(b).length>=3?(d(),y(D,{key:0,class:"mb-4"},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(M,{title:"ðŸ† Top 3 Domains"},{default:e(()=>[t(D,null,{default:e(()=>[t(p,{cols:"12",md:"4",class:"order-md-1"},{default:e(()=>[t(O,{elevation:"4",class:"h-100",color:"grey-lighten-4"},{default:e(()=>[t(N,{class:"text-center"},{default:e(()=>[t(f,{size:"48",color:"grey"},{default:e(()=>a[38]||(a[38]=[n("mdi-medal")])),_:1}),a[43]||(a[43]=o("div",{class:"text-h5 font-weight-bold mt-2"},"#2",-1)),o("div",Jt,r(l(b)[1].domain.name),1),t(oe,{class:"my-3"}),o("div",Qt,[a[39]||(a[39]=o("span",{class:"text-caption"},"Score:",-1)),o("span",Zt,r(l(b)[1].formattedScore),1)]),o("div",ea,[a[40]||(a[40]=o("span",{class:"text-caption"},"Requests:",-1)),o("span",ta,r(l(b)[1].formattedRequests),1)]),o("div",aa,[a[41]||(a[41]=o("span",{class:"text-caption"},"Success:",-1)),o("span",oa,r(l(b)[1].formattedSuccessRate),1)]),t(se,{color:"primary",variant:"tonal",size:"small",class:"mt-3",onClick:a[1]||(a[1]=s=>ee(l(b)[1].domain.id))},{default:e(()=>a[42]||(a[42]=[n(" View Dashboard ")])),_:1})]),_:1})]),_:1})]),_:1}),t(p,{cols:"12",md:"4",class:"order-md-0"},{default:e(()=>[t(O,{elevation:"8",class:"h-100",color:"warning-lighten-4"},{default:e(()=>[t(N,{class:"text-center"},{default:e(()=>[t(f,{size:"64",color:"warning"},{default:e(()=>a[44]||(a[44]=[n("mdi-trophy")])),_:1}),a[49]||(a[49]=o("div",{class:"text-h4 font-weight-bold mt-2"},"ðŸ‘‘ #1",-1)),o("div",sa,r(l(b)[0].domain.name),1),t(oe,{class:"my-3"}),o("div",la,[a[45]||(a[45]=o("span",{class:"text-caption"},"Score:",-1)),o("span",na,r(l(b)[0].formattedScore),1)]),o("div",ra,[a[46]||(a[46]=o("span",{class:"text-caption"},"Requests:",-1)),o("span",ia,r(l(b)[0].formattedRequests),1)]),o("div",da,[a[47]||(a[47]=o("span",{class:"text-caption"},"Success:",-1)),o("span",ua,r(l(b)[0].formattedSuccessRate),1)]),t(se,{color:"warning",variant:"flat",size:"small",class:"mt-3",onClick:a[2]||(a[2]=s=>ee(l(b)[0].domain.id))},{default:e(()=>a[48]||(a[48]=[n(" View Dashboard ")])),_:1})]),_:1})]),_:1})]),_:1}),t(p,{cols:"12",md:"4",class:"order-md-2"},{default:e(()=>[t(O,{elevation:"4",class:"h-100",color:"orange-lighten-4"},{default:e(()=>[t(N,{class:"text-center"},{default:e(()=>[t(f,{size:"48",color:"orange"},{default:e(()=>a[50]||(a[50]=[n("mdi-medal")])),_:1}),a[55]||(a[55]=o("div",{class:"text-h5 font-weight-bold mt-2"},"#3",-1)),o("div",ca,r(l(b)[2].domain.name),1),t(oe,{class:"my-3"}),o("div",ma,[a[51]||(a[51]=o("span",{class:"text-caption"},"Score:",-1)),o("span",pa,r(l(b)[2].formattedScore),1)]),o("div",va,[a[52]||(a[52]=o("span",{class:"text-caption"},"Requests:",-1)),o("span",fa,r(l(b)[2].formattedRequests),1)]),o("div",ga,[a[53]||(a[53]=o("span",{class:"text-caption"},"Success:",-1)),o("span",_a,r(l(b)[2].formattedSuccessRate),1)]),t(se,{color:"primary",variant:"tonal",size:"small",class:"mt-3",onClick:a[3]||(a[3]=s=>ee(l(b)[2].domain.id))},{default:e(()=>a[54]||(a[54]=[n(" View Dashboard ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):F("",!0),t(D,null,{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(Be,{title:"Complete Ranking"},{default:e(()=>[t(Me,{"fixed-header":"",height:"600px"},{default:e(()=>[a[57]||(a[57]=o("thead",null,[o("tr",null,[o("th",{class:"text-center",style:{width:"80px"}},"Rank"),o("th",{class:"text-left"},"Domain"),o("th",{class:"text-right"},"Score"),o("th",{class:"text-right"},"Total Requests"),o("th",{class:"text-right"},"Success Rate"),o("th",{class:"text-right"},"Avg Speed"),o("th",{class:"text-center"},"Providers"),o("th",{class:"text-center"},"States"),o("th",{class:"text-center"},"Reports"),o("th",{class:"text-center"},"Period"),o("th",{class:"text-center"},"Actions")])],-1)),o("tbody",null,[(d(!0),_(pe,null,ke(l(R),s=>(d(),_("tr",{key:s.domain.id},[o("td",ba,[t(K,{color:k(s.rank),variant:"flat",size:"small"},{default:e(()=>[s.rank<=3?(d(),y(f,{key:0,size:"small",class:"mr-1"},{default:e(()=>[n(r(ce(s.rank)),1)]),_:2},1024)):F("",!0),n(" "+r(s.rank),1)]),_:2},1032,["color"])]),o("td",null,[o("div",ya,r(s.domain.name),1),o("div",xa,r(s.domain.slug),1)]),o("td",ha,[t(K,{color:"primary",variant:"tonal",size:"small"},{default:e(()=>[n(r(s.formattedScore),1)]),_:2},1024)]),o("td",ka,r(s.formattedRequests),1),o("td",Sa,[t(K,{color:s.metrics.success_rate>=90?"success":s.metrics.success_rate>=70?"warning":"error",variant:"tonal",size:"small"},{default:e(()=>[n(r(s.formattedSuccessRate),1)]),_:2},1032,["color"])]),o("td",wa,r(s.formattedSpeed),1),o("td",Ra,[t(K,{size:"small",variant:"outlined"},{default:e(()=>[n(r(s.metrics.unique_providers),1)]),_:2},1024)]),o("td",Da,[t(K,{size:"small",variant:"outlined"},{default:e(()=>[n(r(s.metrics.unique_states),1)]),_:2},1024)]),o("td",za,r(s.coverage.total_reports),1),o("td",Pa,[o("div",qa,r(s.formattedPeriod),1),o("div",Fa,r(s.coverage.days_covered)+" days",1)]),o("td",Ca,[t(se,{icon:"",size:"small",variant:"text",color:"primary",onClick:X=>ee(s.domain.id),title:"View Dashboard"},{default:e(()=>[t(f,null,{default:e(()=>a[56]||(a[56]=[n("mdi-chart-box")])),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:1}),l(R).length===0?(d(),_("div",Ta,[t(f,{size:"64",color:"grey"},{default:e(()=>a[58]||(a[58]=[n("mdi-chart-box-outline")])),_:1}),a[59]||(a[59]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No ranking data available",-1))])):F("",!0)]),_:1})]),_:1})]),_:1})])):F("",!0)])):F("",!0),Q.value==="provider-ranking"?(d(),_("div",Va,[t(Vt)])):F("",!0),Q.value==="domain-dashboard"?(d(),_("div",Aa,[t(D,{class:"mb-4"},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(M,null,{default:e(()=>[t(D,null,{default:e(()=>[t(p,{cols:"12",md:"6"},{default:e(()=>[t(ze,{modelValue:$.value,"onUpdate:modelValue":a[4]||(a[4]=s=>$.value=s),items:Z.value,label:"Select Domain",variant:"outlined","prepend-inner-icon":"mdi-domain",hint:"Choose a domain to view its detailed dashboard","persistent-hint":"",clearable:""},{item:e(({props:s,item:X})=>[t(le,We(Ee(s)),{prepend:e(()=>[t(f,{color:"primary"},{default:e(()=>a[60]||(a[60]=[n("mdi-domain")])),_:1})]),default:e(()=>[t(me,null,{default:e(()=>[n(r(X.raw.title),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1}),$.value?(d(),y(p,{key:0,cols:"12",md:"6"},{default:e(()=>[t(ze,{modelValue:L.value,"onUpdate:modelValue":a[5]||(a[5]=s=>L.value=s),items:te.value,"item-title":"reportDate","item-value":"id",label:"Select Report",variant:"outlined",density:"compact",loading:l(qe),"prepend-inner-icon":"mdi-calendar"},{item:e(({props:s,item:X})=>[t(le,We(Ee(s)),{prepend:e(()=>[t(K,{color:X.raw.statusColor,size:"x-small",variant:"tonal"},null,8,["color"])]),subtitle:e(()=>[X.raw.id!=="all"?(d(),_("span",$a,"ID: "+r(X.raw.id)+" | Version: "+r(X.raw.data_version),1)):(d(),_("span",La,"Combined data from all reports"))]),_:2},1040)]),_:1},8,["modelValue","items","loading"])]),_:1})):F("",!0)]),_:1}),$.value&&ie.value?(d(),y(D,{key:0},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(he,{color:"info",variant:"tonal",density:"compact"},{default:e(()=>[t(f,{start:""},{default:e(()=>a[61]||(a[61]=[n("mdi-information")])),_:1}),n(" "+r(ie.value),1)]),_:1})]),_:1})]),_:1})):F("",!0)]),_:1})]),_:1})]),_:1}),$.value?l(we)?(d(),y(D,{key:1},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(M,null,{default:e(()=>[o("div",ja,[t($e,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):l(h)?(d(),y(D,{key:2},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(M,null,{default:e(()=>[t(he,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[n(r(l(h)),1)]),_:1})]),_:1})]),_:1})]),_:1})):$.value&&(l(Se)||l(ve))?(d(),_("div",Ua,[t(D,{class:"mb-4"},{default:e(()=>[t(p,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(O,{elevation:"2",class:"h-100"},{default:e(()=>[t(N,null,{default:e(()=>[o("div",Na,[a[66]||(a[66]=o("div",{class:"text-h6 text-medium-emphasis"},"Total Requests",-1)),t(f,{color:"primary",size:"32"},{default:e(()=>a[65]||(a[65]=[n("mdi-chart-line")])),_:1})]),o("div",Oa,r(ue(l(re).totalRequests)),1),a[67]||(a[67]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," All time requests ",-1))]),_:1})]),_:1})]),_:1}),t(p,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(O,{elevation:"2",class:"h-100"},{default:e(()=>[t(N,null,{default:e(()=>[o("div",Wa,[a[69]||(a[69]=o("div",{class:"text-h6 text-medium-emphasis"},"Success Rate",-1)),t(f,{color:"success",size:"32"},{default:e(()=>a[68]||(a[68]=[n("mdi-check-circle")])),_:1})]),o("div",Ea,r(Te(l(re).successRate)),1),a[70]||(a[70]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Successful requests ",-1))]),_:1})]),_:1})]),_:1}),t(p,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(O,{elevation:"2",class:"h-100"},{default:e(()=>[t(N,null,{default:e(()=>[o("div",Ba,[a[72]||(a[72]=o("div",{class:"text-h6 text-medium-emphasis"},"Daily Average",-1)),t(f,{color:"info",size:"32"},{default:e(()=>a[71]||(a[71]=[n("mdi-calendar-today")])),_:1})]),o("div",Ga,r(Ve(l(re).dailyAverage)),1),a[73]||(a[73]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Average per day ",-1))]),_:1})]),_:1})]),_:1}),t(p,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(O,{elevation:"2",class:"h-100"},{default:e(()=>[t(N,null,{default:e(()=>[o("div",Ia,[a[75]||(a[75]=o("div",{class:"text-h6 text-medium-emphasis"},"Unique Providers",-1)),t(f,{color:"warning",size:"32"},{default:e(()=>a[74]||(a[74]=[n("mdi-domain")])),_:1})]),o("div",Ka,r(l(re).uniqueProviders),1),a[76]||(a[76]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Different providers ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(D,{class:"mb-4"},{default:e(()=>[t(p,{cols:"12",md:"6"},{default:e(()=>[t(M,null,{default:e(()=>[l(H).series.length>0?(d(),_("div",Xa,[t(ae,{type:"donut",height:"350",options:{chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Provider Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:l(H).labels,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(s){return s.toFixed(1)+"%"}}},series:l(H).series},null,8,["options","series"])])):(d(),_("div",Ya,[t(f,{size:"64",color:"grey"},{default:e(()=>a[77]||(a[77]=[n("mdi-chart-donut")])),_:1}),a[78]||(a[78]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No provider data available",-1))]))]),_:1})]),_:1}),t(p,{cols:"12",md:"6"},{default:e(()=>[t(M,null,{default:e(()=>[l(fe).data.length>0?(d(),_("div",Ha,[t(ae,{type:"bar",height:"350",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Top States by Requests",align:"left",style:{fontSize:"18px",fontWeight:600}},plotOptions:{bar:{horizontal:!0,borderRadius:4,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(s){return s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":s.toString()},offsetX:30},xaxis:{categories:l(fe).categories},colors:["#1976d2"]},series:[{name:"Requests",data:l(fe).data}]},null,8,["options","series"])])):(d(),_("div",Ja,[t(f,{size:"64",color:"grey"},{default:e(()=>a[79]||(a[79]=[n("mdi-chart-bar")])),_:1}),a[80]||(a[80]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No state data available",-1))]))]),_:1})]),_:1})]),_:1}),t(D,null,{default:e(()=>[t(p,{cols:"12",md:"6"},{default:e(()=>[t(M,null,{default:e(()=>[l(ge).data.length>0?(d(),_("div",Qa,[t(ae,{type:"bar",height:"350",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Average Speed by State",align:"left",style:{fontSize:"18px",fontWeight:600}},plotOptions:{bar:{horizontal:!1,borderRadius:8,columnWidth:"55%",distributed:!1}},dataLabels:{enabled:!1},xaxis:{categories:l(ge).categories,labels:{style:{fontSize:"12px"}}},yaxis:{title:{text:"Average Speed (Mbps)"}},colors:["#4caf50"],grid:{show:!0,borderColor:"#f0f0f0"}},series:[{name:"Avg Speed (Mbps)",data:l(ge).data}]},null,8,["options","series"])])):(d(),_("div",Za,[t(f,{size:"64",color:"grey"},{default:e(()=>a[81]||(a[81]=[n("mdi-speedometer")])),_:1}),a[82]||(a[82]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No speed data available",-1))]))]),_:1})]),_:1}),t(p,{cols:"12",md:"6"},{default:e(()=>[t(M,null,{default:e(()=>[l(_e).series.length>0?(d(),_("div",eo,[t(ae,{type:"donut",height:"350",options:{chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Technology Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:l(_e).labels,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(s){return s.toFixed(1)+"%"}}},series:l(_e).series},null,8,["options","series"])])):(d(),_("div",to,[t(f,{size:"64",color:"grey"},{default:e(()=>a[83]||(a[83]=[n("mdi-chart-donut")])),_:1}),a[84]||(a[84]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No technology data available",-1))]))]),_:1})]),_:1})]),_:1})])):F("",!0):(d(),y(D,{key:0},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(M,null,{default:e(()=>[o("div",Ma,[t(f,{size:"80",color:"grey"},{default:e(()=>a[62]||(a[62]=[n("mdi-chart-box-outline")])),_:1}),a[63]||(a[63]=o("h3",{class:"text-h5 mt-4 mb-2"},"Select a domain",-1)),a[64]||(a[64]=o("p",{class:"text-medium-emphasis"}," Choose a domain from the dropdown above to view its detailed dashboard ",-1))])]),_:1})]),_:1})]),_:1}))])):F("",!0),Q.value==="comparison"?(d(),_("div",ao,[t(D,{class:"mb-6"},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(Be,{title:"Select Domains to Compare"},{default:e(()=>[t(Je,{onSubmit:st(de,["prevent"])},{default:e(()=>[t(D,null,{default:e(()=>[t(p,{cols:"12",md:"6"},{default:e(()=>[t(ze,{modelValue:q.value,"onUpdate:modelValue":a[6]||(a[6]=s=>q.value=s),items:Z.value,label:"Select Domains (minimum 2)",variant:"outlined",multiple:"",chips:"","closable-chips":"",hint:"The first domain will be used as the baseline","persistent-hint":""},null,8,["modelValue","items"])]),_:1}),t(p,{cols:"12",md:"3"},{default:e(()=>[t(je,{modelValue:u.value,"onUpdate:modelValue":a[7]||(a[7]=s=>u.value=s),label:"From Date (Optional)",type:"date",variant:"outlined",clearable:""},null,8,["modelValue"])]),_:1}),t(p,{cols:"12",md:"3"},{default:e(()=>[t(je,{modelValue:W.value,"onUpdate:modelValue":a[8]||(a[8]=s=>W.value=s),label:"To Date (Optional)",type:"date",variant:"outlined",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(D,null,{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[o("div",oo,[t(se,{type:"submit",color:"primary","prepend-icon":"mdi-compare",disabled:q.value.length<2,loading:l(x)},{default:e(()=>a[85]||(a[85]=[n(" Compare Domains ")])),_:1},8,["disabled","loading"]),t(se,{variant:"outlined",onClick:Ce,"prepend-icon":"mdi-refresh"},{default:e(()=>a[86]||(a[86]=[n(" Clear ")])),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(x)?(d(),y(D,{key:0},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(M,null,{default:e(()=>[o("div",so,[t($e,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):l(P)?(d(),y(D,{key:1},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(M,null,{default:e(()=>[t(he,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[n(r(l(P)),1)]),_:1})]),_:1})]),_:1})]),_:1})):l(V)&&l(V).domains?(d(),_("div",lo,[t(D,null,{default:e(()=>[(d(!0),_(pe,null,ke(l(V).domains,(s,X)=>(d(),y(p,{key:s.domain.id,cols:"12",md:l(V).domains.length===2?6:l(V).domains.length===3?4:3},{default:e(()=>[t(O,{elevation:"4",class:nt([{"border-primary":X===0},"h-100"])},{default:e(()=>[t(Ue,{class:"d-flex align-center justify-space-between"},{default:e(()=>[o("div",null,[n(r(s.domain.name)+" ",1),X===0?(d(),y(K,{key:0,color:"primary",size:"x-small",class:"ml-2"},{default:e(()=>a[87]||(a[87]=[n(" Baseline ")])),_:1})):F("",!0)])]),_:2},1024),t(N,null,{default:e(()=>[t(Qe,{density:"compact"},{default:e(()=>[t(le,null,{prepend:e(()=>[t(f,{color:"primary"},{default:e(()=>a[88]||(a[88]=[n("mdi-chart-line")])),_:1})]),append:e(()=>[o("div",no,[o("span",ro,r(ue(s.metrics.total_requests)),1),s.comparison?(d(),y(K,{key:0,color:l(Y)(s.comparison.requests_diff),size:"x-small",variant:"tonal"},{default:e(()=>[t(f,{size:"x-small"},{default:e(()=>[n(r(l(G)(s.comparison.requests_diff)),1)]),_:2},1024),n(" "+r(s.comparison.requests_diff_label),1)]),_:2},1032,["color"])):F("",!0)])]),default:e(()=>[t(me,null,{default:e(()=>a[89]||(a[89]=[n("Total Requests")])),_:1})]),_:2},1024),t(oe,{class:"my-2"}),t(le,null,{prepend:e(()=>[t(f,{color:"success"},{default:e(()=>a[90]||(a[90]=[n("mdi-check-circle")])),_:1})]),append:e(()=>[o("div",io,[o("span",uo,r(s.metrics.success_rate.toFixed(1))+"%",1),s.comparison?(d(),y(K,{key:0,color:l(Y)(s.comparison.success_diff),size:"x-small",variant:"tonal"},{default:e(()=>[t(f,{size:"x-small"},{default:e(()=>[n(r(l(G)(s.comparison.success_diff)),1)]),_:2},1024),n(" "+r(s.comparison.success_diff_label),1)]),_:2},1032,["color"])):F("",!0)])]),default:e(()=>[t(me,null,{default:e(()=>a[91]||(a[91]=[n("Success Rate")])),_:1})]),_:2},1024),t(oe,{class:"my-2"}),t(le,null,{prepend:e(()=>[t(f,{color:"info"},{default:e(()=>a[92]||(a[92]=[n("mdi-speedometer")])),_:1})]),append:e(()=>[o("div",co,[o("span",mo,r(s.metrics.avg_speed.toFixed(1))+" Mbps",1),s.comparison?(d(),y(K,{key:0,color:l(Y)(s.comparison.speed_diff),size:"x-small",variant:"tonal"},{default:e(()=>[t(f,{size:"x-small"},{default:e(()=>[n(r(l(G)(s.comparison.speed_diff)),1)]),_:2},1024),n(" "+r(s.comparison.speed_diff_label),1)]),_:2},1032,["color"])):F("",!0)])]),default:e(()=>[t(me,null,{default:e(()=>a[93]||(a[93]=[n("Average Speed")])),_:1})]),_:2},1024),s.metrics.unique_providers?(d(),y(oe,{key:0,class:"my-2"})):F("",!0),s.metrics.unique_providers?(d(),y(le,{key:1},{prepend:e(()=>[t(f,{color:"warning"},{default:e(()=>a[94]||(a[94]=[n("mdi-domain")])),_:1})]),append:e(()=>[o("span",po,r(s.metrics.unique_providers),1)]),default:e(()=>[t(me,null,{default:e(()=>a[95]||(a[95]=[n("Unique Providers")])),_:1})]),_:2},1024)):F("",!0),s.metrics.unique_states?(d(),y(oe,{key:2,class:"my-2"})):F("",!0),s.metrics.unique_states?(d(),y(le,{key:3},{prepend:e(()=>[t(f,{color:"secondary"},{default:e(()=>a[96]||(a[96]=[n("mdi-map-marker")])),_:1})]),append:e(()=>[o("span",vo,r(s.metrics.unique_states),1)]),default:e(()=>[t(me,null,{default:e(()=>a[97]||(a[97]=[n("Unique States")])),_:1})]),_:2},1024)):F("",!0)]),_:2},1024)]),_:2},1024),t(Ze,null,{default:e(()=>[t(se,{variant:"text",color:"primary",onClick:Do=>ee(s.domain.id),"prepend-icon":"mdi-chart-box",block:""},{default:e(()=>a[98]||(a[98]=[n(" View Dashboard ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1032,["md"]))),128))]),_:1}),l(V).provider_data?(d(),y(D,{key:0},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(O,{elevation:"4"},{default:e(()=>[t(Ue,{class:"d-flex align-center"},{default:e(()=>[t(f,{start:"",color:"primary"},{default:e(()=>a[99]||(a[99]=[n("mdi-account-network")])),_:1}),a[100]||(a[100]=n(" Provider Overview "))]),_:1}),t(N,null,{default:e(()=>[t(D,{class:"mb-4"},{default:e(()=>[t(p,{cols:"12",md:"6"},{default:e(()=>[t(O,{variant:"tonal",color:"primary"},{default:e(()=>[t(N,{class:"text-center"},{default:e(()=>[o("div",fo,r(l(V).provider_data.unique_providers_count),1),a[101]||(a[101]=o("div",{class:"text-caption"},"Total Unique Providers",-1))]),_:1})]),_:1})]),_:1}),t(p,{cols:"12",md:"6"},{default:e(()=>[t(O,{variant:"tonal",color:"primary"},{default:e(()=>[t(N,{class:"text-center"},{default:e(()=>[o("div",go,r(l(V).provider_data.common_providers.length),1),a[102]||(a[102]=o("div",{class:"text-caption"},"Common Providers (in all domains)",-1))]),_:1})]),_:1})]),_:1})]),_:1}),l(V).provider_data.common_providers.length>0?(d(),_("div",_o,[o("h3",bo,[t(f,{start:"",size:"small"},{default:e(()=>a[103]||(a[103]=[n("mdi-chart-bar")])),_:1}),a[104]||(a[104]=n(" All Providers in Selected Domains "))]),t(he,{color:"primary",variant:"tonal",density:"compact",class:"mb-3"},{default:e(()=>[n(" Aggregated data for all providers across "+r(l(V).total_compared)+" selected domains ",1)]),_:1}),t(Me,{density:"compact"},{default:e(()=>[a[105]||(a[105]=o("thead",null,[o("tr",null,[o("th",{class:"text-left"},"Rank"),o("th",{class:"text-left"},"Provider"),o("th",{class:"text-left"},"Technology"),o("th",{class:"text-right"},"Total Requests"),o("th",{class:"text-right"},"Avg Speed"),o("th",{class:"text-center"},"Appearances")])],-1)),o("tbody",null,[(d(!0),_(pe,null,ke(l(V).provider_data.common_providers,(s,X)=>(d(),_("tr",{key:s.provider_id},[o("td",yo,"#"+r(X+1),1),o("td",xo,r(s.provider_name),1),o("td",null,[t(K,{size:"small",variant:"tonal",color:Ae(s.technology)},{default:e(()=>[n(r(s.technology),1)]),_:2},1032,["color"])]),o("td",ho,r(s.total_requests.toLocaleString()),1),o("td",ko,r(s.avg_speed.toFixed(0))+" ms",1),o("td",So,[t(K,{size:"small",variant:"tonal",color:s.appearances>=l(V).total_compared*20?"success":"info"},{default:e(()=>[n(r(s.appearances)+" reports ",1)]),_:2},1032,["color"])])]))),128))])]),_:1})])):F("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):F("",!0)])):!l(x)&&!l(P)?(d(),y(D,{key:3},{default:e(()=>[t(p,{cols:"12"},{default:e(()=>[t(M,null,{default:e(()=>[o("div",wo,[t(f,{size:"80",color:"grey"},{default:e(()=>a[106]||(a[106]=[n("mdi-compare")])),_:1}),a[107]||(a[107]=o("h3",{class:"text-h5 mt-4 mb-2"},"Select domains to compare",-1)),a[108]||(a[108]=o("p",{class:"text-medium-emphasis"}," Choose at least 2 domains from the selector above to see a detailed comparison ",-1))])]),_:1})]),_:1})]),_:1})):F("",!0)])):F("",!0)])}}}),Ao=Ke(Ro,[["__scopeId","data-v-9e2ec5d5"]]);export{Ao as default};
