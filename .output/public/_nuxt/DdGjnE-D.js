var Pt=Object.defineProperty;var Dt=(R,d,m)=>d in R?Pt(R,d,{enumerable:!0,configurable:!0,writable:!0,value:m}):R[d]=m;var Oe=(R,d,m)=>Dt(R,typeof d!="symbol"?d+"":d,m);import{x as lt,e as A,l as J,d as rt,M as nt,C as te,o as it,c as _,a as t,h as y,i as f,r as w,w as e,q as l,j as r,p as zt,g as o,K as Ae,t as n,F as ge,m as Re,n as Ne,b as i,_ as dt,s as ye,H as et,I as tt,k as qt,G as Ft}from"./Cwk7k6Hy.js";import{_ as T}from"./DxWg7qjb.js";import{_ as st}from"./Bb60Fgqw.js";import{u as Ct}from"./5fzi7IMv.js";import{R as ut,u as Vt}from"./B0tuLmgn.js";import{u as At}from"./CcB6fP36.js";import{u as $t}from"./DdoCg7R0.js";import{u as Tt}from"./lRujSYlp.js";class Lt{constructor(){Oe(this,"apiClient");this.apiClient=new lt}async getRankings(d){try{const m=new URLSearchParams;d!=null&&d.provider_id&&m.append("provider_id",d.provider_id.toString()),d!=null&&d.technology&&m.append("technology",d.technology),d!=null&&d.period&&m.append("period",d.period),d!=null&&d.date_from&&m.append("date_from",d.date_from),d!=null&&d.date_to&&m.append("date_to",d.date_to),d!=null&&d.sort_by&&m.append("sort_by",d.sort_by),(d==null?void 0:d.aggregate_by_provider)!==void 0&&m.append("aggregate_by_provider",d.aggregate_by_provider?"true":"false"),d!=null&&d.page&&m.append("page",d.page.toString()),d!=null&&d.per_page&&m.append("per_page",d.per_page.toString()),d!=null&&d.limit&&!(d!=null&&d.page)&&!(d!=null&&d.per_page)&&m.append("limit",d.limit.toString());const b=`/reports/global/provider-ranking${m.toString()?`?${m.toString()}`:""}`;console.log("ðŸ” ProviderRankingRepository - URL:",b);const h=await this.apiClient.get(b);return console.log("ðŸ” ProviderRankingRepository - Response:",h),h}catch(m){throw console.error("ProviderRankingRepository - getRankings error:",m),m}}}class Ut{constructor(){Oe(this,"providerRankingRepository");this.providerRankingRepository=new Lt}async getProviderRankings(d){var m;try{console.log("ðŸ” ProviderRankingService - getProviderRankings filters:",d);const b=await this.providerRankingRepository.getRankings(d);return console.log("ðŸ” ProviderRankingService - response:",b),b.success&&b.data?Array.isArray(b.data)?{success:!0,data:{rankings:b.data,totalEntries:((m=b.pagination)==null?void 0:m.total)||b.data.length,filters:b.filters||{},pagination:b.pagination,availableProviders:b.available_providers||[],aggregatedStats:b.aggregated_stats||void 0,globalStats:b.global_stats||void 0}}:{success:!0,data:{rankings:b.data.ranking||[],totalEntries:b.data.total_entries||0,filters:b.data.filters||{},availableProviders:b.available_providers||[],aggregatedStats:b.aggregated_stats||void 0,globalStats:b.global_stats||void 0}}:{success:!1,error:"Failed to fetch provider rankings"}}catch(b){return console.error("ProviderRankingService - getProviderRankings error:",b),{success:!1,error:b instanceof Error?b.message:"Failed to fetch provider rankings"}}}async getTopProviderDomain(d){try{const m=await this.providerRankingRepository.getRankings({provider_id:d,limit:1});if(m.success&&m.data){const b=Array.isArray(m.data)?m.data:m.data.ranking||[];if(b.length>0)return{success:!0,data:b[0]}}return{success:!0,data:null}}catch(m){return console.error("ProviderRankingService - getTopProviderDomain error:",m),{success:!1,error:m instanceof Error?m.message:"Failed to fetch top provider domain"}}}}const mt=()=>{const R=A([]),d=A(0),m=A(null),b=A([]),h=A(null),I=A(null),P=A({technology:null,provider_id:null,period:"all_time",sort_by:"total_requests",page:1,per_page:15,aggregate_by_provider:!1}),C=A(!1),q=A(null),Y=new Ut,k=A("total_requests"),S=J(()=>{let V=R.value.map(F=>{var U,pe;return{...F,requestsFormatted:F.total_requests.toLocaleString(),domainTotalFormatted:((U=F.domain_total_requests)==null?void 0:U.toLocaleString())||"-",percentageFormatted:((pe=F.percentage_of_domain)==null?void 0:pe.toFixed(1))||"0.0",percentageColor:M(F.percentage_of_domain),successRateFormatted:F.avg_success_rate.toFixed(1),avgSpeedFormatted:F.avg_speed.toFixed(0),successRateColor:F.avg_success_rate>=90?"success":F.avg_success_rate>=70?"warning":"error",techColor:$(F.technology),hasMedal:F.rank<=3,medalEmoji:F.rank===1?"ðŸ¥‡":F.rank===2?"ðŸ¥ˆ":F.rank===3?"ðŸ¥‰":""}});return k.value==="domain_total"?V=V.sort((F,U)=>(U.domain_total_requests||0)-(F.domain_total_requests||0)):k.value==="percentage"?V=V.sort((F,U)=>(U.percentage_of_domain||0)-(F.percentage_of_domain||0)):k.value==="avg_speed"&&(V=V.sort((F,U)=>F.avg_speed-U.avg_speed)),V}),$=V=>V&&{Fiber:"blue",Cable:"green",DSL:"orange",Mobile:"purple",Satellite:"red"}[V]||"grey",M=V=>V?V>=50?"error":V>=25?"warning":V>=10?"info":"success":"grey",B=async V=>{C.value=!0,q.value=null;try{const F=V||P.value,U=await Y.getProviderRankings(F);U.success&&U.data?(R.value=U.data.rankings,d.value=U.data.totalEntries,m.value=U.data.pagination||null,b.value=U.data.availableProviders||[],h.value=U.data.aggregatedStats||null,I.value=U.data.globalStats||null):(q.value=U.error||"Failed to load provider rankings",R.value=[],m.value=null,b.value=[],h.value=null,I.value=null)}catch(F){q.value=F instanceof Error?F.message:"Unexpected error",R.value=[]}finally{C.value=!1}};return{rankings:R,formattedRankings:S,totalEntries:d,pagination:m,availableProviders:b,aggregatedStats:h,globalStats:I,filters:P,loading:C,error:q,localSortBy:k,loadProviderRankings:B,getTopProviderDomain:async V=>await Y.getTopProviderDomain(V),updateFilters:V=>{P.value={...P.value,...V}},clearFilters:()=>{P.value={technology:null,provider_id:null,period:"all_time",date_from:null,date_to:null,sort_by:"total_requests",page:1,per_page:15,aggregate_by_provider:!1}},goToPage:async V=>{P.value.page=V,await B()},changePerPage:async V=>{P.value.per_page=V,P.value.page=1,await B()},changeLocalSort:V=>{k.value=V}}},Mt={class:"provider-rankings"},jt={class:"d-flex align-center ga-2"},Bt={class:"text-caption text-medium-emphasis mb-2"},Ot={class:"text-caption"},Nt={key:0},Et={key:1},Wt={key:2},It={class:"d-flex flex-wrap ga-4"},Gt={class:"text-h4 font-weight-bold"},Kt={class:"text-h4 font-weight-bold"},Yt={class:"text-h4 font-weight-bold"},Ht={class:"text-h4 font-weight-bold"},Xt={class:"font-weight-bold"},Jt={key:0,class:"mr-2"},Zt={class:"font-weight-medium"},Qt={class:"text-caption text-medium-emphasis"},ea={key:0,class:"d-flex flex-wrap ga-1"},ta={key:1,class:"text-medium-emphasis"},aa={class:"text-right font-weight-medium"},oa={class:"text-right text-medium-emphasis"},sa={class:"text-center"},la={class:"text-right"},ra={class:"d-flex align-center"},na={class:"text-caption text-medium-emphasis"},ia={class:"d-flex align-center ga-2"},da=rt({__name:"ProviderRankingTable",setup(R){const d=nt(),{formattedRankings:m,totalEntries:b,pagination:h,availableProviders:I,aggregatedStats:P,globalStats:C,filters:q,loading:Y,error:k,localSortBy:S,loadProviderRankings:$,updateFilters:M,clearFilters:B,goToPage:ae,changePerPage:E,changeLocalSort:Q}=mt(),x=A({...q.value,date_from:d.query.date_from||null,date_to:d.query.date_to||null}),$e=J(()=>!I.value||I.value.length===0?[]:I.value.map(c=>({title:`${c.name} (${c.total_requests.toLocaleString()} requests)`,value:c.id}))),Pe=[{title:"ðŸ“… Today",value:"today"},{title:"ðŸ“… Yesterday",value:"yesterday"},{title:"ðŸ“… Last Week",value:"last_week"},{title:"ðŸ“… Last Month",value:"last_month"},{title:"ðŸ“… Last Year",value:"last_year"},{title:"ðŸ“… All Time",value:"all_time"}],V=[{title:"ðŸ”µ Fiber",value:"Fiber"},{title:"ðŸŸ¢ Cable",value:"Cable"},{title:"ðŸŸ¡ DSL",value:"DSL"},{title:"ðŸŸ£ Mobile",value:"Mobile"},{title:"ðŸ”´ Satellite",value:"Satellite"}],F=[{title:"ðŸ“Š Provider Requests",value:"total_requests"},{title:"ðŸ“Š Domain Total",value:"domain_total"},{title:"ðŸ“ˆ % of Domain",value:"percentage"},{title:"âš¡ Avg Speed",value:"avg_speed"}],U=[{title:"15 per page",value:15},{title:"25 per page",value:25},{title:"50 per page",value:50},{title:"100 per page",value:100}],pe=()=>{if(!x.value.provider_id)return"";const c=I.value.find(u=>u.id===x.value.provider_id);return c?c.name:""},xe=()=>{const c={};x.value.date_from&&(c.date_from=x.value.date_from),x.value.date_to&&(c.date_to=x.value.date_to),Ne({query:Object.keys(c).length>0?c:{}},{replace:!0})},le=()=>{x.value.page=1,M(x.value),xe(),$()},be=()=>{(x.value.date_from||x.value.date_to)&&(x.value.period=null),le()},De=c=>{Q(c)},he=()=>{B(),x.value={...q.value},x.value.aggregate_by_provider=!1,x.value.date_from=null,x.value.date_to=null,Q("total_requests"),xe(),$()},Ee=()=>{h.value&&h.value.current_page>1&&ae(h.value.current_page-1)},We=()=>{h.value&&h.value.current_page<h.value.last_page&&ae(h.value.current_page+1)},Ie=c=>{x.value.per_page=c,E(c)},ze=c=>c?c.includes(","):!1,Ge=c=>c?c.split(",").map(u=>u.trim()).filter(u=>u.length>0):[],Te=c=>({Fiber:"blue",Cable:"green",DSL:"orange",Mobile:"purple",Satellite:"red",Unknown:"grey"})[c]||"grey",ke=c=>{if(!c)return"";try{return new Date(c).toLocaleDateString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit"})}catch{return c}};return te(()=>d.query,c=>{(c.date_from!==x.value.date_from||c.date_to!==x.value.date_to)&&(x.value.date_from=c.date_from||null,x.value.date_to=c.date_to||null,M(x.value),$())},{immediate:!1}),it(()=>{(x.value.date_from||x.value.date_to)&&M(x.value),$()}),(c,u)=>{const O=w("v-icon"),ee=w("v-select"),W=w("v-col"),re=w("v-switch"),Se=w("v-tooltip"),oe=w("v-card"),qe=w("v-btn"),H=w("v-row"),ne=w("v-text-field"),ie=w("v-alert"),we=w("v-alert-title"),N=w("v-chip"),Z=w("v-card-text"),Fe=w("v-progress-circular"),L=w("v-card-title"),Ke=w("v-table"),Le=w("v-card-actions");return i(),_("div",Mt,[t(H,{class:"mb-4"},{default:e(()=>[t(W,{cols:"12",md:"2"},{default:e(()=>[t(ee,{modelValue:x.value.provider_id,"onUpdate:modelValue":[u[0]||(u[0]=z=>x.value.provider_id=z),le],items:$e.value,label:"Provider",clearable:"",variant:"outlined",density:"compact"},{"prepend-inner":e(()=>[t(O,{size:"small"},{default:e(()=>u[7]||(u[7]=[r("mdi-account-network")])),_:1})]),_:1},8,["modelValue","items"])]),_:1}),t(W,{cols:"12",md:"2"},{default:e(()=>[t(ee,{modelValue:x.value.technology,"onUpdate:modelValue":[u[1]||(u[1]=z=>x.value.technology=z),le],items:V,label:"Technology",clearable:"",variant:"outlined",density:"compact"},{"prepend-inner":e(()=>[t(O,{size:"small"},{default:e(()=>u[8]||(u[8]=[r("mdi-network")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(W,{cols:"12",md:"2"},{default:e(()=>[t(ee,{modelValue:x.value.period,"onUpdate:modelValue":[u[2]||(u[2]=z=>x.value.period=z),le],items:Pe,label:"Period",clearable:"",variant:"outlined",density:"compact"},{"prepend-inner":e(()=>[t(O,{size:"small"},{default:e(()=>u[9]||(u[9]=[r("mdi-calendar-range")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(W,{cols:"12",md:"2"},{default:e(()=>[t(ee,{modelValue:l(S),"onUpdate:modelValue":[u[3]||(u[3]=z=>zt(S)?S.value=z:null),De],items:F,label:"Sort By",variant:"outlined",density:"compact"},{"prepend-inner":e(()=>[t(O,{size:"small"},{default:e(()=>u[10]||(u[10]=[r("mdi-sort")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(W,{cols:"12",md:"2"},{default:e(()=>[t(oe,{variant:"outlined",class:"pa-2"},{default:e(()=>[o("div",jt,[t(O,{size:"small",color:"primary"},{default:e(()=>u[11]||(u[11]=[r("mdi-group")])),_:1}),t(re,{modelValue:x.value.aggregate_by_provider,"onUpdate:modelValue":[u[4]||(u[4]=z=>x.value.aggregate_by_provider=z),le],label:"Aggregate by Provider",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),t(Se,{location:"top"},{activator:e(({props:z})=>[t(O,Ae(z,{size:"x-small",color:"grey",class:"ml-1"}),{default:e(()=>u[12]||(u[12]=[r(" mdi-information-outline ")])),_:2},1040)]),default:e(()=>[u[13]||(u[13]=o("span",null,"When enabled, aggregates all technologies of the same provider for each domain",-1))]),_:1})]),_:1})]),_:1}),t(W,{cols:"12",md:"2"},{default:e(()=>[t(qe,{block:"",variant:"outlined",color:"grey",onClick:he},{default:e(()=>[t(O,{start:""},{default:e(()=>u[14]||(u[14]=[r("mdi-filter-off")])),_:1}),u[15]||(u[15]=r(" Clear Filters "))]),_:1})]),_:1})]),_:1}),t(H,{class:"mb-4"},{default:e(()=>[t(W,{cols:"12"},{default:e(()=>[t(oe,{variant:"outlined",class:"pa-3"},{default:e(()=>[o("div",Bt,[t(O,{size:"small",class:"mr-1"},{default:e(()=>u[16]||(u[16]=[r("mdi-calendar-range")])),_:1}),u[17]||(u[17]=r(" Custom Date Range (Optional) "))]),t(H,null,{default:e(()=>[t(W,{cols:"12",sm:"6",md:"4"},{default:e(()=>[t(ne,{modelValue:x.value.date_from,"onUpdate:modelValue":[u[5]||(u[5]=z=>x.value.date_from=z),be],label:"Data de InÃ­cio",type:"date",variant:"outlined",density:"compact",clearable:"","prepend-inner-icon":"mdi-calendar-start"},null,8,["modelValue"])]),_:1}),t(W,{cols:"12",sm:"6",md:"4"},{default:e(()=>[t(ne,{modelValue:x.value.date_to,"onUpdate:modelValue":[u[6]||(u[6]=z=>x.value.date_to=z),be],label:"Data de Fim",type:"date",variant:"outlined",density:"compact",clearable:"","prepend-inner-icon":"mdi-calendar-end"},null,8,["modelValue"])]),_:1}),t(W,{cols:"12",md:"4",class:"d-flex align-center"},{default:e(()=>[x.value.date_from||x.value.date_to?(i(),y(ie,{key:0,type:"info",variant:"tonal",density:"compact",class:"mb-0"},{default:e(()=>[o("div",Ot,[t(O,{size:"small",class:"mr-1"},{default:e(()=>u[18]||(u[18]=[r("mdi-information")])),_:1}),x.value.date_from&&x.value.date_to?(i(),_("span",Nt," PerÃ­odo: "+n(ke(x.value.date_from))+" atÃ© "+n(ke(x.value.date_to)),1)):x.value.date_from?(i(),_("span",Et," A partir de: "+n(ke(x.value.date_from)),1)):x.value.date_to?(i(),_("span",Wt," AtÃ©: "+n(ke(x.value.date_to)),1)):f("",!0)])]),_:1})):f("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(C)?(i(),y(H,{key:0,class:"mb-4"},{default:e(()=>[t(W,{cols:"12"},{default:e(()=>[t(ie,{color:"primary",variant:"tonal",border:"start",prominent:""},{default:e(()=>[t(we,{class:"text-h6 mb-2"},{default:e(()=>[t(O,{start:"",size:"small"},{default:e(()=>u[19]||(u[19]=[r("mdi-chart-line")])),_:1}),r(" "+n(pe())+" Global Statistics ",1)]),_:1}),o("div",It,[o("div",null,[u[20]||(u[20]=o("strong",null,"Provider Requests:",-1)),r(" "+n(l(C).provider_total_requests.toLocaleString()),1)]),o("div",null,[u[21]||(u[21]=o("strong",null,"Global Requests:",-1)),r(" "+n(l(C).global_total_requests.toLocaleString()),1)]),o("div",null,[u[22]||(u[22]=o("strong",null,"Percentage of Global:",-1)),t(N,{color:"primary",variant:"tonal",size:"small",class:"ml-1"},{default:e(()=>[r(n(l(C).percentage_of_global.toFixed(2))+"% ",1)]),_:1})])])]),_:1})]),_:1})]),_:1})):f("",!0),l(P)?(i(),y(H,{key:1,class:"mb-4"},{default:e(()=>[t(W,{cols:"12",md:"3"},{default:e(()=>[t(oe,{variant:"tonal",color:"primary"},{default:e(()=>[t(Z,{class:"text-center"},{default:e(()=>[o("div",Gt,n(l(P).total_requests.toLocaleString()),1),u[23]||(u[23]=o("div",{class:"text-caption text-medium-emphasis"},"Total Requests",-1))]),_:1})]),_:1})]),_:1}),t(W,{cols:"12",md:"3"},{default:e(()=>[t(oe,{variant:"tonal",color:"primary"},{default:e(()=>[t(Z,{class:"text-center"},{default:e(()=>[o("div",Kt,n(l(P).avg_speed.toFixed(0))+" ms ",1),u[24]||(u[24]=o("div",{class:"text-caption text-medium-emphasis"},"Avg Speed",-1))]),_:1})]),_:1})]),_:1}),t(W,{cols:"12",md:"3"},{default:e(()=>[t(oe,{variant:"tonal",color:"primary"},{default:e(()=>[t(Z,{class:"text-center"},{default:e(()=>[o("div",Yt,n(l(P).unique_domains),1),u[25]||(u[25]=o("div",{class:"text-caption text-medium-emphasis"},"Unique Domains",-1))]),_:1})]),_:1})]),_:1}),t(W,{cols:"12",md:"3"},{default:e(()=>[t(oe,{variant:"tonal",color:"primary"},{default:e(()=>[t(Z,{class:"text-center"},{default:e(()=>[o("div",Ht,n(l(P).unique_providers),1),u[26]||(u[26]=o("div",{class:"text-caption text-medium-emphasis"},"Unique Providers",-1))]),_:1})]),_:1})]),_:1})]),_:1})):f("",!0),l(Y)?(i(),y(ie,{key:2,type:"info",variant:"tonal"},{default:e(()=>[t(Fe,{indeterminate:"",size:"20",class:"mr-2"}),u[27]||(u[27]=r(" Loading rankings... "))]),_:1})):l(k)?(i(),y(ie,{key:3,type:"error",variant:"tonal"},{default:e(()=>[r(n(l(k)),1)]),_:1})):(i(),y(oe,{key:4},{default:e(()=>[t(L,{class:"d-flex align-center justify-space-between"},{default:e(()=>[u[28]||(u[28]=o("span",null,"ðŸ† Provider Rankings",-1)),t(N,{color:"primary",variant:"tonal"},{default:e(()=>[r(n(l(b))+" entries ",1)]),_:1})]),_:1}),t(Ke,{"fixed-header":"",height:"600px"},{default:e(()=>[u[31]||(u[31]=o("thead",null,[o("tr",null,[o("th",{class:"text-left"},"Rank"),o("th",{class:"text-left"},"Domain"),o("th",{class:"text-left"},"Provider"),o("th",{class:"text-left"},"Technology"),o("th",{class:"text-right"},"Provider Requests"),o("th",{class:"text-right"},"Domain Total"),o("th",{class:"text-center"},"% of Domain"),o("th",{class:"text-right"},"Avg Speed")])],-1)),o("tbody",null,[(i(!0),_(ge,null,Re(l(m),z=>(i(),_("tr",{key:`${z.domain_id}-${z.provider_id}`},[o("td",Xt,[z.hasMedal?(i(),_("span",Jt,n(z.medalEmoji),1)):f("",!0),r(" #"+n(z.rank),1)]),o("td",null,[o("div",Zt,n(z.domain_name),1),o("div",Qt,n(z.domain_slug),1)]),o("td",null,n(z.provider_name),1),o("td",null,[z.technology?(i(),_("div",ea,[ze(z.technology)?(i(),_(ge,{key:0},[(i(!0),_(ge,null,Re(Ge(z.technology),(se,Ye)=>(i(),y(N,{key:Ye,color:Te(se),variant:"tonal",size:"x-small",class:"mr-1 mb-1"},{default:e(()=>[r(n(se.trim()),1)]),_:2},1032,["color"]))),128)),t(Se,{location:"top"},{activator:e(({props:se})=>[t(O,Ae({ref_for:!0},se,{size:"x-small",color:"primary",class:"ml-1"}),{default:e(()=>u[29]||(u[29]=[r(" mdi-information ")])),_:2},1040)]),default:e(()=>[u[30]||(u[30]=o("span",null,"Multiple technologies aggregated",-1))]),_:1})],64)):(i(),y(N,{key:1,color:z.techColor,variant:"tonal",size:"small"},{default:e(()=>[r(n(z.technology),1)]),_:2},1032,["color"]))])):(i(),_("span",ta,"Unknown"))]),o("td",aa,n(z.requestsFormatted),1),o("td",oa,n(z.domainTotalFormatted),1),o("td",sa,[t(N,{color:z.percentageColor,variant:"tonal",size:"small"},{default:e(()=>[r(n(z.percentageFormatted)+"% ",1)]),_:2},1032,["color"])]),o("td",la,n(z.avgSpeedFormatted)+" ms",1)]))),128))])]),_:1}),l(h)?(i(),y(Le,{key:0,class:"justify-space-between pa-4"},{default:e(()=>[o("div",ra,[o("span",na," Showing "+n(l(h).from)+" to "+n(l(h).to)+" of "+n(l(h).total)+" entries ",1)]),o("div",ia,[t(ee,{"model-value":x.value.per_page,items:U,"onUpdate:modelValue":Ie,density:"compact",variant:"outlined","hide-details":"",style:{width:"100px"}},null,8,["model-value"]),t(qe,{icon:"mdi-chevron-left",size:"small",variant:"text",disabled:l(h).current_page===1,onClick:Ee},null,8,["disabled"]),t(N,{variant:"tonal",color:"primary"},{default:e(()=>[r(n(l(h).current_page)+" / "+n(l(h).last_page),1)]),_:1}),t(qe,{icon:"mdi-chevron-right",size:"small",variant:"text",disabled:l(h).current_page===l(h).last_page,onClick:We},null,8,["disabled"])])]),_:1})):f("",!0)]),_:1}))])}}}),ua=dt(da,[["__scopeId","data-v-3301b675"]]),ma=()=>{const R=A(null),d=A(!1),m=A(null),b=A("score"),h=new ut,I=async(k="score")=>{d.value=!0,m.value=null,b.value=k;try{const S=await h.getGlobalDomainRanking(k);S.success&&S.data?R.value=S.data:(m.value=S.error||"Failed to load ranking",R.value=null)}catch{m.value="Unexpected error loading ranking",R.value=null}finally{d.value=!1}},P=J(()=>{var k;return!((k=R.value)!=null&&k.ranking)||!Array.isArray(R.value.ranking)?[]:R.value.ranking.map(S=>({...S,formattedPeriod:`${new Date(S.coverage.period_start).toLocaleDateString()} - ${new Date(S.coverage.period_end).toLocaleDateString()}`,formattedRequests:C(S.metrics.total_requests),formattedSuccessRate:S.metrics.success_rate.toFixed(1)+"%",formattedSpeed:S.metrics.avg_speed>0?S.metrics.avg_speed.toFixed(1)+" Mbps":"N/A",formattedScore:S.metrics.score.toFixed(1)}))}),C=k=>k>=1e6?(k/1e6).toFixed(1)+"M":k>=1e3?(k/1e3).toFixed(1)+"K":k.toString(),q=J(()=>P.value.slice(0,3)),Y=J(()=>{var ae;if(!((ae=R.value)!=null&&ae.ranking)||R.value.ranking.length===0)return{totalDomains:0,totalRequests:0,avgSuccessRate:0,avgSpeed:0};const k=R.value.ranking,S=k.reduce((E,Q)=>E+Q.metrics.total_requests,0),$=k.reduce((E,Q)=>E+Q.metrics.success_rate,0)/k.length,M=k.filter(E=>E.metrics.avg_speed>0),B=M.length>0?M.reduce((E,Q)=>E+Q.metrics.avg_speed,0)/M.length:0;return{totalDomains:k.length,totalRequests:S,avgSuccessRate:$,avgSpeed:B}});return{rankingData:ye(R),loading:ye(d),error:ye(m),currentSortBy:ye(b),formattedRanking:P,topThree:q,globalStats:Y,loadRanking:I}},ca=()=>{const R=A(null),d=A(!1),m=A(null),b=new ut,h=async(q,Y,k,S)=>{if(q.length<2){m.value="Please select at least 2 domains to compare";return}d.value=!0,m.value=null;try{const $=await b.compareDomains(q,Y,k,S);$.success&&$.data?R.value=$.data:(m.value=$.error||"Failed to load comparison",R.value=null)}catch{m.value="Unexpected error loading comparison",R.value=null}finally{d.value=!1}},I=q=>q>=1e6?(q/1e6).toFixed(1)+"M":q>=1e3?(q/1e3).toFixed(1)+"K":q.toString(),P=(q,Y=!1)=>Y?q>0?"error":q<0?"success":"default":q>0?"success":q<0?"error":"default",C=q=>q>0?"mdi-arrow-up":q<0?"mdi-arrow-down":"mdi-minus";return{comparisonData:ye(R),loading:ye(d),error:ye(m),loadComparison:h,formatNumber:I,getDiffColor:P,getDiffIcon:C}};class pa{constructor(){Oe(this,"apiClient");this.apiClient=new lt}async getRankingsByState(d){try{const m=new URLSearchParams;m.append("state_id",d.state_id.toString()),d.provider_id&&m.append("provider_id",d.provider_id.toString()),d.period&&m.append("period",d.period),d.date_from&&m.append("date_from",d.date_from),d.date_to&&m.append("date_to",d.date_to),d.sort_by&&m.append("sort_by",d.sort_by),d.aggregate_by_provider!==void 0&&m.append("aggregate_by_provider",d.aggregate_by_provider?"true":"false");const b=`/reports/global/provider-ranking-by-state?${m.toString()}`;console.log("ðŸ” ProviderRankingByStateRepository - URL:",b);const h=await this.apiClient.get(b);return console.log("ðŸ” ProviderRankingByStateRepository - Response:",h),h}catch(m){throw console.error("ProviderRankingByStateRepository - getRankingsByState error:",m),m}}}const va=()=>{const R=A([]),d=A(!1),m=A(null),b=A(0),h=A({state_id:0,provider_id:null,period:"last_month",date_from:null,date_to:null,sort_by:"total_requests",aggregate_by_provider:!1}),I=new pa,P=async S=>{if(!h.value.state_id||h.value.state_id===0){m.value="Please select a state";return}d.value=!0,m.value=null;try{const $={...h.value,...S},M=await I.getRankingsByState($);M.success&&M.data?(R.value=M.data.ranking||[],b.value=M.data.total_entries||0,h.value={...h.value,...M.data.filters}):(m.value=M.message||"Failed to load ranking data",R.value=[],b.value=0)}catch($){m.value=$ instanceof Error?$.message:"Unexpected error loading ranking",R.value=[],b.value=0}finally{d.value=!1}},C=S=>{h.value={...h.value,...S}},q=()=>{h.value={...h.value,provider_id:null,period:"last_month",date_from:null,date_to:null,sort_by:"total_requests"}},Y=J(()=>h.value.aggregate_by_provider===!0),k=J(()=>R.value.map(S=>{var M;const $={...S,formattedRequests:S.total_requests.toLocaleString(),formattedSuccessRate:`${S.avg_success_rate.toFixed(1)}%`,formattedSpeed:`${S.avg_speed.toFixed(2)} Mbps`};if("domain_id"in S&&"percentage_of_domain"in S){const B=S;return{...$,formattedPercentage:`${B.percentage_of_domain.toFixed(2)}%`,formattedProviderTotalRequests:((M=B.provider_total_requests)==null?void 0:M.toLocaleString())||"0",formattedPercentageOfProvider:B.percentage_of_provider_in_state?`${B.percentage_of_provider_in_state.toFixed(2)}%`:"0%"}}if("percentage_of_state"in S){const B=S;return{...$,formattedPercentage:`${B.percentage_of_state.toFixed(2)}%`,formattedDomains:B.domains||"",domainsCount:B.domains_count||0}}return $}));return{ranking:R,formattedRanking:k,loading:d,error:m,totalEntries:b,filters:h,isAggregatedByProvider:Y,loadRankingByState:P,updateFilters:C,clearFilters:q}},_a={class:"d-flex justify-center align-center py-8"},fa={key:2},ga={key:0},ya={class:"d-flex align-center justify-space-between mb-2"},xa={class:"text-h3 font-weight-bold text-primary"},ba={class:"d-flex align-center justify-space-between mb-2"},ha={class:"text-h3 font-weight-bold text-success"},ka={class:"d-flex align-center justify-space-between mb-2"},Sa={class:"text-h3 font-weight-bold text-info"},wa={class:"d-flex align-center justify-space-between mb-2"},Ra={class:"text-h3 font-weight-bold text-warning"},Pa={key:1,class:"text-center py-8"},Da={key:1,class:"text-center py-8"},za={key:1,class:"text-center py-8"},qa={key:1,class:"text-center py-8"},Fa={class:"text-h6 mt-2"},Ca={class:"d-flex justify-space-between mb-2"},Va={class:"font-weight-bold"},Aa={class:"d-flex justify-space-between mb-2"},$a={class:"font-weight-bold"},Ta={class:"d-flex justify-space-between"},La={class:"font-weight-bold"},Ua={class:"text-h5 mt-2"},Ma={class:"d-flex justify-space-between mb-2"},ja={class:"font-weight-bold text-h6"},Ba={class:"d-flex justify-space-between mb-2"},Oa={class:"font-weight-bold"},Na={class:"d-flex justify-space-between"},Ea={class:"font-weight-bold"},Wa={class:"text-h6 mt-2"},Ia={class:"d-flex justify-space-between mb-2"},Ga={class:"font-weight-bold"},Ka={class:"d-flex justify-space-between mb-2"},Ya={class:"font-weight-bold"},Ha={class:"d-flex justify-space-between"},Xa={class:"font-weight-bold"},Ja={class:"text-center"},Za={class:"font-weight-medium"},Qa={class:"text-caption text-medium-emphasis"},eo={class:"text-right"},to={class:"text-right font-weight-medium"},ao={class:"text-right"},oo={class:"text-right"},so={class:"text-center"},lo={class:"text-center"},ro={class:"text-center"},no={class:"text-center"},io={class:"text-caption"},uo={class:"text-caption text-medium-emphasis"},mo={class:"text-center"},co={key:0,class:"text-center py-8"},po={key:3},vo={key:4},_o={key:0,class:"text-caption"},fo={key:1,class:"text-caption"},go={class:"text-center py-12"},yo={class:"d-flex justify-center align-center py-8"},xo={key:3},bo={class:"d-flex align-center justify-space-between mb-2"},ho={class:"text-h3 font-weight-bold text-primary"},ko={class:"d-flex align-center justify-space-between mb-2"},So={class:"text-h3 font-weight-bold text-success"},wo={class:"d-flex align-center justify-space-between mb-2"},Ro={class:"text-h3 font-weight-bold text-info"},Po={class:"d-flex align-center justify-space-between mb-2"},Do={class:"text-h3 font-weight-bold text-warning"},zo={key:0},qo={key:1,class:"text-center py-8"},Fo={key:0},Co={key:1,class:"text-center py-8"},Vo={key:0},Ao={key:1,class:"text-center py-8"},$o={key:0},To={key:1,class:"text-center py-8"},Lo={key:5},Uo={class:"text-caption text-medium-emphasis mb-2"},Mo={class:"text-caption"},jo={key:0},Bo={key:1},Oo={key:2},No={class:"text-center py-12"},Eo={class:"d-flex justify-center align-center py-8"},Wo={key:0,class:"ml-2"},Io={key:0,class:"text-left"},Go={key:1,class:"text-right"},Ko={key:2,class:"text-right"},Yo={key:3,class:"text-right"},Ho={key:4,class:"text-right"},Xo={key:5,class:"text-right"},Jo={key:0},Zo={class:"font-weight-medium"},Qo={class:"text-caption text-medium-emphasis"},es={class:"font-weight-medium"},ts={class:"text-right font-weight-medium"},as={key:1,class:"text-right"},os={key:2,class:"text-right"},ss={class:"font-weight-medium"},ls={key:3,class:"text-right"},rs={key:4,class:"text-right"},ns={key:5,class:"text-right"},is={class:"text-right"},ds={class:"text-right"},us={class:"text-center"},ms={class:"text-center"},cs={class:"text-caption"},ps={class:"text-caption text-medium-emphasis"},vs={class:"text-center"},_s={key:1,class:"text-medium-emphasis text-caption"},fs={class:"text-center py-12"},gs={class:"text-medium-emphasis"},ys={key:6},xs={class:"d-flex gap-2"},bs={class:"d-flex justify-center align-center py-8"},hs={key:2},ks={class:"d-flex align-center gap-2"},Ss={class:"font-weight-bold"},ws={class:"d-flex align-center gap-2"},Rs={class:"font-weight-bold"},Ps={class:"d-flex align-center gap-2"},Ds={class:"font-weight-bold"},zs={class:"font-weight-bold"},qs={class:"font-weight-bold"},Fs={class:"text-h4 font-weight-bold"},Cs={class:"text-h4 font-weight-bold"},Vs={key:0},As={class:"text-h6 mb-3"},$s={class:"font-weight-bold"},Ts={class:"font-weight-medium"},Ls={class:"text-right font-weight-medium"},Us={class:"text-right"},Ms={class:"text-center"},js={class:"text-center py-12"},Bs=rt({__name:"index",setup(R){const d=nt();Ct({title:"Analytics"});const{rankingData:m,loading:b,error:h,currentSortBy:I,formattedRanking:P,topThree:C,globalStats:q,loadRanking:Y}=ma(),{comparisonData:k,loading:S,error:$,loadComparison:M,getDiffColor:B,getDiffIcon:ae}=ca(),{domains:E,loadDomains:Q}=At(),{loadProviderRankings:x}=mt(),{reportData:$e,aggregatedData:Pe,loading:V,error:F,loadDashboardStats:U,loadAggregatedStats:pe,providerChartData:xe,topStatesChartData:le,speedByStateChartData:be,technologyChartData:De,topCards:he}=$t(),{formattedReports:Ee,loading:We,loadReports:Ie}=Vt(),{formattedRanking:ze,loading:Ge,error:Te,totalEntries:ke,filters:c,isAggregatedByProvider:u,loadRankingByState:O,updateFilters:ee,clearFilters:W}=va(),{states:re,loading:Se,error:oe,fetchStates:qe}=Tt(),H=A("ranking"),ne=A([]),ie=A(""),we=A(""),N=A(null),Z=A("all"),Fe=A(!1),L=A(null),Ke=[{value:"score",label:"Overall Score"},{value:"volume",label:"Total Requests"},{value:"success",label:"Success Rate"},{value:"speed",label:"Average Speed"}],Le=J(()=>!E.value||!Array.isArray(E.value)?[]:E.value.map(p=>({value:p.id,title:p.name})));it(()=>{Y("score"),Q(),x(),d.query.state_date_from&&ee({date_from:d.query.state_date_from}),d.query.state_date_to&&ee({date_to:d.query.state_date_to})});const z=p=>{Y(p)},se=p=>{Ne(`/domains/${p}/dashboard`)},Ye=(p,a)=>{Ne(`/domains/${p}/state/${a}/dashboard`)};J(()=>!N.value||!E.value||!Array.isArray(E.value)?null:E.value.find(p=>p.id===N.value));const He=J(()=>N.value?Ee.value.filter(p=>p.domain_id===N.value):[]),ct=J(()=>[...[{id:"all",reportDate:"All Reports Combined",statusColor:"primary",data_version:"Aggregated"}],...He.value]);te(N,async p=>{p&&(await Ie({domain_id:p,per_page:100}),await pe(p),Z.value="all",Fe.value=!1)}),te(Z,async p=>{N.value&&(p==="all"?(Fe.value=!1,await pe(N.value)):p&&(Fe.value=!1,await U(p)))});const at=J(()=>{if(Z.value==="all"&&Pe.value)return`Showing aggregated data from ${He.value.length} report(s)`;const p=He.value.find(a=>a.id===Z.value);return p&&Z.value!=="all"?`Report Date: ${p.reportDate} | Status: ${p.statusLabel}`:""}),pt=()=>{ne.value.length<2||(M(ne.value,void 0,ie.value||void 0,we.value||void 0),H.value="comparison")},vt=()=>{ne.value=[],ie.value="",we.value=""},Ue=p=>p>=1e6?(p/1e6).toFixed(1)+"M":p>=1e3?(p/1e3).toFixed(1)+"K":p.toString(),_t=p=>p.toFixed(1)+"%",ft=p=>p.toFixed(2),gt=J(()=>!re.value||!Array.isArray(re.value)?[]:re.value.map(p=>({value:p.id,title:`${p.name} (${p.code})`}))),Xe=p=>{if(!p||!re.value||!Array.isArray(re.value))return"";const a=re.value.find(v=>v.id===p);return a?`${a.name} (${a.code})`:""};te(H,async p=>{p==="state-ranking"&&re.value.length===0&&!Se.value&&await qe()}),te(L,async p=>{p&&(ee({state_id:p}),await O())}),te(()=>c.value.period,async()=>{L.value&&await O()}),te(()=>c.value.sort_by,async()=>{L.value&&await O()}),te(()=>c.value.provider_id,async()=>{L.value&&await O()}),te(()=>c.value.aggregate_by_provider,async()=>{L.value&&await O()}),te(()=>c.value.date_from,async()=>{L.value&&((c.value.date_from||c.value.date_to)&&ee({period:null}),Je(),await O())}),te(()=>c.value.date_to,async()=>{L.value&&((c.value.date_from||c.value.date_to)&&ee({period:null}),Je(),await O())});const Je=()=>{const p={...d.query};c.value.date_from?p.state_date_from=c.value.date_from:delete p.state_date_from,c.value.date_to?p.state_date_to=c.value.date_to:delete p.state_date_to,Ne({query:p},{replace:!0})},Me=p=>{if(!p)return"";try{return new Date(p).toLocaleDateString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit"})}catch{return p}},yt=p=>p===1?"warning":p===2?"grey":p===3?"orange":"default",xt=p=>p<=3?"mdi-medal":"mdi-numeric-"+p+"-circle",bt=p=>p&&{Fiber:"blue",Cable:"green",DSL:"orange",Mobile:"purple",Satellite:"red"}[p]||"grey";return(p,a)=>{const v=w("v-col"),D=w("v-row"),g=w("v-icon"),Ce=w("v-tab"),ht=w("v-tabs"),je=w("v-progress-circular"),de=w("v-alert"),ve=w("v-select"),X=w("v-card-text"),G=w("v-card"),me=w("apexchart"),_e=w("v-divider"),ue=w("v-btn"),j=w("v-chip"),Ze=w("v-table"),fe=w("v-list-item-title"),ce=w("v-list-item"),Qe=w("v-tooltip"),kt=w("v-switch"),Be=w("v-text-field"),St=w("v-form"),ot=w("v-card-title"),wt=w("v-list"),Rt=w("v-card-actions");return i(),_("div",null,[t(D,{class:"mb-4"},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>a[16]||(a[16]=[o("h1",{class:"text-h4 font-weight-bold"},"Analytics",-1),o("p",{class:"text-body-1 text-medium-emphasis"}," Global Address Search Analytics ",-1)])),_:1})]),_:1}),t(D,{class:"mb-4"},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(ht,{modelValue:H.value,"onUpdate:modelValue":a[0]||(a[0]=s=>H.value=s),color:"primary"},{default:e(()=>[t(Ce,{value:"ranking"},{default:e(()=>[t(g,{class:"mr-2"},{default:e(()=>a[17]||(a[17]=[r("mdi-trophy")])),_:1}),a[18]||(a[18]=r(" Domain Ranking "))]),_:1}),t(Ce,{value:"provider-ranking"},{default:e(()=>[t(g,{class:"mr-2"},{default:e(()=>a[19]||(a[19]=[r("mdi-account-network")])),_:1}),a[20]||(a[20]=r(" Provider Rankings "))]),_:1}),t(Ce,{value:"domain-dashboard"},{default:e(()=>[t(g,{class:"mr-2"},{default:e(()=>a[21]||(a[21]=[r("mdi-chart-box")])),_:1}),a[22]||(a[22]=r(" Domain Dashboard "))]),_:1}),t(Ce,{value:"state-ranking"},{default:e(()=>[t(g,{class:"mr-2"},{default:e(()=>a[23]||(a[23]=[r("mdi-map-marker")])),_:1}),a[24]||(a[24]=r(" State Ranking "))]),_:1}),t(Ce,{value:"comparison"},{default:e(()=>[t(g,{class:"mr-2"},{default:e(()=>a[25]||(a[25]=[r("mdi-compare")])),_:1}),a[26]||(a[26]=r(" Compare Domains "))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(b)?(i(),y(D,{key:0},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(T,null,{default:e(()=>[o("div",_a,[t(je,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):l(h)?(i(),y(D,{key:1},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(T,null,{default:e(()=>[t(de,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[r(n(l(h)),1)]),_:1})]),_:1})]),_:1})]),_:1})):f("",!0),H.value==="ranking"?(i(),_("div",fa,[t(D,{class:"mb-4"},{default:e(()=>[t(v,{cols:"12",class:"d-flex justify-end"},{default:e(()=>[t(ve,{"model-value":l(I),"onUpdate:modelValue":z,items:Ke,"item-title":"label","item-value":"value",label:"Sort By",variant:"outlined",density:"compact","hide-details":"",style:{width:"200px"},"prepend-inner-icon":"mdi-sort"},null,8,["model-value"])]),_:1})]),_:1}),l(m)?(i(),_("div",ga,[t(D,{class:"mb-4"},{default:e(()=>[t(v,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(G,{elevation:"2",class:"h-100"},{default:e(()=>[t(X,null,{default:e(()=>[o("div",ya,[a[28]||(a[28]=o("div",{class:"text-h6 text-medium-emphasis"},"Total Domains",-1)),t(g,{color:"primary",size:"32"},{default:e(()=>a[27]||(a[27]=[r("mdi-domain")])),_:1})]),o("div",xa,n(l(q).totalDomains),1),a[29]||(a[29]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Active domains ",-1))]),_:1})]),_:1})]),_:1}),t(v,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(G,{elevation:"2",class:"h-100"},{default:e(()=>[t(X,null,{default:e(()=>[o("div",ba,[a[31]||(a[31]=o("div",{class:"text-h6 text-medium-emphasis"},"Total Requests",-1)),t(g,{color:"success",size:"32"},{default:e(()=>a[30]||(a[30]=[r("mdi-chart-line")])),_:1})]),o("div",ha,n(Ue(l(q).totalRequests)),1),a[32]||(a[32]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Across all domains ",-1))]),_:1})]),_:1})]),_:1}),t(v,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(G,{elevation:"2",class:"h-100"},{default:e(()=>[t(X,null,{default:e(()=>[o("div",ka,[a[34]||(a[34]=o("div",{class:"text-h6 text-medium-emphasis"},"Avg Success Rate",-1)),t(g,{color:"info",size:"32"},{default:e(()=>a[33]||(a[33]=[r("mdi-check-circle")])),_:1})]),o("div",Sa,n(l(q).avgSuccessRate.toFixed(1))+"% ",1),a[35]||(a[35]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Average across domains ",-1))]),_:1})]),_:1})]),_:1}),t(v,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(G,{elevation:"2",class:"h-100"},{default:e(()=>[t(X,null,{default:e(()=>[o("div",wa,[a[37]||(a[37]=o("div",{class:"text-h6 text-medium-emphasis"},"Avg Speed",-1)),t(g,{color:"warning",size:"32"},{default:e(()=>a[36]||(a[36]=[r("mdi-speedometer")])),_:1})]),o("div",Ra,n(l(q).avgSpeed>0?l(q).avgSpeed.toFixed(1):"N/A"),1),a[38]||(a[38]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Mbps average ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(D,{class:"mb-4"},{default:e(()=>[t(v,{cols:"12",md:"6"},{default:e(()=>[t(T,null,{default:e(()=>[l(P).length>0?(i(),y(me,{key:0,type:"bar",height:"300",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Top Domains by Volume",align:"left",style:{fontSize:"16px",fontWeight:600}},plotOptions:{bar:{horizontal:!0,borderRadius:4,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(s){return Ue(s)},offsetX:30},xaxis:{categories:l(P).slice(0,5).map(s=>s.domain.name)},colors:["#1976d2"]},series:[{name:"Requests",data:l(P).slice(0,5).map(s=>s.metrics.total_requests)}]},null,8,["options","series"])):(i(),_("div",Pa,[t(g,{size:"64",color:"grey"},{default:e(()=>a[39]||(a[39]=[r("mdi-chart-bar")])),_:1}),a[40]||(a[40]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No data available",-1))]))]),_:1})]),_:1}),t(v,{cols:"12",md:"6"},{default:e(()=>[t(T,null,{default:e(()=>[l(P).length>0?(i(),y(me,{key:0,type:"donut",height:"300",options:{chart:{type:"donut",fontFamily:"inherit"},title:{text:"Success Rate Distribution",align:"left",style:{fontSize:"16px",fontWeight:600}},labels:["Excellent (â‰¥95%)","Good (90-95%)","Fair (80-90%)","Poor (<80%)"],colors:["#4caf50","#8bc34a","#ffc107","#f44336"],legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(s){return s.toFixed(0)+"%"}}},series:[l(P).filter(s=>s.metrics.success_rate>=95).length,l(P).filter(s=>s.metrics.success_rate>=90&&s.metrics.success_rate<95).length,l(P).filter(s=>s.metrics.success_rate>=80&&s.metrics.success_rate<90).length,l(P).filter(s=>s.metrics.success_rate<80).length]},null,8,["options","series"])):(i(),_("div",Da,[t(g,{size:"64",color:"grey"},{default:e(()=>a[41]||(a[41]=[r("mdi-chart-donut")])),_:1}),a[42]||(a[42]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No data available",-1))]))]),_:1})]),_:1})]),_:1}),t(D,{class:"mb-4"},{default:e(()=>[t(v,{cols:"12",md:"6"},{default:e(()=>[t(T,null,{default:e(()=>[l(P).length>0?(i(),y(me,{key:0,type:"bar",height:"300",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Reports per Domain",align:"left",style:{fontSize:"16px",fontWeight:600}},plotOptions:{bar:{borderRadius:4,columnWidth:"60%"}},dataLabels:{enabled:!1},xaxis:{categories:l(P).map(s=>s.domain.name),labels:{rotate:-45,style:{fontSize:"11px"}}},yaxis:{title:{text:"Number of Reports"}},colors:["#ff9800"]},series:[{name:"Reports",data:l(P).map(s=>s.coverage.total_reports)}]},null,8,["options","series"])):(i(),_("div",za,[t(g,{size:"64",color:"grey"},{default:e(()=>a[43]||(a[43]=[r("mdi-chart-bar")])),_:1}),a[44]||(a[44]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No data available",-1))]))]),_:1})]),_:1}),t(v,{cols:"12",md:"6"},{default:e(()=>[t(T,null,{default:e(()=>[l(P).filter(s=>s.metrics.avg_speed>0).length>0?(i(),y(me,{key:0,type:"bar",height:"300",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Average Speed by Domain",align:"left",style:{fontSize:"16px",fontWeight:600}},plotOptions:{bar:{borderRadius:4,columnWidth:"60%"}},dataLabels:{enabled:!0,formatter:function(s){return s.toFixed(0)+" Mbps"}},xaxis:{categories:l(P).filter(s=>s.metrics.avg_speed>0).map(s=>s.domain.name),labels:{rotate:-45,style:{fontSize:"11px"}}},yaxis:{title:{text:"Speed (Mbps)"}},colors:["#9c27b0"]},series:[{name:"Avg Speed",data:l(P).filter(s=>s.metrics.avg_speed>0).map(s=>s.metrics.avg_speed)}]},null,8,["options","series"])):(i(),_("div",qa,[t(g,{size:"64",color:"grey"},{default:e(()=>a[45]||(a[45]=[r("mdi-speedometer")])),_:1}),a[46]||(a[46]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No speed data available",-1))]))]),_:1})]),_:1})]),_:1}),l(C).length>=3?(i(),y(D,{key:0,class:"mb-4"},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(T,{title:"ðŸ† Top 3 Domains"},{default:e(()=>[t(D,null,{default:e(()=>[t(v,{cols:"12",md:"4",class:"order-md-1"},{default:e(()=>[t(G,{elevation:"4",class:"h-100",color:"grey-lighten-4"},{default:e(()=>[t(X,{class:"text-center"},{default:e(()=>[t(g,{size:"48",color:"grey"},{default:e(()=>a[47]||(a[47]=[r("mdi-medal")])),_:1}),a[52]||(a[52]=o("div",{class:"text-h5 font-weight-bold mt-2"},"#2",-1)),o("div",Fa,n(l(C)[1].domain.name),1),t(_e,{class:"my-3"}),o("div",Ca,[a[48]||(a[48]=o("span",{class:"text-caption"},"Score:",-1)),o("span",Va,n(l(C)[1].formattedScore),1)]),o("div",Aa,[a[49]||(a[49]=o("span",{class:"text-caption"},"Requests:",-1)),o("span",$a,n(l(C)[1].formattedRequests),1)]),o("div",Ta,[a[50]||(a[50]=o("span",{class:"text-caption"},"Success:",-1)),o("span",La,n(l(C)[1].formattedSuccessRate),1)]),t(ue,{color:"primary",variant:"tonal",size:"small",class:"mt-3",onClick:a[1]||(a[1]=s=>se(l(C)[1].domain.id))},{default:e(()=>a[51]||(a[51]=[r(" View Dashboard ")])),_:1})]),_:1})]),_:1})]),_:1}),t(v,{cols:"12",md:"4",class:"order-md-0"},{default:e(()=>[t(G,{elevation:"8",class:"h-100",color:"warning-lighten-4"},{default:e(()=>[t(X,{class:"text-center"},{default:e(()=>[t(g,{size:"64",color:"warning"},{default:e(()=>a[53]||(a[53]=[r("mdi-trophy")])),_:1}),a[58]||(a[58]=o("div",{class:"text-h4 font-weight-bold mt-2"},"ðŸ‘‘ #1",-1)),o("div",Ua,n(l(C)[0].domain.name),1),t(_e,{class:"my-3"}),o("div",Ma,[a[54]||(a[54]=o("span",{class:"text-caption"},"Score:",-1)),o("span",ja,n(l(C)[0].formattedScore),1)]),o("div",Ba,[a[55]||(a[55]=o("span",{class:"text-caption"},"Requests:",-1)),o("span",Oa,n(l(C)[0].formattedRequests),1)]),o("div",Na,[a[56]||(a[56]=o("span",{class:"text-caption"},"Success:",-1)),o("span",Ea,n(l(C)[0].formattedSuccessRate),1)]),t(ue,{color:"warning",variant:"flat",size:"small",class:"mt-3",onClick:a[2]||(a[2]=s=>se(l(C)[0].domain.id))},{default:e(()=>a[57]||(a[57]=[r(" View Dashboard ")])),_:1})]),_:1})]),_:1})]),_:1}),t(v,{cols:"12",md:"4",class:"order-md-2"},{default:e(()=>[t(G,{elevation:"4",class:"h-100",color:"orange-lighten-4"},{default:e(()=>[t(X,{class:"text-center"},{default:e(()=>[t(g,{size:"48",color:"orange"},{default:e(()=>a[59]||(a[59]=[r("mdi-medal")])),_:1}),a[64]||(a[64]=o("div",{class:"text-h5 font-weight-bold mt-2"},"#3",-1)),o("div",Wa,n(l(C)[2].domain.name),1),t(_e,{class:"my-3"}),o("div",Ia,[a[60]||(a[60]=o("span",{class:"text-caption"},"Score:",-1)),o("span",Ga,n(l(C)[2].formattedScore),1)]),o("div",Ka,[a[61]||(a[61]=o("span",{class:"text-caption"},"Requests:",-1)),o("span",Ya,n(l(C)[2].formattedRequests),1)]),o("div",Ha,[a[62]||(a[62]=o("span",{class:"text-caption"},"Success:",-1)),o("span",Xa,n(l(C)[2].formattedSuccessRate),1)]),t(ue,{color:"primary",variant:"tonal",size:"small",class:"mt-3",onClick:a[3]||(a[3]=s=>se(l(C)[2].domain.id))},{default:e(()=>a[63]||(a[63]=[r(" View Dashboard ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):f("",!0),t(D,null,{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(st,{title:"Complete Ranking"},{default:e(()=>[t(Ze,{"fixed-header":"",height:"600px"},{default:e(()=>[a[66]||(a[66]=o("thead",null,[o("tr",null,[o("th",{class:"text-center",style:{width:"80px"}},"Rank"),o("th",{class:"text-left"},"Domain"),o("th",{class:"text-right"},"Score"),o("th",{class:"text-right"},"Total Requests"),o("th",{class:"text-right"},"Success Rate"),o("th",{class:"text-right"},"Avg Speed"),o("th",{class:"text-center"},"Providers"),o("th",{class:"text-center"},"States"),o("th",{class:"text-center"},"Reports"),o("th",{class:"text-center"},"Period"),o("th",{class:"text-center"},"Actions")])],-1)),o("tbody",null,[(i(!0),_(ge,null,Re(l(P),s=>(i(),_("tr",{key:s.domain.id},[o("td",Ja,[t(j,{color:yt(s.rank),variant:"flat",size:"small"},{default:e(()=>[s.rank<=3?(i(),y(g,{key:0,size:"small",class:"mr-1"},{default:e(()=>[r(n(xt(s.rank)),1)]),_:2},1024)):f("",!0),r(" "+n(s.rank),1)]),_:2},1032,["color"])]),o("td",null,[o("div",Za,n(s.domain.name),1),o("div",Qa,n(s.domain.slug),1)]),o("td",eo,[t(j,{color:"primary",variant:"tonal",size:"small"},{default:e(()=>[r(n(s.formattedScore),1)]),_:2},1024)]),o("td",to,n(s.formattedRequests),1),o("td",ao,[t(j,{color:s.metrics.success_rate>=90?"success":s.metrics.success_rate>=70?"warning":"error",variant:"tonal",size:"small"},{default:e(()=>[r(n(s.formattedSuccessRate),1)]),_:2},1032,["color"])]),o("td",oo,n(s.formattedSpeed),1),o("td",so,[t(j,{size:"small",variant:"outlined"},{default:e(()=>[r(n(s.metrics.unique_providers),1)]),_:2},1024)]),o("td",lo,[t(j,{size:"small",variant:"outlined"},{default:e(()=>[r(n(s.metrics.unique_states),1)]),_:2},1024)]),o("td",ro,n(s.coverage.total_reports),1),o("td",no,[o("div",io,n(s.formattedPeriod),1),o("div",uo,n(s.coverage.days_covered)+" days",1)]),o("td",mo,[t(ue,{icon:"",size:"small",variant:"text",color:"primary",onClick:K=>se(s.domain.id),title:"View Dashboard"},{default:e(()=>[t(g,null,{default:e(()=>a[65]||(a[65]=[r("mdi-chart-box")])),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:1}),l(P).length===0?(i(),_("div",co,[t(g,{size:"64",color:"grey"},{default:e(()=>a[67]||(a[67]=[r("mdi-chart-box-outline")])),_:1}),a[68]||(a[68]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No ranking data available",-1))])):f("",!0)]),_:1})]),_:1})]),_:1})])):f("",!0)])):f("",!0),H.value==="provider-ranking"?(i(),_("div",po,[t(ua)])):f("",!0),H.value==="domain-dashboard"?(i(),_("div",vo,[t(D,{class:"mb-4"},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(T,null,{default:e(()=>[t(D,null,{default:e(()=>[t(v,{cols:"12",md:"6"},{default:e(()=>[t(ve,{modelValue:N.value,"onUpdate:modelValue":a[4]||(a[4]=s=>N.value=s),items:Le.value,label:"Select Domain",variant:"outlined","prepend-inner-icon":"mdi-domain",hint:"Choose a domain to view its detailed dashboard","persistent-hint":"",clearable:""},{item:e(({props:s,item:K})=>[t(ce,et(tt(s)),{prepend:e(()=>[t(g,{color:"primary"},{default:e(()=>a[69]||(a[69]=[r("mdi-domain")])),_:1})]),default:e(()=>[t(fe,null,{default:e(()=>[r(n(K.raw.title),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1}),N.value?(i(),y(v,{key:0,cols:"12",md:"6"},{default:e(()=>[t(ve,{modelValue:Z.value,"onUpdate:modelValue":a[5]||(a[5]=s=>Z.value=s),items:ct.value,"item-title":"reportDate","item-value":"id",label:"Select Report",variant:"outlined",density:"compact",loading:l(We),"prepend-inner-icon":"mdi-calendar"},{item:e(({props:s,item:K})=>[t(ce,et(tt(s)),{prepend:e(()=>[t(j,{color:K.raw.statusColor,size:"x-small",variant:"tonal"},null,8,["color"])]),subtitle:e(()=>[K.raw.id!=="all"?(i(),_("span",_o,"ID: "+n(K.raw.id)+" | Version: "+n(K.raw.data_version),1)):(i(),_("span",fo,"Combined data from all reports"))]),_:2},1040)]),_:1},8,["modelValue","items","loading"])]),_:1})):f("",!0)]),_:1}),N.value&&at.value?(i(),y(D,{key:0},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(de,{color:"info",variant:"tonal",density:"compact"},{default:e(()=>[t(g,{start:""},{default:e(()=>a[70]||(a[70]=[r("mdi-information")])),_:1}),r(" "+n(at.value),1)]),_:1})]),_:1})]),_:1})):f("",!0)]),_:1})]),_:1})]),_:1}),N.value?l(V)?(i(),y(D,{key:1},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(T,null,{default:e(()=>[o("div",yo,[t(je,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):l(F)?(i(),y(D,{key:2},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(T,null,{default:e(()=>[t(de,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[r(n(l(F)),1)]),_:1})]),_:1})]),_:1})]),_:1})):N.value&&(l($e)||l(Pe))?(i(),_("div",xo,[t(D,{class:"mb-4"},{default:e(()=>[t(v,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(G,{elevation:"2",class:"h-100"},{default:e(()=>[t(X,null,{default:e(()=>[o("div",bo,[a[75]||(a[75]=o("div",{class:"text-h6 text-medium-emphasis"},"Total Requests",-1)),t(g,{color:"primary",size:"32"},{default:e(()=>a[74]||(a[74]=[r("mdi-chart-line")])),_:1})]),o("div",ho,n(Ue(l(he).totalRequests)),1),a[76]||(a[76]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," All time requests ",-1))]),_:1})]),_:1})]),_:1}),t(v,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(G,{elevation:"2",class:"h-100"},{default:e(()=>[t(X,null,{default:e(()=>[o("div",ko,[a[78]||(a[78]=o("div",{class:"text-h6 text-medium-emphasis"},"Success Rate",-1)),t(g,{color:"success",size:"32"},{default:e(()=>a[77]||(a[77]=[r("mdi-check-circle")])),_:1})]),o("div",So,n(_t(l(he).successRate)),1),a[79]||(a[79]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Successful requests ",-1))]),_:1})]),_:1})]),_:1}),t(v,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(G,{elevation:"2",class:"h-100"},{default:e(()=>[t(X,null,{default:e(()=>[o("div",wo,[a[81]||(a[81]=o("div",{class:"text-h6 text-medium-emphasis"},"Daily Average",-1)),t(g,{color:"info",size:"32"},{default:e(()=>a[80]||(a[80]=[r("mdi-calendar-today")])),_:1})]),o("div",Ro,n(ft(l(he).dailyAverage)),1),a[82]||(a[82]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Average per day ",-1))]),_:1})]),_:1})]),_:1}),t(v,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(G,{elevation:"2",class:"h-100"},{default:e(()=>[t(X,null,{default:e(()=>[o("div",Po,[a[84]||(a[84]=o("div",{class:"text-h6 text-medium-emphasis"},"Unique Providers",-1)),t(g,{color:"warning",size:"32"},{default:e(()=>a[83]||(a[83]=[r("mdi-domain")])),_:1})]),o("div",Do,n(l(he).uniqueProviders),1),a[85]||(a[85]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Different providers ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(D,{class:"mb-4"},{default:e(()=>[t(v,{cols:"12",md:"6"},{default:e(()=>[t(T,null,{default:e(()=>[l(xe).series.length>0?(i(),_("div",zo,[t(me,{type:"donut",height:"350",options:{chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Provider Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:l(xe).labels,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(s){return s.toFixed(1)+"%"}}},series:l(xe).series},null,8,["options","series"])])):(i(),_("div",qo,[t(g,{size:"64",color:"grey"},{default:e(()=>a[86]||(a[86]=[r("mdi-chart-donut")])),_:1}),a[87]||(a[87]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No provider data available",-1))]))]),_:1})]),_:1}),t(v,{cols:"12",md:"6"},{default:e(()=>[t(T,null,{default:e(()=>[l(le).data.length>0?(i(),_("div",Fo,[t(me,{type:"bar",height:"350",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Top States by Requests",align:"left",style:{fontSize:"18px",fontWeight:600}},plotOptions:{bar:{horizontal:!0,borderRadius:4,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(s){return s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":s.toString()},offsetX:30},xaxis:{categories:l(le).categories},colors:["#1976d2"]},series:[{name:"Requests",data:l(le).data}]},null,8,["options","series"])])):(i(),_("div",Co,[t(g,{size:"64",color:"grey"},{default:e(()=>a[88]||(a[88]=[r("mdi-chart-bar")])),_:1}),a[89]||(a[89]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No state data available",-1))]))]),_:1})]),_:1})]),_:1}),t(D,null,{default:e(()=>[t(v,{cols:"12",md:"6"},{default:e(()=>[t(T,null,{default:e(()=>[l(be).data.length>0?(i(),_("div",Vo,[t(me,{type:"bar",height:"350",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Average Speed by State",align:"left",style:{fontSize:"18px",fontWeight:600}},plotOptions:{bar:{horizontal:!1,borderRadius:8,columnWidth:"55%",distributed:!1}},dataLabels:{enabled:!1},xaxis:{categories:l(be).categories,labels:{style:{fontSize:"12px"}}},yaxis:{title:{text:"Average Speed (Mbps)"}},colors:["#4caf50"],grid:{show:!0,borderColor:"#f0f0f0"}},series:[{name:"Avg Speed (Mbps)",data:l(be).data}]},null,8,["options","series"])])):(i(),_("div",Ao,[t(g,{size:"64",color:"grey"},{default:e(()=>a[90]||(a[90]=[r("mdi-speedometer")])),_:1}),a[91]||(a[91]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No speed data available",-1))]))]),_:1})]),_:1}),t(v,{cols:"12",md:"6"},{default:e(()=>[t(T,null,{default:e(()=>[l(De).series.length>0?(i(),_("div",$o,[t(me,{type:"donut",height:"350",options:{chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Technology Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:l(De).labels,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(s){return s.toFixed(1)+"%"}}},series:l(De).series},null,8,["options","series"])])):(i(),_("div",To,[t(g,{size:"64",color:"grey"},{default:e(()=>a[92]||(a[92]=[r("mdi-chart-donut")])),_:1}),a[93]||(a[93]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No technology data available",-1))]))]),_:1})]),_:1})]),_:1})])):f("",!0):(i(),y(D,{key:0},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(T,null,{default:e(()=>[o("div",go,[t(g,{size:"80",color:"grey"},{default:e(()=>a[71]||(a[71]=[r("mdi-chart-box-outline")])),_:1}),a[72]||(a[72]=o("h3",{class:"text-h5 mt-4 mb-2"},"Select a domain",-1)),a[73]||(a[73]=o("p",{class:"text-medium-emphasis"}," Choose a domain from the dropdown above to view its detailed dashboard ",-1))])]),_:1})]),_:1})]),_:1}))])):f("",!0),H.value==="state-ranking"?(i(),_("div",Lo,[t(D,{class:"mb-4"},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(T,{title:"State Ranking Filters"},{default:e(()=>[t(D,null,{default:e(()=>[t(v,{cols:"12",md:"4"},{default:e(()=>[t(ve,{modelValue:L.value,"onUpdate:modelValue":a[6]||(a[6]=s=>L.value=s),items:gt.value,label:"Select State",variant:"outlined","prepend-inner-icon":"mdi-map-marker",hint:"Select a state to view provider rankings","persistent-hint":"",clearable:"",loading:l(Se),disabled:l(Se)},{item:e(({props:s,item:K})=>[t(ce,et(tt(s)),{prepend:e(()=>[t(g,{color:"primary"},{default:e(()=>a[94]||(a[94]=[r("mdi-map-marker")])),_:1})]),default:e(()=>[t(fe,null,{default:e(()=>[r(n(K.raw.title),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"]),l(oe)?(i(),y(de,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:e(()=>[r(n(l(oe)),1)]),_:1})):f("",!0)]),_:1}),L.value?(i(),y(v,{key:0,cols:"12",md:"3"},{default:e(()=>[t(ve,{modelValue:l(c).period,"onUpdate:modelValue":a[7]||(a[7]=s=>l(c).period=s),items:[{value:"today",title:"Today"},{value:"yesterday",title:"Yesterday"},{value:"last_week",title:"Last Week"},{value:"last_month",title:"Last Month"},{value:"last_year",title:"Last Year"},{value:"all_time",title:"All Time"}],label:"Period",variant:"outlined","prepend-inner-icon":"mdi-calendar"},null,8,["modelValue"])]),_:1})):f("",!0),L.value?(i(),y(v,{key:1,cols:"12",md:"2"},{default:e(()=>[t(ve,{modelValue:l(c).sort_by,"onUpdate:modelValue":a[8]||(a[8]=s=>l(c).sort_by=s),items:[{value:"total_requests",title:"Total Requests"},{value:"success_rate",title:"Success Rate"},{value:"avg_speed",title:"Avg Speed"},{value:"total_reports",title:"Total Reports"}],label:"Sort By",variant:"outlined","prepend-inner-icon":"mdi-sort",density:"compact"},null,8,["modelValue"])]),_:1})):f("",!0),L.value?(i(),y(v,{key:2,cols:"12",md:"2"},{default:e(()=>[t(kt,{modelValue:l(c).aggregate_by_provider,"onUpdate:modelValue":a[9]||(a[9]=s=>l(c).aggregate_by_provider=s),label:"Aggregate by Provider",color:"primary",density:"compact","hide-details":""},{prepend:e(()=>[t(Qe,{text:"When enabled, combines all domains for a provider into one entry."},{activator:e(({props:s})=>[t(g,Ae(s,{size:"small"}),{default:e(()=>a[95]||(a[95]=[r("mdi-information-outline")])),_:2},1040)]),_:1})]),_:1},8,["modelValue"])]),_:1})):f("",!0),L.value?(i(),y(v,{key:3,cols:"12",md:"2"},{default:e(()=>[t(ue,{color:"primary",variant:"outlined",block:"",onClick:a[10]||(a[10]=s=>{l(W)(),Je(),l(O)()})},{default:e(()=>a[96]||(a[96]=[r(" Clear Filters ")])),_:1})]),_:1})):f("",!0)]),_:1}),L.value?(i(),y(D,{key:0,class:"mt-2"},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(G,{variant:"outlined",class:"pa-3"},{default:e(()=>[o("div",Uo,[t(g,{size:"small",class:"mr-1"},{default:e(()=>a[97]||(a[97]=[r("mdi-calendar-range")])),_:1}),a[98]||(a[98]=r(" Custom Date Range (Optional) "))]),t(D,null,{default:e(()=>[t(v,{cols:"12",sm:"6",md:"4"},{default:e(()=>[t(Be,{modelValue:l(c).date_from,"onUpdate:modelValue":a[11]||(a[11]=s=>l(c).date_from=s),label:"Data de InÃ­cio",type:"date",variant:"outlined",density:"compact",clearable:"","prepend-inner-icon":"mdi-calendar-start"},null,8,["modelValue"])]),_:1}),t(v,{cols:"12",sm:"6",md:"4"},{default:e(()=>[t(Be,{modelValue:l(c).date_to,"onUpdate:modelValue":a[12]||(a[12]=s=>l(c).date_to=s),label:"Data de Fim",type:"date",variant:"outlined",density:"compact",clearable:"","prepend-inner-icon":"mdi-calendar-end"},null,8,["modelValue"])]),_:1}),t(v,{cols:"12",md:"4",class:"d-flex align-center"},{default:e(()=>[l(c).date_from||l(c).date_to?(i(),y(de,{key:0,type:"info",variant:"tonal",density:"compact",class:"mb-0"},{default:e(()=>[o("div",Mo,[t(g,{size:"small",class:"mr-1"},{default:e(()=>a[99]||(a[99]=[r("mdi-information")])),_:1}),l(c).date_from&&l(c).date_to?(i(),_("span",jo," PerÃ­odo: "+n(Me(l(c).date_from))+" atÃ© "+n(Me(l(c).date_to)),1)):l(c).date_from?(i(),_("span",Bo," A partir de: "+n(Me(l(c).date_from)),1)):l(c).date_to?(i(),_("span",Oo," AtÃ©: "+n(Me(l(c).date_to)),1)):f("",!0)])]),_:1})):f("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):f("",!0)]),_:1})]),_:1})]),_:1}),L.value?l(Ge)?(i(),y(D,{key:1},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(T,null,{default:e(()=>[o("div",Eo,[t(je,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):l(Te)?(i(),y(D,{key:2},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(T,null,{default:e(()=>[t(de,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[r(n(l(Te)),1)]),_:1})]),_:1})]),_:1})]),_:1})):L.value&&l(ze).length>0?(i(),y(D,{key:3},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(T,{title:`Provider Rankings - ${Xe(L.value)}`},{default:e(()=>[t(de,{type:"info",variant:"tonal",class:"mb-4",density:"compact"},{default:e(()=>[t(g,{start:""},{default:e(()=>a[103]||(a[103]=[r("mdi-information")])),_:1}),r(" Showing "+n(l(ke))+" "+n(l(u)?"provider":"domain-provider")+" ranking(s) for "+n(Xe(L.value))+" ",1),l(u)?(i(),_("span",Wo,[t(j,{size:"x-small",color:"primary",variant:"tonal"},{default:e(()=>a[104]||(a[104]=[r("Aggregated by Provider")])),_:1})])):f("",!0)]),_:1}),t(Ze,null,{default:e(()=>[o("thead",null,[o("tr",null,[a[106]||(a[106]=o("th",{class:"text-left"},"Rank",-1)),l(u)?f("",!0):(i(),_("th",Io,"Domain")),a[107]||(a[107]=o("th",{class:"text-left"},"Provider",-1)),a[108]||(a[108]=o("th",{class:"text-right"},"Total Requests",-1)),l(u)?f("",!0):(i(),_("th",Go,"% of Domain")),l(u)?f("",!0):(i(),_("th",Ko,"Provider Total")),l(u)?f("",!0):(i(),_("th",Yo,a[105]||(a[105]=[o("div",null,"% of Provider",-1),o("div",{class:"text-caption text-medium-emphasis"},"(row/provider)",-1)]))),l(u)?(i(),_("th",Ho,"% of State")):f("",!0),l(u)?(i(),_("th",Xo,"Domains")):f("",!0),a[109]||(a[109]=o("th",{class:"text-right"},"Success Rate",-1)),a[110]||(a[110]=o("th",{class:"text-right"},"Avg Speed",-1)),a[111]||(a[111]=o("th",{class:"text-center"},"Reports",-1)),a[112]||(a[112]=o("th",{class:"text-center"},"Period",-1)),a[113]||(a[113]=o("th",{class:"text-center"},"Actions",-1))])]),o("tbody",null,[(i(!0),_(ge,null,Re(l(ze),(s,K)=>(i(),_("tr",{key:l(u)?`provider-${s.provider_id}`:`domain-${"domain_id"in s?s.domain_id:K}-provider-${s.provider_id}`},[o("td",null,[t(j,{color:s.rank<=3?"primary":"default",variant:"flat",size:"small"},{default:e(()=>[s.rank===1?(i(),y(g,{key:0,size:"small",class:"mr-1"},{default:e(()=>a[114]||(a[114]=[r("mdi-trophy")])),_:1})):s.rank===2?(i(),y(g,{key:1,size:"small",class:"mr-1"},{default:e(()=>a[115]||(a[115]=[r("mdi-medal")])),_:1})):s.rank===3?(i(),y(g,{key:2,size:"small",class:"mr-1"},{default:e(()=>a[116]||(a[116]=[r("mdi-medal-outline")])),_:1})):f("",!0),r(" "+n(s.rank),1)]),_:2},1032,["color"])]),!l(u)&&"domain_name"in s?(i(),_("td",Jo,[o("div",Zo,n(s.domain_name),1),o("div",Qo,n(s.domain_slug),1)])):f("",!0),o("td",null,[o("div",es,n(s.provider_name),1),"technology"in s&&s.technology?(i(),y(j,{key:0,size:"x-small",variant:"outlined",class:"mt-1"},{default:e(()=>[r(n(s.technology),1)]),_:2},1024)):f("",!0)]),o("td",ts,n(s.formattedRequests),1),!l(u)&&"formattedPercentage"in s?(i(),_("td",as,[t(j,{color:"primary",variant:"tonal",size:"small"},{default:e(()=>[r(n(s.formattedPercentage),1)]),_:2},1024)])):f("",!0),!l(u)&&"formattedProviderTotalRequests"in s?(i(),_("td",os,[o("div",ss,n(s.formattedProviderTotalRequests),1),a[117]||(a[117]=o("div",{class:"text-caption text-medium-emphasis"},"All domains",-1))])):f("",!0),!l(u)&&"formattedPercentageOfProvider"in s?(i(),_("td",ls,[t(Qe,{text:"Percentage that this domain+provider row represents of the provider's total in this state"},{activator:e(({props:Ve})=>[t(j,Ae({ref_for:!0},Ve,{color:"info",variant:"tonal",size:"small"}),{default:e(()=>[r(n(s.formattedPercentageOfProvider),1)]),_:2},1040)]),_:2},1024),a[118]||(a[118]=o("div",{class:"text-caption text-medium-emphasis mt-1"},"of provider",-1))])):f("",!0),l(u)&&"formattedPercentage"in s?(i(),_("td",rs,[t(j,{color:"primary",variant:"tonal",size:"small"},{default:e(()=>[r(n(s.formattedPercentage),1)]),_:2},1024)])):f("",!0),l(u)&&"formattedDomains"in s?(i(),_("td",ns,[t(Qe,{text:s.formattedDomains||""},{activator:e(({props:Ve})=>[t(j,Ae({ref_for:!0},Ve,{color:"info",variant:"tonal",size:"small"}),{default:e(()=>[r(n("domainsCount"in s?s.domainsCount:0)+" domain(s) ",1)]),_:2},1040)]),_:2},1032,["text"])])):f("",!0),o("td",is,[t(j,{color:s.avg_success_rate>=90?"success":s.avg_success_rate>=70?"warning":"error",variant:"tonal",size:"small"},{default:e(()=>[r(n(s.formattedSuccessRate),1)]),_:2},1032,["color"])]),o("td",ds,n(s.formattedSpeed),1),o("td",us,[t(j,{size:"small",variant:"outlined"},{default:e(()=>[r(n(s.total_reports),1)]),_:2},1024)]),o("td",ms,[o("div",cs,n(s.period_start)+" to "+n(s.period_end),1),o("div",ps,n(s.days_covered)+" days",1)]),o("td",vs,[!l(u)&&"domain_id"in s?(i(),y(ue,{key:0,icon:"",size:"small",variant:"text",color:"primary",onClick:Ve=>Ye(s.domain_id,L.value),title:"View Domain State Dashboard"},{default:e(()=>[t(g,null,{default:e(()=>a[119]||(a[119]=[r("mdi-eye")])),_:1})]),_:2},1032,["onClick"])):(i(),_("span",_s,"-"))])]))),128))])]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})):L.value&&l(ze).length===0?(i(),y(D,{key:4},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(T,null,{default:e(()=>[o("div",fs,[t(g,{size:"64",color:"grey"},{default:e(()=>a[120]||(a[120]=[r("mdi-database-off")])),_:1}),a[121]||(a[121]=o("h3",{class:"text-h6 mt-4 mb-2"},"No Data Available",-1)),o("p",gs," No provider rankings found for "+n(Xe(L.value))+" with the selected filters. ",1)])]),_:1})]),_:1})]),_:1})):f("",!0):(i(),y(D,{key:0},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(T,null,{default:e(()=>[o("div",No,[t(g,{size:"80",color:"grey"},{default:e(()=>a[100]||(a[100]=[r("mdi-map-marker-outline")])),_:1}),a[101]||(a[101]=o("h3",{class:"text-h5 mt-4 mb-2"},"Select a State",-1)),a[102]||(a[102]=o("p",{class:"text-medium-emphasis"}," Choose a state from the dropdown above to view provider rankings for that state ",-1))])]),_:1})]),_:1})]),_:1}))])):f("",!0),H.value==="comparison"?(i(),_("div",ys,[t(D,{class:"mb-6"},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(st,{title:"Select Domains to Compare"},{default:e(()=>[t(St,{onSubmit:qt(pt,["prevent"])},{default:e(()=>[t(D,null,{default:e(()=>[t(v,{cols:"12",md:"6"},{default:e(()=>[t(ve,{modelValue:ne.value,"onUpdate:modelValue":a[13]||(a[13]=s=>ne.value=s),items:Le.value,label:"Select Domains (minimum 2)",variant:"outlined",multiple:"",chips:"","closable-chips":"",hint:"The first domain will be used as the baseline","persistent-hint":""},null,8,["modelValue","items"])]),_:1}),t(v,{cols:"12",md:"3"},{default:e(()=>[t(Be,{modelValue:ie.value,"onUpdate:modelValue":a[14]||(a[14]=s=>ie.value=s),label:"From Date (Optional)",type:"date",variant:"outlined",clearable:""},null,8,["modelValue"])]),_:1}),t(v,{cols:"12",md:"3"},{default:e(()=>[t(Be,{modelValue:we.value,"onUpdate:modelValue":a[15]||(a[15]=s=>we.value=s),label:"To Date (Optional)",type:"date",variant:"outlined",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(D,null,{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[o("div",xs,[t(ue,{type:"submit",color:"primary","prepend-icon":"mdi-compare",disabled:ne.value.length<2,loading:l(S)},{default:e(()=>a[122]||(a[122]=[r(" Compare Domains ")])),_:1},8,["disabled","loading"]),t(ue,{variant:"outlined",onClick:vt,"prepend-icon":"mdi-refresh"},{default:e(()=>a[123]||(a[123]=[r(" Clear ")])),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(S)?(i(),y(D,{key:0},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(T,null,{default:e(()=>[o("div",bs,[t(je,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):l($)?(i(),y(D,{key:1},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(T,null,{default:e(()=>[t(de,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[r(n(l($)),1)]),_:1})]),_:1})]),_:1})]),_:1})):l(k)&&l(k).domains?(i(),_("div",hs,[t(D,null,{default:e(()=>[(i(!0),_(ge,null,Re(l(k).domains,(s,K)=>(i(),y(v,{key:s.domain.id,cols:"12",md:l(k).domains.length===2?6:l(k).domains.length===3?4:3},{default:e(()=>[t(G,{elevation:"4",class:Ft([{"border-primary":K===0},"h-100"])},{default:e(()=>[t(ot,{class:"d-flex align-center justify-space-between"},{default:e(()=>[o("div",null,[r(n(s.domain.name)+" ",1),K===0?(i(),y(j,{key:0,color:"primary",size:"x-small",class:"ml-2"},{default:e(()=>a[124]||(a[124]=[r(" Baseline ")])),_:1})):f("",!0)])]),_:2},1024),t(X,null,{default:e(()=>[t(wt,{density:"compact"},{default:e(()=>[t(ce,null,{prepend:e(()=>[t(g,{color:"primary"},{default:e(()=>a[125]||(a[125]=[r("mdi-chart-line")])),_:1})]),append:e(()=>[o("div",ks,[o("span",Ss,n(Ue(s.metrics.total_requests)),1),s.comparison?(i(),y(j,{key:0,color:l(B)(s.comparison.requests_diff),size:"x-small",variant:"tonal"},{default:e(()=>[t(g,{size:"x-small"},{default:e(()=>[r(n(l(ae)(s.comparison.requests_diff)),1)]),_:2},1024),r(" "+n(s.comparison.requests_diff_label),1)]),_:2},1032,["color"])):f("",!0)])]),default:e(()=>[t(fe,null,{default:e(()=>a[126]||(a[126]=[r("Total Requests")])),_:1})]),_:2},1024),t(_e,{class:"my-2"}),t(ce,null,{prepend:e(()=>[t(g,{color:"success"},{default:e(()=>a[127]||(a[127]=[r("mdi-check-circle")])),_:1})]),append:e(()=>[o("div",ws,[o("span",Rs,n(s.metrics.success_rate.toFixed(1))+"%",1),s.comparison?(i(),y(j,{key:0,color:l(B)(s.comparison.success_diff),size:"x-small",variant:"tonal"},{default:e(()=>[t(g,{size:"x-small"},{default:e(()=>[r(n(l(ae)(s.comparison.success_diff)),1)]),_:2},1024),r(" "+n(s.comparison.success_diff_label),1)]),_:2},1032,["color"])):f("",!0)])]),default:e(()=>[t(fe,null,{default:e(()=>a[128]||(a[128]=[r("Success Rate")])),_:1})]),_:2},1024),t(_e,{class:"my-2"}),t(ce,null,{prepend:e(()=>[t(g,{color:"info"},{default:e(()=>a[129]||(a[129]=[r("mdi-speedometer")])),_:1})]),append:e(()=>[o("div",Ps,[o("span",Ds,n(s.metrics.avg_speed.toFixed(1))+" Mbps",1),s.comparison?(i(),y(j,{key:0,color:l(B)(s.comparison.speed_diff),size:"x-small",variant:"tonal"},{default:e(()=>[t(g,{size:"x-small"},{default:e(()=>[r(n(l(ae)(s.comparison.speed_diff)),1)]),_:2},1024),r(" "+n(s.comparison.speed_diff_label),1)]),_:2},1032,["color"])):f("",!0)])]),default:e(()=>[t(fe,null,{default:e(()=>a[130]||(a[130]=[r("Average Speed")])),_:1})]),_:2},1024),s.metrics.unique_providers?(i(),y(_e,{key:0,class:"my-2"})):f("",!0),s.metrics.unique_providers?(i(),y(ce,{key:1},{prepend:e(()=>[t(g,{color:"warning"},{default:e(()=>a[131]||(a[131]=[r("mdi-domain")])),_:1})]),append:e(()=>[o("span",zs,n(s.metrics.unique_providers),1)]),default:e(()=>[t(fe,null,{default:e(()=>a[132]||(a[132]=[r("Unique Providers")])),_:1})]),_:2},1024)):f("",!0),s.metrics.unique_states?(i(),y(_e,{key:2,class:"my-2"})):f("",!0),s.metrics.unique_states?(i(),y(ce,{key:3},{prepend:e(()=>[t(g,{color:"secondary"},{default:e(()=>a[133]||(a[133]=[r("mdi-map-marker")])),_:1})]),append:e(()=>[o("span",qs,n(s.metrics.unique_states),1)]),default:e(()=>[t(fe,null,{default:e(()=>a[134]||(a[134]=[r("Unique States")])),_:1})]),_:2},1024)):f("",!0)]),_:2},1024)]),_:2},1024),t(Rt,null,{default:e(()=>[t(ue,{variant:"text",color:"primary",onClick:Ve=>se(s.domain.id),"prepend-icon":"mdi-chart-box",block:""},{default:e(()=>a[135]||(a[135]=[r(" View Dashboard ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1032,["md"]))),128))]),_:1}),l(k).provider_data?(i(),y(D,{key:0},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(G,{elevation:"4"},{default:e(()=>[t(ot,{class:"d-flex align-center"},{default:e(()=>[t(g,{start:"",color:"primary"},{default:e(()=>a[136]||(a[136]=[r("mdi-account-network")])),_:1}),a[137]||(a[137]=r(" Provider Overview "))]),_:1}),t(X,null,{default:e(()=>[t(D,{class:"mb-4"},{default:e(()=>[t(v,{cols:"12",md:"6"},{default:e(()=>[t(G,{variant:"tonal",color:"primary"},{default:e(()=>[t(X,{class:"text-center"},{default:e(()=>[o("div",Fs,n(l(k).provider_data.unique_providers_count),1),a[138]||(a[138]=o("div",{class:"text-caption"},"Total Unique Providers",-1))]),_:1})]),_:1})]),_:1}),t(v,{cols:"12",md:"6"},{default:e(()=>[t(G,{variant:"tonal",color:"primary"},{default:e(()=>[t(X,{class:"text-center"},{default:e(()=>[o("div",Cs,n(l(k).provider_data.common_providers.length),1),a[139]||(a[139]=o("div",{class:"text-caption"},"Common Providers (in all domains)",-1))]),_:1})]),_:1})]),_:1})]),_:1}),l(k).provider_data.common_providers.length>0?(i(),_("div",Vs,[o("h3",As,[t(g,{start:"",size:"small"},{default:e(()=>a[140]||(a[140]=[r("mdi-chart-bar")])),_:1}),a[141]||(a[141]=r(" All Providers in Selected Domains "))]),t(de,{color:"primary",variant:"tonal",density:"compact",class:"mb-3"},{default:e(()=>[r(" Aggregated data for all providers across "+n(l(k).total_compared)+" selected domains ",1)]),_:1}),t(Ze,{density:"compact"},{default:e(()=>[a[142]||(a[142]=o("thead",null,[o("tr",null,[o("th",{class:"text-left"},"Rank"),o("th",{class:"text-left"},"Provider"),o("th",{class:"text-left"},"Technology"),o("th",{class:"text-right"},"Total Requests"),o("th",{class:"text-right"},"Avg Speed"),o("th",{class:"text-center"},"Appearances")])],-1)),o("tbody",null,[(i(!0),_(ge,null,Re(l(k).provider_data.common_providers,(s,K)=>(i(),_("tr",{key:s.provider_id},[o("td",$s,"#"+n(K+1),1),o("td",Ts,n(s.provider_name),1),o("td",null,[t(j,{size:"small",variant:"tonal",color:bt(s.technology)},{default:e(()=>[r(n(s.technology),1)]),_:2},1032,["color"])]),o("td",Ls,n(s.total_requests.toLocaleString()),1),o("td",Us,n(s.avg_speed.toFixed(0))+" ms",1),o("td",Ms,[t(j,{size:"small",variant:"tonal",color:s.appearances>=l(k).total_compared*20?"success":"info"},{default:e(()=>[r(n(s.appearances)+" reports ",1)]),_:2},1032,["color"])])]))),128))])]),_:1})])):f("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):f("",!0)])):!l(S)&&!l($)?(i(),y(D,{key:3},{default:e(()=>[t(v,{cols:"12"},{default:e(()=>[t(T,null,{default:e(()=>[o("div",js,[t(g,{size:"80",color:"grey"},{default:e(()=>a[143]||(a[143]=[r("mdi-compare")])),_:1}),a[144]||(a[144]=o("h3",{class:"text-h5 mt-4 mb-2"},"Select domains to compare",-1)),a[145]||(a[145]=o("p",{class:"text-medium-emphasis"}," Choose at least 2 domains from the selector above to see a detailed comparison ",-1))])]),_:1})]),_:1})]),_:1})):f("",!0)])):f("",!0)])}}}),Xs=dt(Bs,[["__scopeId","data-v-4fab5006"]]);export{Xs as default};
