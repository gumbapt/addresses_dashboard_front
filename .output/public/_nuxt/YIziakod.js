import{d as mt,l as f,e as I,o as pt,z as ct,c as n,a as t,w as e,r as m,h as D,i as $,q as i,g as a,j as r,t as u,G as ft,H as vt,F as _t,m as ht,n as gt,N as xt,b as l,D as bt,_ as yt}from"./CLCxtK2z.js";import{_ as h}from"./jMGR6MY0.js";import{u as wt}from"./wiEAxQzi.js";import{u as Dt}from"./DxU9D8nI.js";import{u as kt}from"./rwwxpM_j.js";import"./DtzDjvwE.js";const St={class:"d-flex align-center justify-space-between flex-wrap gap-4"},Ct={class:"flex-grow-1"},zt={class:"text-h4 font-weight-bold"},Rt={key:0,class:"text-body-1 text-medium-emphasis"},At={class:"d-flex gap-2 align-center",style:{"min-width":"300px"}},Ft={key:0,class:"text-caption"},Nt={key:1,class:"text-caption"},qt={key:0},Vt={class:"d-flex align-center justify-space-between mb-3"},Lt={class:"mb-2"},Ot={class:"text-h6"},jt={class:"mb-2"},Bt={class:"text-body-2"},Wt={key:1},Tt={class:"d-flex justify-center align-center py-8"},Pt={key:2},It={class:"d-flex align-center justify-space-between mb-2"},$t={class:"text-h3 font-weight-bold text-primary"},Mt={class:"d-flex align-center justify-space-between mb-2"},Ut={class:"text-h3 font-weight-bold text-success"},Et={class:"d-flex align-center justify-space-between mb-2"},Gt={class:"text-h3 font-weight-bold text-info"},Ht={class:"d-flex align-center justify-space-between mb-2"},Kt={class:"text-h3 font-weight-bold text-warning"},Jt={key:0},Qt={key:1,class:"text-center py-8"},Xt={key:0},Yt={key:1,class:"text-center py-8"},Zt={key:0},te={key:1,class:"text-center py-8"},ee={key:0},se={key:1,class:"text-center py-8"},ae=mt({__name:"dashboard",setup(oe){const M=xt(),x=f(()=>parseInt(M.params.id)),{reportData:U,aggregatedData:O,loading:E,error:j,loadDashboardStats:G,loadAggregatedStats:B,providerChartData:R,topStatesChartData:A,speedByStateChartData:F,technologyChartData:N,topCards:k}=wt(),{formattedReports:H,loading:K,loadReports:J}=Dt(),{domains:q,loadDomains:Q}=kt(),c=I("all"),g=I(!1),X=f(()=>!q.value||!Array.isArray(q.value)?null:q.value.find(o=>o.id===x.value)),b=f(()=>H.value.filter(o=>o.domain_id===x.value)),Y=f(()=>[...[{id:"all",reportDate:"All Reports Combined",statusColor:"primary",data_version:"Aggregated"}],...b.value]),V=f(()=>c.value==="all"?{id:"all",reportDate:"All Reports Combined",statusLabel:"Aggregated"}:b.value.find(o=>o.id===c.value)),W=f(()=>c.value==="all"&&O.value?`Showing aggregated data from ${b.value.length} report(s)`:V.value&&c.value!=="all"?`Report Date: ${V.value.reportDate} | Status: ${V.value.statusLabel}`:"");pt(async()=>{await Q(),await J({domain_id:x.value,per_page:100}),await B(x.value),c.value="all"}),ct(c,async o=>{o==="all"?(g.value=!1,await B(x.value)):o&&(g.value=!1,await G(o))});const Z=f(()=>({chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Provider Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:R.value.labels,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(o){return o.toFixed(1)+"%"}}})),tt=f(()=>({chart:{type:"bar",fontFamily:"inherit",height:350,toolbar:{show:!1}},title:{text:"Top States by Requests",align:"left",style:{fontSize:"18px",fontWeight:600}},plotOptions:{bar:{horizontal:!1,borderRadius:8,columnWidth:"55%",distributed:!1}},dataLabels:{enabled:!1},xaxis:{categories:A.value.categories,labels:{style:{fontSize:"12px"}}},yaxis:{title:{text:"Number of Requests"}},colors:["#1976d2"],grid:{show:!0,borderColor:"#f0f0f0"}})),et=f(()=>({chart:{type:"bar",fontFamily:"inherit",height:350,toolbar:{show:!1}},title:{text:"Average Speed by State",align:"left",style:{fontSize:"18px",fontWeight:600}},plotOptions:{bar:{horizontal:!1,borderRadius:8,columnWidth:"55%",distributed:!1}},dataLabels:{enabled:!1},xaxis:{categories:F.value.categories,labels:{style:{fontSize:"12px"}}},yaxis:{title:{text:"Average Speed (Mbps)"}},colors:["#4caf50"],grid:{show:!0,borderColor:"#f0f0f0"}})),st=f(()=>({chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Technology Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:N.value.labels,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(o){return o.toFixed(1)+"%"}}})),at=o=>o>=1e6?(o/1e6).toFixed(1)+"M":o>=1e3?(o/1e3).toFixed(1)+"K":o.toString(),ot=o=>o.toFixed(1)+"%",lt=o=>o.toFixed(2),it=()=>{gt("/domains")},nt=()=>{g.value=!g.value};return(o,s)=>{const T=m("v-btn"),L=m("v-chip"),dt=m("v-list-item"),rt=m("v-select"),v=m("v-icon"),d=m("v-col"),_=m("v-row"),P=m("v-alert"),y=m("v-card-text"),w=m("v-card"),ut=m("v-progress-circular"),S=m("apexchart");return l(),n("div",null,[t(_,{class:"mb-4"},{default:e(()=>[t(d,{cols:"12"},{default:e(()=>{var p;return[a("div",St,[a("div",Ct,[t(T,{variant:"text","prepend-icon":"mdi-arrow-left",onClick:it,class:"mb-2"},{default:e(()=>s[1]||(s[1]=[r(" Back to Domains ")])),_:1}),a("h1",zt,u(((p=X.value)==null?void 0:p.name)||"Domain Dashboard"),1),W.value?(l(),n("p",Rt,u(W.value),1)):$("",!0)]),a("div",At,[t(rt,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=C=>c.value=C),items:Y.value,"item-title":"reportDate","item-value":"id",label:"Select Report",variant:"outlined",density:"compact","hide-details":"",loading:i(K),"prepend-inner-icon":"mdi-calendar"},{item:e(({props:C,item:z})=>[t(dt,ft(vt(C)),{prepend:e(()=>[t(L,{color:z.raw.statusColor,size:"x-small",variant:"tonal"},null,8,["color"])]),subtitle:e(()=>[z.raw.id!=="all"?(l(),n("span",Ft,"ID: "+u(z.raw.id)+" | Version: "+u(z.raw.data_version),1)):(l(),n("span",Nt,"Combined data from all reports"))]),_:2},1040)]),_:1},8,["modelValue","items","loading"]),t(T,{icon:"",variant:"outlined",onClick:nt,title:"View all reports"},{default:e(()=>[t(v,null,{default:e(()=>[r(u(g.value?"mdi-view-dashboard":"mdi-view-list"),1)]),_:1})]),_:1})])])]}),_:1})]),_:1}),g.value?(l(),n("div",qt,[t(_,null,{default:e(()=>[t(d,{cols:"12"},{default:e(()=>[t(h,{title:"All Reports"},{default:e(()=>[b.value.length===0?(l(),D(_,{key:0},{default:e(()=>[t(d,{cols:"12"},{default:e(()=>[t(P,{type:"info",variant:"tonal"},{default:e(()=>s[2]||(s[2]=[r(" No reports available for this domain yet. ")])),_:1})]),_:1})]),_:1})):(l(),D(_,{key:1},{default:e(()=>[(l(!0),n(_t,null,ht(b.value,p=>(l(),D(d,{key:p.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[t(w,{elevation:"2",hover:"",class:bt(["h-100",{"border-primary":c.value===p.id}]),onClick:C=>c.value=p.id,style:{cursor:"pointer"}},{default:e(()=>[t(y,null,{default:e(()=>[a("div",Vt,[t(L,{color:p.statusColor,variant:"tonal",size:"small"},{default:e(()=>[r(u(p.statusLabel),1)]),_:2},1032,["color"])]),a("div",Lt,[s[3]||(s[3]=a("div",{class:"text-overline text-medium-emphasis"},"Date",-1)),a("div",Ot,u(p.reportDate),1)]),a("div",jt,[s[4]||(s[4]=a("div",{class:"text-overline text-medium-emphasis"},"Report ID",-1)),a("div",Bt,"#"+u(p.id),1)]),a("div",null,[s[5]||(s[5]=a("div",{class:"text-overline text-medium-emphasis"},"Version",-1)),t(L,{variant:"outlined",size:"x-small"},{default:e(()=>[r(u(p.data_version),1)]),_:2},1024)])]),_:2},1024)]),_:2},1032,["class","onClick"])]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1})])):(l(),n("div",Wt,[i(E)?(l(),D(_,{key:0},{default:e(()=>[t(d,{cols:"12"},{default:e(()=>[t(h,null,{default:e(()=>[a("div",Tt,[t(ut,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):i(j)?(l(),D(_,{key:1},{default:e(()=>[t(d,{cols:"12"},{default:e(()=>[t(h,null,{default:e(()=>[t(P,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[r(u(i(j)),1)]),_:1})]),_:1})]),_:1})]),_:1})):i(U)||i(O)?(l(),n("div",Pt,[t(_,{class:"mb-4"},{default:e(()=>[t(d,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(w,{elevation:"2",class:"h-100"},{default:e(()=>[t(y,null,{default:e(()=>[a("div",It,[s[7]||(s[7]=a("div",{class:"text-h6 text-medium-emphasis"},"Total Requests",-1)),t(v,{color:"primary",size:"32"},{default:e(()=>s[6]||(s[6]=[r("mdi-chart-line")])),_:1})]),a("div",$t,u(at(i(k).totalRequests)),1),s[8]||(s[8]=a("div",{class:"text-caption text-medium-emphasis mt-1"}," All time requests ",-1))]),_:1})]),_:1})]),_:1}),t(d,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(w,{elevation:"2",class:"h-100"},{default:e(()=>[t(y,null,{default:e(()=>[a("div",Mt,[s[10]||(s[10]=a("div",{class:"text-h6 text-medium-emphasis"},"Success Rate",-1)),t(v,{color:"success",size:"32"},{default:e(()=>s[9]||(s[9]=[r("mdi-check-circle")])),_:1})]),a("div",Ut,u(ot(i(k).successRate)),1),s[11]||(s[11]=a("div",{class:"text-caption text-medium-emphasis mt-1"}," Successful requests ",-1))]),_:1})]),_:1})]),_:1}),t(d,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(w,{elevation:"2",class:"h-100"},{default:e(()=>[t(y,null,{default:e(()=>[a("div",Et,[s[13]||(s[13]=a("div",{class:"text-h6 text-medium-emphasis"},"Daily Average",-1)),t(v,{color:"info",size:"32"},{default:e(()=>s[12]||(s[12]=[r("mdi-calendar-today")])),_:1})]),a("div",Gt,u(lt(i(k).dailyAverage)),1),s[14]||(s[14]=a("div",{class:"text-caption text-medium-emphasis mt-1"}," Average per day ",-1))]),_:1})]),_:1})]),_:1}),t(d,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(w,{elevation:"2",class:"h-100"},{default:e(()=>[t(y,null,{default:e(()=>[a("div",Ht,[s[16]||(s[16]=a("div",{class:"text-h6 text-medium-emphasis"},"Unique Providers",-1)),t(v,{color:"warning",size:"32"},{default:e(()=>s[15]||(s[15]=[r("mdi-domain")])),_:1})]),a("div",Kt,u(i(k).uniqueProviders),1),s[17]||(s[17]=a("div",{class:"text-caption text-medium-emphasis mt-1"}," Different providers ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(_,{class:"mb-4"},{default:e(()=>[t(d,{cols:"12",md:"6"},{default:e(()=>[t(h,null,{default:e(()=>[i(R).series.length>0?(l(),n("div",Jt,[t(S,{type:"donut",height:"350",options:Z.value,series:i(R).series},null,8,["options","series"])])):(l(),n("div",Qt,[t(v,{size:"64",color:"grey"},{default:e(()=>s[18]||(s[18]=[r("mdi-chart-donut")])),_:1}),s[19]||(s[19]=a("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No provider data available",-1))]))]),_:1})]),_:1}),t(d,{cols:"12",md:"6"},{default:e(()=>[t(h,null,{default:e(()=>[i(A).data.length>0?(l(),n("div",Xt,[t(S,{type:"bar",height:"350",options:tt.value,series:[{name:"Requests",data:i(A).data}]},null,8,["options","series"])])):(l(),n("div",Yt,[t(v,{size:"64",color:"grey"},{default:e(()=>s[20]||(s[20]=[r("mdi-chart-bar")])),_:1}),s[21]||(s[21]=a("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No state data available",-1))]))]),_:1})]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(d,{cols:"12",md:"6"},{default:e(()=>[t(h,null,{default:e(()=>[i(F).data.length>0?(l(),n("div",Zt,[t(S,{type:"bar",height:"350",options:et.value,series:[{name:"Avg Speed (Mbps)",data:i(F).data}]},null,8,["options","series"])])):(l(),n("div",te,[t(v,{size:"64",color:"grey"},{default:e(()=>s[22]||(s[22]=[r("mdi-speedometer")])),_:1}),s[23]||(s[23]=a("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No speed data available",-1))]))]),_:1})]),_:1}),t(d,{cols:"12",md:"6"},{default:e(()=>[t(h,null,{default:e(()=>[i(N).series.length>0?(l(),n("div",ee,[t(S,{type:"donut",height:"350",options:st.value,series:i(N).series},null,8,["options","series"])])):(l(),n("div",se,[t(v,{size:"64",color:"grey"},{default:e(()=>s[24]||(s[24]=[r("mdi-chart-donut")])),_:1}),s[25]||(s[25]=a("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No technology data available",-1))]))]),_:1})]),_:1})]),_:1})])):$("",!0)]))])}}}),me=yt(ae,[["__scopeId","data-v-81004fe7"]]);export{me as default};
