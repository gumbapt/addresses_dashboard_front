import{e as p,l as v,s as g,G as b}from"./B7XrKrHi.js";const S=()=>{const o=p(null),l=p(null),d=p(!1),c=p(null),_=new b,m=async u=>{d.value=!0,c.value=null;try{const a=await _.get(`/reports/${u}`);a.success&&a.data?(o.value=a.data,l.value=null):(c.value="Failed to load report data",o.value=null)}catch(a){c.value=a instanceof Error?a.message:"Unexpected error loading report",o.value=null}finally{d.value=!1}},y=async u=>{d.value=!0,c.value=null;try{const a=await _.get(`/reports/domain/${u}/aggregate`);a.success&&a.data?(l.value=a.data,o.value=null):(c.value="Failed to load aggregated data",l.value=null)}catch(a){c.value=a instanceof Error?a.message:"Unexpected error loading aggregated data",l.value=null}finally{d.value=!1}},h=v(()=>{var u,a,i,s;if((u=l.value)!=null&&u.providers&&Array.isArray(l.value.providers)){const t=l.value.providers.slice(0,8);return{series:t.map(r=>r.total_count),labels:t.map(r=>r.name)}}if((s=(i=(a=o.value)==null?void 0:a.raw_data)==null?void 0:i.providers)!=null&&s.top_providers&&Array.isArray(o.value.raw_data.providers.top_providers)){const t=o.value.raw_data.providers.top_providers.slice(0,8);return{series:t.map(r=>r.total_count),labels:t.map(r=>r.name)}}return{series:[],labels:[]}}),f=v(()=>{var u,a,i,s,t;if((a=(u=l.value)==null?void 0:u.geographic)!=null&&a.states&&Array.isArray(l.value.geographic.states)){const r=l.value.geographic.states.slice(0,10);return{categories:r.map(e=>e.name||e.code),data:r.map(e=>e.total_requests)}}if((t=(s=(i=o.value)==null?void 0:i.raw_data)==null?void 0:s.geographic)!=null&&t.states&&Array.isArray(o.value.raw_data.geographic.states)){const r=[...o.value.raw_data.geographic.states].sort((e,n)=>n.request_count-e.request_count).slice(0,10);return{categories:r.map(e=>e.name||e.code),data:r.map(e=>e.request_count)}}return{categories:[],data:[]}}),A=v(()=>{var u,a,i,s,t;if((a=(u=l.value)==null?void 0:u.geographic)!=null&&a.states){const r=l.value.geographic.states.filter(e=>e.avg_speed>0).sort((e,n)=>n.avg_speed-e.avg_speed).slice(0,10);return{categories:r.map(e=>e.name||e.code),data:r.map(e=>e.avg_speed)}}if((t=(s=(i=o.value)==null?void 0:i.raw_data)==null?void 0:s.speed_metrics)!=null&&t.by_state&&Array.isArray(o.value.raw_data.speed_metrics.by_state)){const r=o.value.raw_data.speed_metrics.by_state.slice(0,10);return{categories:r.map(e=>e.state),data:r.map(e=>e.avg_speed)}}return{categories:[],data:[]}}),w=v(()=>{var u,a,i,s;if((u=l.value)!=null&&u.providers&&Array.isArray(l.value.providers)){const t=new Map;l.value.providers.forEach(e=>{const n=t.get(e.technology)||0;t.set(e.technology,n+e.total_count)});const r=Array.from(t.entries()).sort((e,n)=>n[1]-e[1]);return{series:r.map(([e,n])=>n),labels:r.map(([e])=>e)}}return(s=(i=(a=o.value)==null?void 0:a.raw_data)==null?void 0:i.technology_metrics)!=null&&s.distribution&&Array.isArray(o.value.raw_data.technology_metrics.distribution)?{series:o.value.raw_data.technology_metrics.distribution.map(t=>t.count),labels:o.value.raw_data.technology_metrics.distribution.map(t=>t.tech)}:{series:[],labels:[]}}),q=v(()=>{var u,a,i;if((u=l.value)!=null&&u.summary){const s=l.value.summary,t=l.value.period;return{totalRequests:s.total_requests||0,successRate:s.avg_success_rate||0,dailyAverage:t.days_covered>0?s.total_requests/t.days_covered:0,uniqueProviders:s.total_unique_providers||0}}if((i=(a=o.value)==null?void 0:a.raw_data)!=null&&i.summary){const s=o.value.raw_data.summary;return{totalRequests:s.total_requests||0,successRate:s.success_rate||0,dailyAverage:s.avg_requests_per_hour*24||0,uniqueProviders:s.unique_providers||0}}return{totalRequests:0,successRate:0,dailyAverage:0,uniqueProviders:0}});return{reportData:g(o),aggregatedData:g(l),loading:g(d),error:g(c),loadDashboardStats:m,loadAggregatedStats:y,providerChartData:h,topStatesChartData:f,speedByStateChartData:A,technologyChartData:w,topCards:q}};export{S as u};
