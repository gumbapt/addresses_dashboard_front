var bt=Object.defineProperty;var ht=(x,d,u)=>d in x?bt(x,d,{enumerable:!0,configurable:!0,writable:!0,value:u}):x[d]=u;var Ue=(x,d,u)=>ht(x,typeof d!="symbol"?d+"":d,u);import{x as Ze,e as D,l as J,d as et,o as tt,c as f,a as t,h as y,i as _,r as h,w as e,q as l,j as r,p as kt,g as o,K as Fe,t as n,F as ge,m as he,b as i,_ as at,s as _e,L as St,C as ce,H as Ie,I as Ke,k as wt,n as Rt,G as Pt}from"./CLheogn9.js";import{_ as $}from"./DeCz2vTS.js";import{_ as Qe}from"./Ua51JtOH.js";import{R as ot,u as zt}from"./C6MTXLC_.js";import{u as Dt}from"./COCkqs2u.js";import{u as Ft}from"./CmmNytLi.js";class qt{constructor(){Ue(this,"apiClient");this.apiClient=new Ze}async getRankings(d){try{const u=new URLSearchParams;d!=null&&d.provider_id&&u.append("provider_id",d.provider_id.toString()),d!=null&&d.technology&&u.append("technology",d.technology),d!=null&&d.period&&u.append("period",d.period),d!=null&&d.date_from&&u.append("date_from",d.date_from),d!=null&&d.date_to&&u.append("date_to",d.date_to),d!=null&&d.sort_by&&u.append("sort_by",d.sort_by),(d==null?void 0:d.aggregate_by_provider)!==void 0&&u.append("aggregate_by_provider",d.aggregate_by_provider?"true":"false"),d!=null&&d.page&&u.append("page",d.page.toString()),d!=null&&d.per_page&&u.append("per_page",d.per_page.toString()),d!=null&&d.limit&&!(d!=null&&d.page)&&!(d!=null&&d.per_page)&&u.append("limit",d.limit.toString());const c=`/reports/global/provider-ranking${u.toString()?`?${u.toString()}`:""}`;console.log("ðŸ” ProviderRankingRepository - URL:",c);const S=await this.apiClient.get(c);return console.log("ðŸ” ProviderRankingRepository - Response:",S),S}catch(u){throw console.error("ProviderRankingRepository - getRankings error:",u),u}}}class Ct{constructor(){Ue(this,"providerRankingRepository");this.providerRankingRepository=new qt}async getProviderRankings(d){var u;try{console.log("ðŸ” ProviderRankingService - getProviderRankings filters:",d);const c=await this.providerRankingRepository.getRankings(d);return console.log("ðŸ” ProviderRankingService - response:",c),c.success&&c.data?Array.isArray(c.data)?{success:!0,data:{rankings:c.data,totalEntries:((u=c.pagination)==null?void 0:u.total)||c.data.length,filters:c.filters||{},pagination:c.pagination,availableProviders:c.available_providers||[],aggregatedStats:c.aggregated_stats||void 0,globalStats:c.global_stats||void 0}}:{success:!0,data:{rankings:c.data.ranking||[],totalEntries:c.data.total_entries||0,filters:c.data.filters||{},availableProviders:c.available_providers||[],aggregatedStats:c.aggregated_stats||void 0,globalStats:c.global_stats||void 0}}:{success:!1,error:"Failed to fetch provider rankings"}}catch(c){return console.error("ProviderRankingService - getProviderRankings error:",c),{success:!1,error:c instanceof Error?c.message:"Failed to fetch provider rankings"}}}async getTopProviderDomain(d){try{const u=await this.providerRankingRepository.getRankings({provider_id:d,limit:1});if(u.success&&u.data){const c=Array.isArray(u.data)?u.data:u.data.ranking||[];if(c.length>0)return{success:!0,data:c[0]}}return{success:!0,data:null}}catch(u){return console.error("ProviderRankingService - getTopProviderDomain error:",u),{success:!1,error:u instanceof Error?u.message:"Failed to fetch top provider domain"}}}}const st=()=>{const x=D([]),d=D(0),u=D(null),c=D([]),S=D(null),F=D(null),k=D({technology:null,provider_id:null,period:"all_time",sort_by:"total_requests",page:1,per_page:15,aggregate_by_provider:!1}),U=D(!1),R=D(null),T=new Ct,P=D("total_requests"),b=J(()=>{let q=x.value.map(C=>{var L,Z;return{...C,requestsFormatted:C.total_requests.toLocaleString(),domainTotalFormatted:((L=C.domain_total_requests)==null?void 0:L.toLocaleString())||"-",percentageFormatted:((Z=C.percentage_of_domain)==null?void 0:Z.toFixed(1))||"0.0",percentageColor:N(C.percentage_of_domain),successRateFormatted:C.avg_success_rate.toFixed(1),avgSpeedFormatted:C.avg_speed.toFixed(0),successRateColor:C.avg_success_rate>=90?"success":C.avg_success_rate>=70?"warning":"error",techColor:M(C.technology),hasMedal:C.rank<=3,medalEmoji:C.rank===1?"ðŸ¥‡":C.rank===2?"ðŸ¥ˆ":C.rank===3?"ðŸ¥‰":""}});return P.value==="domain_total"?q=q.sort((C,L)=>(L.domain_total_requests||0)-(C.domain_total_requests||0)):P.value==="percentage"?q=q.sort((C,L)=>(L.percentage_of_domain||0)-(C.percentage_of_domain||0)):P.value==="avg_speed"&&(q=q.sort((C,L)=>C.avg_speed-L.avg_speed)),q}),M=q=>q&&{Fiber:"blue",Cable:"green",DSL:"orange",Mobile:"purple",Satellite:"red"}[q]||"grey",N=q=>q?q>=50?"error":q>=25?"warning":q>=10?"info":"success":"grey",E=async q=>{U.value=!0,R.value=null;try{const C=q||k.value,L=await T.getProviderRankings(C);L.success&&L.data?(x.value=L.data.rankings,d.value=L.data.totalEntries,u.value=L.data.pagination||null,c.value=L.data.availableProviders||[],S.value=L.data.aggregatedStats||null,F.value=L.data.globalStats||null):(R.value=L.error||"Failed to load provider rankings",x.value=[],u.value=null,c.value=[],S.value=null,F.value=null)}catch(C){R.value=C instanceof Error?C.message:"Unexpected error",x.value=[]}finally{U.value=!1}};return{rankings:x,formattedRankings:b,totalEntries:d,pagination:u,availableProviders:c,aggregatedStats:S,globalStats:F,filters:k,loading:U,error:R,localSortBy:P,loadProviderRankings:E,getTopProviderDomain:async q=>await T.getTopProviderDomain(q),updateFilters:q=>{k.value={...k.value,...q}},clearFilters:()=>{k.value={technology:null,provider_id:null,period:"all_time",sort_by:"total_requests",page:1,per_page:15,aggregate_by_provider:!1}},goToPage:async q=>{k.value.page=q,await E()},changePerPage:async q=>{k.value.per_page=q,k.value.page=1,await E()},changeLocalSort:q=>{P.value=q}}},Tt={class:"provider-rankings"},At={class:"d-flex align-center ga-2"},Vt={class:"d-flex flex-wrap ga-4"},$t={class:"text-h4 font-weight-bold"},Lt={class:"text-h4 font-weight-bold"},Ut={class:"text-h4 font-weight-bold"},Mt={class:"text-h4 font-weight-bold"},jt={class:"font-weight-bold"},Bt={key:0,class:"mr-2"},Nt={class:"font-weight-medium"},Et={class:"text-caption text-medium-emphasis"},Ot={key:0,class:"d-flex flex-wrap ga-1"},Wt={key:1,class:"text-medium-emphasis"},Gt={class:"text-right font-weight-medium"},It={class:"text-right text-medium-emphasis"},Kt={class:"text-center"},Yt={class:"text-right"},Ht={class:"d-flex align-center"},Xt={class:"text-caption text-medium-emphasis"},Jt={class:"d-flex align-center ga-2"},Qt=et({__name:"ProviderRankingTable",setup(x){const{formattedRankings:d,totalEntries:u,pagination:c,availableProviders:S,aggregatedStats:F,globalStats:k,filters:U,loading:R,error:T,localSortBy:P,loadProviderRankings:b,updateFilters:M,clearFilters:N,goToPage:E,changePerPage:Q,changeLocalSort:H}=st(),V=D({...U.value}),qe=J(()=>!S.value||S.value.length===0?[]:S.value.map(j=>({title:`${j.name} (${j.total_requests.toLocaleString()} requests)`,value:j.id}))),ke=[{title:"ðŸ“… Today",value:"today"},{title:"ðŸ“… Yesterday",value:"yesterday"},{title:"ðŸ“… Last Week",value:"last_week"},{title:"ðŸ“… Last Month",value:"last_month"},{title:"ðŸ“… Last Year",value:"last_year"},{title:"ðŸ“… All Time",value:"all_time"}],Ce=[{title:"ðŸ”µ Fiber",value:"Fiber"},{title:"ðŸŸ¢ Cable",value:"Cable"},{title:"ðŸŸ¡ DSL",value:"DSL"},{title:"ðŸŸ£ Mobile",value:"Mobile"},{title:"ðŸ”´ Satellite",value:"Satellite"}],q=[{title:"ðŸ“Š Provider Requests",value:"total_requests"},{title:"ðŸ“Š Domain Total",value:"domain_total"},{title:"ðŸ“ˆ % of Domain",value:"percentage"},{title:"âš¡ Avg Speed",value:"avg_speed"}],C=[{title:"15 per page",value:15},{title:"25 per page",value:25},{title:"50 per page",value:50},{title:"100 per page",value:100}],L=()=>{if(!V.value.provider_id)return"";const j=S.value.find(p=>p.id===V.value.provider_id);return j?j.name:""},Z=()=>{V.value.page=1,M(V.value),b()},Se=j=>{H(j)},we=()=>{N(),V.value={...U.value},V.value.aggregate_by_provider=!1,H("total_requests"),b()},Re=()=>{c.value&&c.value.current_page>1&&E(c.value.current_page-1)},ye=()=>{c.value&&c.value.current_page<c.value.last_page&&E(c.value.current_page+1)},Me=j=>{V.value.per_page=j,Q(j)},je=j=>j?j.includes(","):!1,Be=j=>j?j.split(",").map(p=>p.trim()).filter(p=>p.length>0):[],Pe=j=>({Fiber:"blue",Cable:"green",DSL:"orange",Mobile:"purple",Satellite:"red",Unknown:"grey"})[j]||"grey";return tt(()=>{b()}),(j,p)=>{const ee=h("v-icon"),W=h("v-select"),A=h("v-col"),se=h("v-switch"),Te=h("v-tooltip"),le=h("v-card"),te=h("v-btn"),pe=h("v-row"),Ae=h("v-alert-title"),re=h("v-chip"),X=h("v-alert"),ae=h("v-card-text"),xe=h("v-progress-circular"),be=h("v-card-title"),I=h("v-table"),oe=h("v-card-actions");return i(),f("div",Tt,[t(pe,{class:"mb-4"},{default:e(()=>[t(A,{cols:"12",md:"2"},{default:e(()=>[t(W,{modelValue:V.value.provider_id,"onUpdate:modelValue":[p[0]||(p[0]=z=>V.value.provider_id=z),Z],items:l(qe),label:"Provider",clearable:"",variant:"outlined",density:"compact"},{"prepend-inner":e(()=>[t(ee,{size:"small"},{default:e(()=>p[5]||(p[5]=[r("mdi-account-network")])),_:1})]),_:1},8,["modelValue","items"])]),_:1}),t(A,{cols:"12",md:"2"},{default:e(()=>[t(W,{modelValue:V.value.technology,"onUpdate:modelValue":[p[1]||(p[1]=z=>V.value.technology=z),Z],items:Ce,label:"Technology",clearable:"",variant:"outlined",density:"compact"},{"prepend-inner":e(()=>[t(ee,{size:"small"},{default:e(()=>p[6]||(p[6]=[r("mdi-network")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(A,{cols:"12",md:"2"},{default:e(()=>[t(W,{modelValue:V.value.period,"onUpdate:modelValue":[p[2]||(p[2]=z=>V.value.period=z),Z],items:ke,label:"Period",clearable:"",variant:"outlined",density:"compact"},{"prepend-inner":e(()=>[t(ee,{size:"small"},{default:e(()=>p[7]||(p[7]=[r("mdi-calendar-range")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(A,{cols:"12",md:"2"},{default:e(()=>[t(W,{modelValue:l(P),"onUpdate:modelValue":[p[3]||(p[3]=z=>kt(P)?P.value=z:null),Se],items:q,label:"Sort By",variant:"outlined",density:"compact"},{"prepend-inner":e(()=>[t(ee,{size:"small"},{default:e(()=>p[8]||(p[8]=[r("mdi-sort")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(A,{cols:"12",md:"2"},{default:e(()=>[t(le,{variant:"outlined",class:"pa-2"},{default:e(()=>[o("div",At,[t(ee,{size:"small",color:"primary"},{default:e(()=>p[9]||(p[9]=[r("mdi-group")])),_:1}),t(se,{modelValue:V.value.aggregate_by_provider,"onUpdate:modelValue":[p[4]||(p[4]=z=>V.value.aggregate_by_provider=z),Z],label:"Aggregate by Provider",color:"primary",density:"compact","hide-details":""},null,8,["modelValue"])]),t(Te,{location:"top"},{activator:e(({props:z})=>[t(ee,Fe(z,{size:"x-small",color:"grey",class:"ml-1"}),{default:e(()=>p[10]||(p[10]=[r(" mdi-information-outline ")])),_:2},1040)]),default:e(()=>[p[11]||(p[11]=o("span",null,"When enabled, aggregates all technologies of the same provider for each domain",-1))]),_:1})]),_:1})]),_:1}),t(A,{cols:"12",md:"2"},{default:e(()=>[t(te,{block:"",variant:"outlined",color:"grey",onClick:we},{default:e(()=>[t(ee,{start:""},{default:e(()=>p[12]||(p[12]=[r("mdi-filter-off")])),_:1}),p[13]||(p[13]=r(" Clear Filters "))]),_:1})]),_:1})]),_:1}),l(k)?(i(),y(pe,{key:0,class:"mb-4"},{default:e(()=>[t(A,{cols:"12"},{default:e(()=>[t(X,{color:"primary",variant:"tonal",border:"start",prominent:""},{default:e(()=>[t(Ae,{class:"text-h6 mb-2"},{default:e(()=>[t(ee,{start:"",size:"small"},{default:e(()=>p[14]||(p[14]=[r("mdi-chart-line")])),_:1}),r(" "+n(L())+" Global Statistics ",1)]),_:1}),o("div",Vt,[o("div",null,[p[15]||(p[15]=o("strong",null,"Provider Requests:",-1)),r(" "+n(l(k).provider_total_requests.toLocaleString()),1)]),o("div",null,[p[16]||(p[16]=o("strong",null,"Global Requests:",-1)),r(" "+n(l(k).global_total_requests.toLocaleString()),1)]),o("div",null,[p[17]||(p[17]=o("strong",null,"Percentage of Global:",-1)),t(re,{color:"primary",variant:"tonal",size:"small",class:"ml-1"},{default:e(()=>[r(n(l(k).percentage_of_global.toFixed(2))+"% ",1)]),_:1})])])]),_:1})]),_:1})]),_:1})):_("",!0),l(F)?(i(),y(pe,{key:1,class:"mb-4"},{default:e(()=>[t(A,{cols:"12",md:"3"},{default:e(()=>[t(le,{variant:"tonal",color:"primary"},{default:e(()=>[t(ae,{class:"text-center"},{default:e(()=>[o("div",$t,n(l(F).total_requests.toLocaleString()),1),p[18]||(p[18]=o("div",{class:"text-caption text-medium-emphasis"},"Total Requests",-1))]),_:1})]),_:1})]),_:1}),t(A,{cols:"12",md:"3"},{default:e(()=>[t(le,{variant:"tonal",color:"primary"},{default:e(()=>[t(ae,{class:"text-center"},{default:e(()=>[o("div",Lt,n(l(F).avg_speed.toFixed(0))+" ms ",1),p[19]||(p[19]=o("div",{class:"text-caption text-medium-emphasis"},"Avg Speed",-1))]),_:1})]),_:1})]),_:1}),t(A,{cols:"12",md:"3"},{default:e(()=>[t(le,{variant:"tonal",color:"primary"},{default:e(()=>[t(ae,{class:"text-center"},{default:e(()=>[o("div",Ut,n(l(F).unique_domains),1),p[20]||(p[20]=o("div",{class:"text-caption text-medium-emphasis"},"Unique Domains",-1))]),_:1})]),_:1})]),_:1}),t(A,{cols:"12",md:"3"},{default:e(()=>[t(le,{variant:"tonal",color:"primary"},{default:e(()=>[t(ae,{class:"text-center"},{default:e(()=>[o("div",Mt,n(l(F).unique_providers),1),p[21]||(p[21]=o("div",{class:"text-caption text-medium-emphasis"},"Unique Providers",-1))]),_:1})]),_:1})]),_:1})]),_:1})):_("",!0),l(R)?(i(),y(X,{key:2,type:"info",variant:"tonal"},{default:e(()=>[t(xe,{indeterminate:"",size:"20",class:"mr-2"}),p[22]||(p[22]=r(" Loading rankings... "))]),_:1})):l(T)?(i(),y(X,{key:3,type:"error",variant:"tonal"},{default:e(()=>[r(n(l(T)),1)]),_:1})):(i(),y(le,{key:4},{default:e(()=>[t(be,{class:"d-flex align-center justify-space-between"},{default:e(()=>[p[23]||(p[23]=o("span",null,"ðŸ† Provider Rankings",-1)),t(re,{color:"primary",variant:"tonal"},{default:e(()=>[r(n(l(u))+" entries ",1)]),_:1})]),_:1}),t(I,{"fixed-header":"",height:"600px"},{default:e(()=>[p[26]||(p[26]=o("thead",null,[o("tr",null,[o("th",{class:"text-left"},"Rank"),o("th",{class:"text-left"},"Domain"),o("th",{class:"text-left"},"Provider"),o("th",{class:"text-left"},"Technology"),o("th",{class:"text-right"},"Provider Requests"),o("th",{class:"text-right"},"Domain Total"),o("th",{class:"text-center"},"% of Domain"),o("th",{class:"text-right"},"Avg Speed")])],-1)),o("tbody",null,[(i(!0),f(ge,null,he(l(d),z=>(i(),f("tr",{key:`${z.domain_id}-${z.provider_id}`},[o("td",jt,[z.hasMedal?(i(),f("span",Bt,n(z.medalEmoji),1)):_("",!0),r(" #"+n(z.rank),1)]),o("td",null,[o("div",Nt,n(z.domain_name),1),o("div",Et,n(z.domain_slug),1)]),o("td",null,n(z.provider_name),1),o("td",null,[z.technology?(i(),f("div",Ot,[je(z.technology)?(i(),f(ge,{key:0},[(i(!0),f(ge,null,he(Be(z.technology),(B,Ne)=>(i(),y(re,{key:Ne,color:Pe(B),variant:"tonal",size:"x-small",class:"mr-1 mb-1"},{default:e(()=>[r(n(B.trim()),1)]),_:2},1032,["color"]))),128)),t(Te,{location:"top"},{activator:e(({props:B})=>[t(ee,Fe({ref_for:!0},B,{size:"x-small",color:"primary",class:"ml-1"}),{default:e(()=>p[24]||(p[24]=[r(" mdi-information ")])),_:2},1040)]),default:e(()=>[p[25]||(p[25]=o("span",null,"Multiple technologies aggregated",-1))]),_:1})],64)):(i(),y(re,{key:1,color:z.techColor,variant:"tonal",size:"small"},{default:e(()=>[r(n(z.technology),1)]),_:2},1032,["color"]))])):(i(),f("span",Wt,"Unknown"))]),o("td",Gt,n(z.requestsFormatted),1),o("td",It,n(z.domainTotalFormatted),1),o("td",Kt,[t(re,{color:z.percentageColor,variant:"tonal",size:"small"},{default:e(()=>[r(n(z.percentageFormatted)+"% ",1)]),_:2},1032,["color"])]),o("td",Yt,n(z.avgSpeedFormatted)+" ms",1)]))),128))])]),_:1}),l(c)?(i(),y(oe,{key:0,class:"justify-space-between pa-4"},{default:e(()=>[o("div",Ht,[o("span",Xt," Showing "+n(l(c).from)+" to "+n(l(c).to)+" of "+n(l(c).total)+" entries ",1)]),o("div",Jt,[t(W,{"model-value":V.value.per_page,items:C,"onUpdate:modelValue":Me,density:"compact",variant:"outlined","hide-details":"",style:{width:"100px"}},null,8,["model-value"]),t(te,{icon:"mdi-chevron-left",size:"small",variant:"text",disabled:l(c).current_page===1,onClick:Re},null,8,["disabled"]),t(re,{variant:"tonal",color:"primary"},{default:e(()=>[r(n(l(c).current_page)+" / "+n(l(c).last_page),1)]),_:1}),t(te,{icon:"mdi-chevron-right",size:"small",variant:"text",disabled:l(c).current_page===l(c).last_page,onClick:ye},null,8,["disabled"])])]),_:1})):_("",!0)]),_:1}))])}}}),Zt=at(Qt,[["__scopeId","data-v-64fd48fe"]]),ea=()=>{const x=D(null),d=D(!1),u=D(null),c=D("score"),S=new ot,F=async(P="score")=>{d.value=!0,u.value=null,c.value=P;try{const b=await S.getGlobalDomainRanking(P);b.success&&b.data?x.value=b.data:(u.value=b.error||"Failed to load ranking",x.value=null)}catch{u.value="Unexpected error loading ranking",x.value=null}finally{d.value=!1}},k=J(()=>{var P;return!((P=x.value)!=null&&P.ranking)||!Array.isArray(x.value.ranking)?[]:x.value.ranking.map(b=>({...b,formattedPeriod:`${new Date(b.coverage.period_start).toLocaleDateString()} - ${new Date(b.coverage.period_end).toLocaleDateString()}`,formattedRequests:U(b.metrics.total_requests),formattedSuccessRate:b.metrics.success_rate.toFixed(1)+"%",formattedSpeed:b.metrics.avg_speed>0?b.metrics.avg_speed.toFixed(1)+" Mbps":"N/A",formattedScore:b.metrics.score.toFixed(1)}))}),U=P=>P>=1e6?(P/1e6).toFixed(1)+"M":P>=1e3?(P/1e3).toFixed(1)+"K":P.toString(),R=J(()=>k.value.slice(0,3)),T=J(()=>{var Q;if(!((Q=x.value)!=null&&Q.ranking)||x.value.ranking.length===0)return{totalDomains:0,totalRequests:0,avgSuccessRate:0,avgSpeed:0};const P=x.value.ranking,b=P.reduce((H,V)=>H+V.metrics.total_requests,0),M=P.reduce((H,V)=>H+V.metrics.success_rate,0)/P.length,N=P.filter(H=>H.metrics.avg_speed>0),E=N.length>0?N.reduce((H,V)=>H+V.metrics.avg_speed,0)/N.length:0;return{totalDomains:P.length,totalRequests:b,avgSuccessRate:M,avgSpeed:E}});return{rankingData:_e(x),loading:_e(d),error:_e(u),currentSortBy:_e(c),formattedRanking:k,topThree:R,globalStats:T,loadRanking:F}},ta=()=>{const x=D(null),d=D(!1),u=D(null),c=new ot,S=async(R,T,P,b)=>{if(R.length<2){u.value="Please select at least 2 domains to compare";return}d.value=!0,u.value=null;try{const M=await c.compareDomains(R,T,P,b);M.success&&M.data?x.value=M.data:(u.value=M.error||"Failed to load comparison",x.value=null)}catch{u.value="Unexpected error loading comparison",x.value=null}finally{d.value=!1}},F=R=>R>=1e6?(R/1e6).toFixed(1)+"M":R>=1e3?(R/1e3).toFixed(1)+"K":R.toString(),k=(R,T=!1)=>T?R>0?"error":R<0?"success":"default":R>0?"success":R<0?"error":"default",U=R=>R>0?"mdi-arrow-up":R<0?"mdi-arrow-down":"mdi-minus";return{comparisonData:_e(x),loading:_e(d),error:_e(u),loadComparison:S,formatNumber:F,getDiffColor:k,getDiffIcon:U}};class aa{constructor(){Ue(this,"apiClient");this.apiClient=new Ze}async getRankingsByState(d){try{const u=new URLSearchParams;u.append("state_id",d.state_id.toString()),d.provider_id&&u.append("provider_id",d.provider_id.toString()),d.period&&u.append("period",d.period),d.date_from&&u.append("date_from",d.date_from),d.date_to&&u.append("date_to",d.date_to),d.sort_by&&u.append("sort_by",d.sort_by),d.aggregate_by_provider!==void 0&&u.append("aggregate_by_provider",d.aggregate_by_provider?"true":"false");const c=`/reports/global/provider-ranking-by-state?${u.toString()}`;console.log("ðŸ” ProviderRankingByStateRepository - URL:",c);const S=await this.apiClient.get(c);return console.log("ðŸ” ProviderRankingByStateRepository - Response:",S),S}catch(u){throw console.error("ProviderRankingByStateRepository - getRankingsByState error:",u),u}}}const oa=()=>{const x=D([]),d=D(!1),u=D(null),c=D(0),S=D({state_id:0,provider_id:null,period:"last_month",date_from:null,date_to:null,sort_by:"total_requests",aggregate_by_provider:!1}),F=new aa,k=async b=>{if(!S.value.state_id||S.value.state_id===0){u.value="Please select a state";return}d.value=!0,u.value=null;try{const M={...S.value,...b},N=await F.getRankingsByState(M);N.success&&N.data?(x.value=N.data.ranking||[],c.value=N.data.total_entries||0,S.value={...S.value,...N.data.filters}):(u.value=N.message||"Failed to load ranking data",x.value=[],c.value=0)}catch(M){u.value=M instanceof Error?M.message:"Unexpected error loading ranking",x.value=[],c.value=0}finally{d.value=!1}},U=b=>{S.value={...S.value,...b}},R=()=>{S.value={...S.value,provider_id:null,period:"last_month",date_from:null,date_to:null,sort_by:"total_requests"}},T=J(()=>S.value.aggregate_by_provider===!0),P=J(()=>x.value.map(b=>{var N;const M={...b,formattedRequests:b.total_requests.toLocaleString(),formattedSuccessRate:`${b.avg_success_rate.toFixed(1)}%`,formattedSpeed:`${b.avg_speed.toFixed(2)} Mbps`};if("domain_id"in b&&"percentage_of_domain"in b){const E=b;return{...M,formattedPercentage:`${E.percentage_of_domain.toFixed(2)}%`,formattedProviderTotalRequests:((N=E.provider_total_requests)==null?void 0:N.toLocaleString())||"0",formattedPercentageOfProvider:E.percentage_of_provider_in_state?`${E.percentage_of_provider_in_state.toFixed(2)}%`:"0%"}}if("percentage_of_state"in b){const E=b;return{...M,formattedPercentage:`${E.percentage_of_state.toFixed(2)}%`,formattedDomains:E.domains||"",domainsCount:E.domains_count||0}}return M}));return{ranking:x,formattedRanking:P,loading:d,error:u,totalEntries:c,filters:S,isAggregatedByProvider:T,loadRankingByState:k,updateFilters:U,clearFilters:R}},sa=()=>{const x=D([]),d=D(!1),u=D(null);return{states:x,loading:d,error:u,fetchStates:async()=>{d.value=!0,u.value=null;try{const k=`${St().baseURL.replace("/admin","")}/states`,U=await fetch(k,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!U.ok)throw new Error(`HTTP error! status: ${U.status}`);const R=await U.json();R.success&&R.data?x.value=R.data.filter(T=>T.is_active!==!1):(u.value=R.message||"Failed to load states",x.value=[])}catch(S){u.value=S instanceof Error?S.message:"Unexpected error loading states",x.value=[]}finally{d.value=!1}}}},la={class:"d-flex justify-center align-center py-8"},ra={key:2},na={key:0},ia={class:"d-flex align-center justify-space-between mb-2"},da={class:"text-h3 font-weight-bold text-primary"},ua={class:"d-flex align-center justify-space-between mb-2"},ca={class:"text-h3 font-weight-bold text-success"},pa={class:"d-flex align-center justify-space-between mb-2"},ma={class:"text-h3 font-weight-bold text-info"},va={class:"d-flex align-center justify-space-between mb-2"},fa={class:"text-h3 font-weight-bold text-warning"},ga={key:1,class:"text-center py-8"},_a={key:1,class:"text-center py-8"},ya={key:1,class:"text-center py-8"},xa={key:1,class:"text-center py-8"},ba={class:"text-h6 mt-2"},ha={class:"d-flex justify-space-between mb-2"},ka={class:"font-weight-bold"},Sa={class:"d-flex justify-space-between mb-2"},wa={class:"font-weight-bold"},Ra={class:"d-flex justify-space-between"},Pa={class:"font-weight-bold"},za={class:"text-h5 mt-2"},Da={class:"d-flex justify-space-between mb-2"},Fa={class:"font-weight-bold text-h6"},qa={class:"d-flex justify-space-between mb-2"},Ca={class:"font-weight-bold"},Ta={class:"d-flex justify-space-between"},Aa={class:"font-weight-bold"},Va={class:"text-h6 mt-2"},$a={class:"d-flex justify-space-between mb-2"},La={class:"font-weight-bold"},Ua={class:"d-flex justify-space-between mb-2"},Ma={class:"font-weight-bold"},ja={class:"d-flex justify-space-between"},Ba={class:"font-weight-bold"},Na={class:"text-center"},Ea={class:"font-weight-medium"},Oa={class:"text-caption text-medium-emphasis"},Wa={class:"text-right"},Ga={class:"text-right font-weight-medium"},Ia={class:"text-right"},Ka={class:"text-right"},Ya={class:"text-center"},Ha={class:"text-center"},Xa={class:"text-center"},Ja={class:"text-center"},Qa={class:"text-caption"},Za={class:"text-caption text-medium-emphasis"},eo={class:"text-center"},to={key:0,class:"text-center py-8"},ao={key:3},oo={key:4},so={key:0,class:"text-caption"},lo={key:1,class:"text-caption"},ro={class:"text-center py-12"},no={class:"d-flex justify-center align-center py-8"},io={key:3},uo={class:"d-flex align-center justify-space-between mb-2"},co={class:"text-h3 font-weight-bold text-primary"},po={class:"d-flex align-center justify-space-between mb-2"},mo={class:"text-h3 font-weight-bold text-success"},vo={class:"d-flex align-center justify-space-between mb-2"},fo={class:"text-h3 font-weight-bold text-info"},go={class:"d-flex align-center justify-space-between mb-2"},_o={class:"text-h3 font-weight-bold text-warning"},yo={key:0},xo={key:1,class:"text-center py-8"},bo={key:0},ho={key:1,class:"text-center py-8"},ko={key:0},So={key:1,class:"text-center py-8"},wo={key:0},Ro={key:1,class:"text-center py-8"},Po={key:5},zo={class:"text-center py-12"},Do={class:"d-flex justify-center align-center py-8"},Fo={key:0,class:"ml-2"},qo={key:0,class:"text-left"},Co={key:1,class:"text-right"},To={key:2,class:"text-right"},Ao={key:3,class:"text-right"},Vo={key:4,class:"text-right"},$o={key:5,class:"text-right"},Lo={key:0},Uo={class:"font-weight-medium"},Mo={class:"text-caption text-medium-emphasis"},jo={class:"font-weight-medium"},Bo={class:"text-right font-weight-medium"},No={key:1,class:"text-right"},Eo={key:2,class:"text-right"},Oo={class:"font-weight-medium"},Wo={key:3,class:"text-right"},Go={key:4,class:"text-right"},Io={key:5,class:"text-right"},Ko={class:"text-right"},Yo={class:"text-right"},Ho={class:"text-center"},Xo={class:"text-center"},Jo={class:"text-caption"},Qo={class:"text-caption text-medium-emphasis"},Zo={class:"text-center py-12"},es={class:"text-medium-emphasis"},ts={key:6},as={class:"d-flex gap-2"},os={class:"d-flex justify-center align-center py-8"},ss={key:2},ls={class:"d-flex align-center gap-2"},rs={class:"font-weight-bold"},ns={class:"d-flex align-center gap-2"},is={class:"font-weight-bold"},ds={class:"d-flex align-center gap-2"},us={class:"font-weight-bold"},cs={class:"font-weight-bold"},ps={class:"font-weight-bold"},ms={class:"text-h4 font-weight-bold"},vs={class:"text-h4 font-weight-bold"},fs={key:0},gs={class:"text-h6 mb-3"},_s={class:"font-weight-bold"},ys={class:"font-weight-medium"},xs={class:"text-right font-weight-medium"},bs={class:"text-right"},hs={class:"text-center"},ks={class:"text-center py-12"},Ss=et({__name:"index",setup(x){const{rankingData:d,loading:u,error:c,currentSortBy:S,formattedRanking:F,topThree:k,globalStats:U,loadRanking:R}=ea(),{comparisonData:T,loading:P,error:b,loadComparison:M,getDiffColor:N,getDiffIcon:E}=ta(),{domains:Q,loadDomains:H}=Dt(),{loadProviderRankings:V}=st(),{reportData:qe,aggregatedData:ke,loading:Ce,error:q,loadDashboardStats:C,loadAggregatedStats:L,providerChartData:Z,topStatesChartData:Se,speedByStateChartData:we,technologyChartData:Re,topCards:ye}=Ft(),{formattedReports:Me,loading:je,loadReports:Be}=zt(),{formattedRanking:Pe,loading:j,error:p,totalEntries:ee,filters:W,isAggregatedByProvider:A,loadRankingByState:se,updateFilters:Te,clearFilters:le}=oa(),{states:te,loading:pe,error:Ae,fetchStates:re}=sa(),X=D("ranking"),ae=D([]),xe=D(""),be=D(""),I=D(null),oe=D("all"),z=D(!1),B=D(null),Ne=[{value:"score",label:"Overall Score"},{value:"volume",label:"Total Requests"},{value:"success",label:"Success Rate"},{value:"speed",label:"Average Speed"}],Ye=J(()=>!Q.value||!Array.isArray(Q.value)?[]:Q.value.map(v=>({value:v.id,title:v.name})));tt(()=>{R("score"),H(),V()});const lt=v=>{R(v)},ze=v=>{Rt(`/domains/${v}/dashboard`)};J(()=>!I.value||!Q.value||!Array.isArray(Q.value)?null:Q.value.find(v=>v.id===I.value));const Ee=J(()=>I.value?Me.value.filter(v=>v.domain_id===I.value):[]),rt=J(()=>[...[{id:"all",reportDate:"All Reports Combined",statusColor:"primary",data_version:"Aggregated"}],...Ee.value]);ce(I,async v=>{v&&(await Be({domain_id:v,per_page:100}),await L(v),oe.value="all",z.value=!1)}),ce(oe,async v=>{I.value&&(v==="all"?(z.value=!1,await L(I.value)):v&&(z.value=!1,await C(v)))});const He=J(()=>{if(oe.value==="all"&&ke.value)return`Showing aggregated data from ${Ee.value.length} report(s)`;const v=Ee.value.find(a=>a.id===oe.value);return v&&oe.value!=="all"?`Report Date: ${v.reportDate} | Status: ${v.statusLabel}`:""}),nt=()=>{ae.value.length<2||(M(ae.value,void 0,xe.value||void 0,be.value||void 0),X.value="comparison")},it=()=>{ae.value=[],xe.value="",be.value=""},Ve=v=>v>=1e6?(v/1e6).toFixed(1)+"M":v>=1e3?(v/1e3).toFixed(1)+"K":v.toString(),dt=v=>v.toFixed(1)+"%",ut=v=>v.toFixed(2),ct=J(()=>!te.value||!Array.isArray(te.value)?[]:te.value.map(v=>({value:v.id,title:`${v.name} (${v.code})`}))),Oe=v=>{if(!v||!te.value||!Array.isArray(te.value))return"";const a=te.value.find(m=>m.id===v);return a?`${a.name} (${a.code})`:""};ce(X,async v=>{v==="state-ranking"&&te.value.length===0&&!pe.value&&await re()}),ce(B,async v=>{v&&(Te({state_id:v}),await se())}),ce(()=>W.value.period,async()=>{B.value&&await se()}),ce(()=>W.value.sort_by,async()=>{B.value&&await se()}),ce(()=>W.value.provider_id,async()=>{B.value&&await se()}),ce(()=>W.value.aggregate_by_provider,async()=>{B.value&&await se()});const pt=v=>v===1?"warning":v===2?"grey":v===3?"orange":"default",mt=v=>v<=3?"mdi-medal":"mdi-numeric-"+v+"-circle",vt=v=>v&&{Fiber:"blue",Cable:"green",DSL:"orange",Mobile:"purple",Satellite:"red"}[v]||"grey";return(v,a)=>{const m=h("v-col"),w=h("v-row"),g=h("v-icon"),De=h("v-tab"),ft=h("v-tabs"),$e=h("v-progress-circular"),ne=h("v-alert"),me=h("v-select"),K=h("v-card-text"),Y=h("v-card"),ie=h("apexchart"),ve=h("v-divider"),de=h("v-btn"),O=h("v-chip"),We=h("v-table"),fe=h("v-list-item-title"),ue=h("v-list-item"),Ge=h("v-tooltip"),gt=h("v-switch"),Xe=h("v-text-field"),_t=h("v-form"),Je=h("v-card-title"),yt=h("v-list"),xt=h("v-card-actions");return i(),f("div",null,[t(w,{class:"mb-4"},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>a[14]||(a[14]=[o("h1",{class:"text-h4 font-weight-bold"},"Global Dashboard",-1),o("p",{class:"text-body-1 text-medium-emphasis"}," Comprehensive platform analytics and domain comparison ",-1)])),_:1})]),_:1}),t(w,{class:"mb-4"},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t(ft,{modelValue:X.value,"onUpdate:modelValue":a[0]||(a[0]=s=>X.value=s),color:"primary"},{default:e(()=>[t(De,{value:"ranking"},{default:e(()=>[t(g,{class:"mr-2"},{default:e(()=>a[15]||(a[15]=[r("mdi-trophy")])),_:1}),a[16]||(a[16]=r(" Domain Ranking "))]),_:1}),t(De,{value:"provider-ranking"},{default:e(()=>[t(g,{class:"mr-2"},{default:e(()=>a[17]||(a[17]=[r("mdi-account-network")])),_:1}),a[18]||(a[18]=r(" Provider Rankings "))]),_:1}),t(De,{value:"domain-dashboard"},{default:e(()=>[t(g,{class:"mr-2"},{default:e(()=>a[19]||(a[19]=[r("mdi-chart-box")])),_:1}),a[20]||(a[20]=r(" Domain Dashboard "))]),_:1}),t(De,{value:"state-ranking"},{default:e(()=>[t(g,{class:"mr-2"},{default:e(()=>a[21]||(a[21]=[r("mdi-map-marker")])),_:1}),a[22]||(a[22]=r(" State Ranking "))]),_:1}),t(De,{value:"comparison"},{default:e(()=>[t(g,{class:"mr-2"},{default:e(()=>a[23]||(a[23]=[r("mdi-compare")])),_:1}),a[24]||(a[24]=r(" Compare Domains "))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u)?(i(),y(w,{key:0},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t($,null,{default:e(()=>[o("div",la,[t($e,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):l(c)?(i(),y(w,{key:1},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t($,null,{default:e(()=>[t(ne,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[r(n(l(c)),1)]),_:1})]),_:1})]),_:1})]),_:1})):_("",!0),X.value==="ranking"?(i(),f("div",ra,[t(w,{class:"mb-4"},{default:e(()=>[t(m,{cols:"12",class:"d-flex justify-end"},{default:e(()=>[t(me,{"model-value":l(S),"onUpdate:modelValue":lt,items:Ne,"item-title":"label","item-value":"value",label:"Sort By",variant:"outlined",density:"compact","hide-details":"",style:{width:"200px"},"prepend-inner-icon":"mdi-sort"},null,8,["model-value"])]),_:1})]),_:1}),l(d)?(i(),f("div",na,[t(w,{class:"mb-4"},{default:e(()=>[t(m,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(Y,{elevation:"2",class:"h-100"},{default:e(()=>[t(K,null,{default:e(()=>[o("div",ia,[a[26]||(a[26]=o("div",{class:"text-h6 text-medium-emphasis"},"Total Domains",-1)),t(g,{color:"primary",size:"32"},{default:e(()=>a[25]||(a[25]=[r("mdi-domain")])),_:1})]),o("div",da,n(l(U).totalDomains),1),a[27]||(a[27]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Active domains ",-1))]),_:1})]),_:1})]),_:1}),t(m,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(Y,{elevation:"2",class:"h-100"},{default:e(()=>[t(K,null,{default:e(()=>[o("div",ua,[a[29]||(a[29]=o("div",{class:"text-h6 text-medium-emphasis"},"Total Requests",-1)),t(g,{color:"success",size:"32"},{default:e(()=>a[28]||(a[28]=[r("mdi-chart-line")])),_:1})]),o("div",ca,n(Ve(l(U).totalRequests)),1),a[30]||(a[30]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Across all domains ",-1))]),_:1})]),_:1})]),_:1}),t(m,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(Y,{elevation:"2",class:"h-100"},{default:e(()=>[t(K,null,{default:e(()=>[o("div",pa,[a[32]||(a[32]=o("div",{class:"text-h6 text-medium-emphasis"},"Avg Success Rate",-1)),t(g,{color:"info",size:"32"},{default:e(()=>a[31]||(a[31]=[r("mdi-check-circle")])),_:1})]),o("div",ma,n(l(U).avgSuccessRate.toFixed(1))+"% ",1),a[33]||(a[33]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Average across domains ",-1))]),_:1})]),_:1})]),_:1}),t(m,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(Y,{elevation:"2",class:"h-100"},{default:e(()=>[t(K,null,{default:e(()=>[o("div",va,[a[35]||(a[35]=o("div",{class:"text-h6 text-medium-emphasis"},"Avg Speed",-1)),t(g,{color:"warning",size:"32"},{default:e(()=>a[34]||(a[34]=[r("mdi-speedometer")])),_:1})]),o("div",fa,n(l(U).avgSpeed>0?l(U).avgSpeed.toFixed(1):"N/A"),1),a[36]||(a[36]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Mbps average ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(w,{class:"mb-4"},{default:e(()=>[t(m,{cols:"12",md:"6"},{default:e(()=>[t($,null,{default:e(()=>[l(F).length>0?(i(),y(ie,{key:0,type:"bar",height:"300",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Top Domains by Volume",align:"left",style:{fontSize:"16px",fontWeight:600}},plotOptions:{bar:{horizontal:!0,borderRadius:4,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(s){return Ve(s)},offsetX:30},xaxis:{categories:l(F).slice(0,5).map(s=>s.domain.name)},colors:["#1976d2"]},series:[{name:"Requests",data:l(F).slice(0,5).map(s=>s.metrics.total_requests)}]},null,8,["options","series"])):(i(),f("div",ga,[t(g,{size:"64",color:"grey"},{default:e(()=>a[37]||(a[37]=[r("mdi-chart-bar")])),_:1}),a[38]||(a[38]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No data available",-1))]))]),_:1})]),_:1}),t(m,{cols:"12",md:"6"},{default:e(()=>[t($,null,{default:e(()=>[l(F).length>0?(i(),y(ie,{key:0,type:"donut",height:"300",options:{chart:{type:"donut",fontFamily:"inherit"},title:{text:"Success Rate Distribution",align:"left",style:{fontSize:"16px",fontWeight:600}},labels:["Excellent (â‰¥95%)","Good (90-95%)","Fair (80-90%)","Poor (<80%)"],colors:["#4caf50","#8bc34a","#ffc107","#f44336"],legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(s){return s.toFixed(0)+"%"}}},series:[l(F).filter(s=>s.metrics.success_rate>=95).length,l(F).filter(s=>s.metrics.success_rate>=90&&s.metrics.success_rate<95).length,l(F).filter(s=>s.metrics.success_rate>=80&&s.metrics.success_rate<90).length,l(F).filter(s=>s.metrics.success_rate<80).length]},null,8,["options","series"])):(i(),f("div",_a,[t(g,{size:"64",color:"grey"},{default:e(()=>a[39]||(a[39]=[r("mdi-chart-donut")])),_:1}),a[40]||(a[40]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No data available",-1))]))]),_:1})]),_:1})]),_:1}),t(w,{class:"mb-4"},{default:e(()=>[t(m,{cols:"12",md:"6"},{default:e(()=>[t($,null,{default:e(()=>[l(F).length>0?(i(),y(ie,{key:0,type:"bar",height:"300",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Reports per Domain",align:"left",style:{fontSize:"16px",fontWeight:600}},plotOptions:{bar:{borderRadius:4,columnWidth:"60%"}},dataLabels:{enabled:!1},xaxis:{categories:l(F).map(s=>s.domain.name),labels:{rotate:-45,style:{fontSize:"11px"}}},yaxis:{title:{text:"Number of Reports"}},colors:["#ff9800"]},series:[{name:"Reports",data:l(F).map(s=>s.coverage.total_reports)}]},null,8,["options","series"])):(i(),f("div",ya,[t(g,{size:"64",color:"grey"},{default:e(()=>a[41]||(a[41]=[r("mdi-chart-bar")])),_:1}),a[42]||(a[42]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No data available",-1))]))]),_:1})]),_:1}),t(m,{cols:"12",md:"6"},{default:e(()=>[t($,null,{default:e(()=>[l(F).filter(s=>s.metrics.avg_speed>0).length>0?(i(),y(ie,{key:0,type:"bar",height:"300",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Average Speed by Domain",align:"left",style:{fontSize:"16px",fontWeight:600}},plotOptions:{bar:{borderRadius:4,columnWidth:"60%"}},dataLabels:{enabled:!0,formatter:function(s){return s.toFixed(0)+" Mbps"}},xaxis:{categories:l(F).filter(s=>s.metrics.avg_speed>0).map(s=>s.domain.name),labels:{rotate:-45,style:{fontSize:"11px"}}},yaxis:{title:{text:"Speed (Mbps)"}},colors:["#9c27b0"]},series:[{name:"Avg Speed",data:l(F).filter(s=>s.metrics.avg_speed>0).map(s=>s.metrics.avg_speed)}]},null,8,["options","series"])):(i(),f("div",xa,[t(g,{size:"64",color:"grey"},{default:e(()=>a[43]||(a[43]=[r("mdi-speedometer")])),_:1}),a[44]||(a[44]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No speed data available",-1))]))]),_:1})]),_:1})]),_:1}),l(k).length>=3?(i(),y(w,{key:0,class:"mb-4"},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t($,{title:"ðŸ† Top 3 Domains"},{default:e(()=>[t(w,null,{default:e(()=>[t(m,{cols:"12",md:"4",class:"order-md-1"},{default:e(()=>[t(Y,{elevation:"4",class:"h-100",color:"grey-lighten-4"},{default:e(()=>[t(K,{class:"text-center"},{default:e(()=>[t(g,{size:"48",color:"grey"},{default:e(()=>a[45]||(a[45]=[r("mdi-medal")])),_:1}),a[50]||(a[50]=o("div",{class:"text-h5 font-weight-bold mt-2"},"#2",-1)),o("div",ba,n(l(k)[1].domain.name),1),t(ve,{class:"my-3"}),o("div",ha,[a[46]||(a[46]=o("span",{class:"text-caption"},"Score:",-1)),o("span",ka,n(l(k)[1].formattedScore),1)]),o("div",Sa,[a[47]||(a[47]=o("span",{class:"text-caption"},"Requests:",-1)),o("span",wa,n(l(k)[1].formattedRequests),1)]),o("div",Ra,[a[48]||(a[48]=o("span",{class:"text-caption"},"Success:",-1)),o("span",Pa,n(l(k)[1].formattedSuccessRate),1)]),t(de,{color:"primary",variant:"tonal",size:"small",class:"mt-3",onClick:a[1]||(a[1]=s=>ze(l(k)[1].domain.id))},{default:e(()=>a[49]||(a[49]=[r(" View Dashboard ")])),_:1})]),_:1})]),_:1})]),_:1}),t(m,{cols:"12",md:"4",class:"order-md-0"},{default:e(()=>[t(Y,{elevation:"8",class:"h-100",color:"warning-lighten-4"},{default:e(()=>[t(K,{class:"text-center"},{default:e(()=>[t(g,{size:"64",color:"warning"},{default:e(()=>a[51]||(a[51]=[r("mdi-trophy")])),_:1}),a[56]||(a[56]=o("div",{class:"text-h4 font-weight-bold mt-2"},"ðŸ‘‘ #1",-1)),o("div",za,n(l(k)[0].domain.name),1),t(ve,{class:"my-3"}),o("div",Da,[a[52]||(a[52]=o("span",{class:"text-caption"},"Score:",-1)),o("span",Fa,n(l(k)[0].formattedScore),1)]),o("div",qa,[a[53]||(a[53]=o("span",{class:"text-caption"},"Requests:",-1)),o("span",Ca,n(l(k)[0].formattedRequests),1)]),o("div",Ta,[a[54]||(a[54]=o("span",{class:"text-caption"},"Success:",-1)),o("span",Aa,n(l(k)[0].formattedSuccessRate),1)]),t(de,{color:"warning",variant:"flat",size:"small",class:"mt-3",onClick:a[2]||(a[2]=s=>ze(l(k)[0].domain.id))},{default:e(()=>a[55]||(a[55]=[r(" View Dashboard ")])),_:1})]),_:1})]),_:1})]),_:1}),t(m,{cols:"12",md:"4",class:"order-md-2"},{default:e(()=>[t(Y,{elevation:"4",class:"h-100",color:"orange-lighten-4"},{default:e(()=>[t(K,{class:"text-center"},{default:e(()=>[t(g,{size:"48",color:"orange"},{default:e(()=>a[57]||(a[57]=[r("mdi-medal")])),_:1}),a[62]||(a[62]=o("div",{class:"text-h5 font-weight-bold mt-2"},"#3",-1)),o("div",Va,n(l(k)[2].domain.name),1),t(ve,{class:"my-3"}),o("div",$a,[a[58]||(a[58]=o("span",{class:"text-caption"},"Score:",-1)),o("span",La,n(l(k)[2].formattedScore),1)]),o("div",Ua,[a[59]||(a[59]=o("span",{class:"text-caption"},"Requests:",-1)),o("span",Ma,n(l(k)[2].formattedRequests),1)]),o("div",ja,[a[60]||(a[60]=o("span",{class:"text-caption"},"Success:",-1)),o("span",Ba,n(l(k)[2].formattedSuccessRate),1)]),t(de,{color:"primary",variant:"tonal",size:"small",class:"mt-3",onClick:a[3]||(a[3]=s=>ze(l(k)[2].domain.id))},{default:e(()=>a[61]||(a[61]=[r(" View Dashboard ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):_("",!0),t(w,null,{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t(Qe,{title:"Complete Ranking"},{default:e(()=>[t(We,{"fixed-header":"",height:"600px"},{default:e(()=>[a[64]||(a[64]=o("thead",null,[o("tr",null,[o("th",{class:"text-center",style:{width:"80px"}},"Rank"),o("th",{class:"text-left"},"Domain"),o("th",{class:"text-right"},"Score"),o("th",{class:"text-right"},"Total Requests"),o("th",{class:"text-right"},"Success Rate"),o("th",{class:"text-right"},"Avg Speed"),o("th",{class:"text-center"},"Providers"),o("th",{class:"text-center"},"States"),o("th",{class:"text-center"},"Reports"),o("th",{class:"text-center"},"Period"),o("th",{class:"text-center"},"Actions")])],-1)),o("tbody",null,[(i(!0),f(ge,null,he(l(F),s=>(i(),f("tr",{key:s.domain.id},[o("td",Na,[t(O,{color:pt(s.rank),variant:"flat",size:"small"},{default:e(()=>[s.rank<=3?(i(),y(g,{key:0,size:"small",class:"mr-1"},{default:e(()=>[r(n(mt(s.rank)),1)]),_:2},1024)):_("",!0),r(" "+n(s.rank),1)]),_:2},1032,["color"])]),o("td",null,[o("div",Ea,n(s.domain.name),1),o("div",Oa,n(s.domain.slug),1)]),o("td",Wa,[t(O,{color:"primary",variant:"tonal",size:"small"},{default:e(()=>[r(n(s.formattedScore),1)]),_:2},1024)]),o("td",Ga,n(s.formattedRequests),1),o("td",Ia,[t(O,{color:s.metrics.success_rate>=90?"success":s.metrics.success_rate>=70?"warning":"error",variant:"tonal",size:"small"},{default:e(()=>[r(n(s.formattedSuccessRate),1)]),_:2},1032,["color"])]),o("td",Ka,n(s.formattedSpeed),1),o("td",Ya,[t(O,{size:"small",variant:"outlined"},{default:e(()=>[r(n(s.metrics.unique_providers),1)]),_:2},1024)]),o("td",Ha,[t(O,{size:"small",variant:"outlined"},{default:e(()=>[r(n(s.metrics.unique_states),1)]),_:2},1024)]),o("td",Xa,n(s.coverage.total_reports),1),o("td",Ja,[o("div",Qa,n(s.formattedPeriod),1),o("div",Za,n(s.coverage.days_covered)+" days",1)]),o("td",eo,[t(de,{icon:"",size:"small",variant:"text",color:"primary",onClick:G=>ze(s.domain.id),title:"View Dashboard"},{default:e(()=>[t(g,null,{default:e(()=>a[63]||(a[63]=[r("mdi-chart-box")])),_:1})]),_:2},1032,["onClick"])])]))),128))])]),_:1}),l(F).length===0?(i(),f("div",to,[t(g,{size:"64",color:"grey"},{default:e(()=>a[65]||(a[65]=[r("mdi-chart-box-outline")])),_:1}),a[66]||(a[66]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No ranking data available",-1))])):_("",!0)]),_:1})]),_:1})]),_:1})])):_("",!0)])):_("",!0),X.value==="provider-ranking"?(i(),f("div",ao,[t(Zt)])):_("",!0),X.value==="domain-dashboard"?(i(),f("div",oo,[t(w,{class:"mb-4"},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t($,null,{default:e(()=>[t(w,null,{default:e(()=>[t(m,{cols:"12",md:"6"},{default:e(()=>[t(me,{modelValue:I.value,"onUpdate:modelValue":a[4]||(a[4]=s=>I.value=s),items:Ye.value,label:"Select Domain",variant:"outlined","prepend-inner-icon":"mdi-domain",hint:"Choose a domain to view its detailed dashboard","persistent-hint":"",clearable:""},{item:e(({props:s,item:G})=>[t(ue,Ie(Ke(s)),{prepend:e(()=>[t(g,{color:"primary"},{default:e(()=>a[67]||(a[67]=[r("mdi-domain")])),_:1})]),default:e(()=>[t(fe,null,{default:e(()=>[r(n(G.raw.title),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items"])]),_:1}),I.value?(i(),y(m,{key:0,cols:"12",md:"6"},{default:e(()=>[t(me,{modelValue:oe.value,"onUpdate:modelValue":a[5]||(a[5]=s=>oe.value=s),items:rt.value,"item-title":"reportDate","item-value":"id",label:"Select Report",variant:"outlined",density:"compact",loading:l(je),"prepend-inner-icon":"mdi-calendar"},{item:e(({props:s,item:G})=>[t(ue,Ie(Ke(s)),{prepend:e(()=>[t(O,{color:G.raw.statusColor,size:"x-small",variant:"tonal"},null,8,["color"])]),subtitle:e(()=>[G.raw.id!=="all"?(i(),f("span",so,"ID: "+n(G.raw.id)+" | Version: "+n(G.raw.data_version),1)):(i(),f("span",lo,"Combined data from all reports"))]),_:2},1040)]),_:1},8,["modelValue","items","loading"])]),_:1})):_("",!0)]),_:1}),I.value&&He.value?(i(),y(w,{key:0},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t(ne,{color:"info",variant:"tonal",density:"compact"},{default:e(()=>[t(g,{start:""},{default:e(()=>a[68]||(a[68]=[r("mdi-information")])),_:1}),r(" "+n(He.value),1)]),_:1})]),_:1})]),_:1})):_("",!0)]),_:1})]),_:1})]),_:1}),I.value?l(Ce)?(i(),y(w,{key:1},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t($,null,{default:e(()=>[o("div",no,[t($e,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):l(q)?(i(),y(w,{key:2},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t($,null,{default:e(()=>[t(ne,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[r(n(l(q)),1)]),_:1})]),_:1})]),_:1})]),_:1})):I.value&&(l(qe)||l(ke))?(i(),f("div",io,[t(w,{class:"mb-4"},{default:e(()=>[t(m,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(Y,{elevation:"2",class:"h-100"},{default:e(()=>[t(K,null,{default:e(()=>[o("div",uo,[a[73]||(a[73]=o("div",{class:"text-h6 text-medium-emphasis"},"Total Requests",-1)),t(g,{color:"primary",size:"32"},{default:e(()=>a[72]||(a[72]=[r("mdi-chart-line")])),_:1})]),o("div",co,n(Ve(l(ye).totalRequests)),1),a[74]||(a[74]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," All time requests ",-1))]),_:1})]),_:1})]),_:1}),t(m,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(Y,{elevation:"2",class:"h-100"},{default:e(()=>[t(K,null,{default:e(()=>[o("div",po,[a[76]||(a[76]=o("div",{class:"text-h6 text-medium-emphasis"},"Success Rate",-1)),t(g,{color:"success",size:"32"},{default:e(()=>a[75]||(a[75]=[r("mdi-check-circle")])),_:1})]),o("div",mo,n(dt(l(ye).successRate)),1),a[77]||(a[77]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Successful requests ",-1))]),_:1})]),_:1})]),_:1}),t(m,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(Y,{elevation:"2",class:"h-100"},{default:e(()=>[t(K,null,{default:e(()=>[o("div",vo,[a[79]||(a[79]=o("div",{class:"text-h6 text-medium-emphasis"},"Daily Average",-1)),t(g,{color:"info",size:"32"},{default:e(()=>a[78]||(a[78]=[r("mdi-calendar-today")])),_:1})]),o("div",fo,n(ut(l(ye).dailyAverage)),1),a[80]||(a[80]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Average per day ",-1))]),_:1})]),_:1})]),_:1}),t(m,{cols:"12",sm:"6",md:"3"},{default:e(()=>[t(Y,{elevation:"2",class:"h-100"},{default:e(()=>[t(K,null,{default:e(()=>[o("div",go,[a[82]||(a[82]=o("div",{class:"text-h6 text-medium-emphasis"},"Unique Providers",-1)),t(g,{color:"warning",size:"32"},{default:e(()=>a[81]||(a[81]=[r("mdi-domain")])),_:1})]),o("div",_o,n(l(ye).uniqueProviders),1),a[83]||(a[83]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Different providers ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(w,{class:"mb-4"},{default:e(()=>[t(m,{cols:"12",md:"6"},{default:e(()=>[t($,null,{default:e(()=>[l(Z).series.length>0?(i(),f("div",yo,[t(ie,{type:"donut",height:"350",options:{chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Provider Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:l(Z).labels,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(s){return s.toFixed(1)+"%"}}},series:l(Z).series},null,8,["options","series"])])):(i(),f("div",xo,[t(g,{size:"64",color:"grey"},{default:e(()=>a[84]||(a[84]=[r("mdi-chart-donut")])),_:1}),a[85]||(a[85]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No provider data available",-1))]))]),_:1})]),_:1}),t(m,{cols:"12",md:"6"},{default:e(()=>[t($,null,{default:e(()=>[l(Se).data.length>0?(i(),f("div",bo,[t(ie,{type:"bar",height:"350",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Top States by Requests",align:"left",style:{fontSize:"18px",fontWeight:600}},plotOptions:{bar:{horizontal:!0,borderRadius:4,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:function(s){return s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":s.toString()},offsetX:30},xaxis:{categories:l(Se).categories},colors:["#1976d2"]},series:[{name:"Requests",data:l(Se).data}]},null,8,["options","series"])])):(i(),f("div",ho,[t(g,{size:"64",color:"grey"},{default:e(()=>a[86]||(a[86]=[r("mdi-chart-bar")])),_:1}),a[87]||(a[87]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No state data available",-1))]))]),_:1})]),_:1})]),_:1}),t(w,null,{default:e(()=>[t(m,{cols:"12",md:"6"},{default:e(()=>[t($,null,{default:e(()=>[l(we).data.length>0?(i(),f("div",ko,[t(ie,{type:"bar",height:"350",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Average Speed by State",align:"left",style:{fontSize:"18px",fontWeight:600}},plotOptions:{bar:{horizontal:!1,borderRadius:8,columnWidth:"55%",distributed:!1}},dataLabels:{enabled:!1},xaxis:{categories:l(we).categories,labels:{style:{fontSize:"12px"}}},yaxis:{title:{text:"Average Speed (Mbps)"}},colors:["#4caf50"],grid:{show:!0,borderColor:"#f0f0f0"}},series:[{name:"Avg Speed (Mbps)",data:l(we).data}]},null,8,["options","series"])])):(i(),f("div",So,[t(g,{size:"64",color:"grey"},{default:e(()=>a[88]||(a[88]=[r("mdi-speedometer")])),_:1}),a[89]||(a[89]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No speed data available",-1))]))]),_:1})]),_:1}),t(m,{cols:"12",md:"6"},{default:e(()=>[t($,null,{default:e(()=>[l(Re).series.length>0?(i(),f("div",wo,[t(ie,{type:"donut",height:"350",options:{chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Technology Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:l(Re).labels,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(s){return s.toFixed(1)+"%"}}},series:l(Re).series},null,8,["options","series"])])):(i(),f("div",Ro,[t(g,{size:"64",color:"grey"},{default:e(()=>a[90]||(a[90]=[r("mdi-chart-donut")])),_:1}),a[91]||(a[91]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No technology data available",-1))]))]),_:1})]),_:1})]),_:1})])):_("",!0):(i(),y(w,{key:0},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t($,null,{default:e(()=>[o("div",ro,[t(g,{size:"80",color:"grey"},{default:e(()=>a[69]||(a[69]=[r("mdi-chart-box-outline")])),_:1}),a[70]||(a[70]=o("h3",{class:"text-h5 mt-4 mb-2"},"Select a domain",-1)),a[71]||(a[71]=o("p",{class:"text-medium-emphasis"}," Choose a domain from the dropdown above to view its detailed dashboard ",-1))])]),_:1})]),_:1})]),_:1}))])):_("",!0),X.value==="state-ranking"?(i(),f("div",Po,[t(w,{class:"mb-4"},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t($,{title:"State Ranking Filters"},{default:e(()=>[t(w,null,{default:e(()=>[t(m,{cols:"12",md:"4"},{default:e(()=>[t(me,{modelValue:B.value,"onUpdate:modelValue":a[6]||(a[6]=s=>B.value=s),items:ct.value,label:"Select State",variant:"outlined","prepend-inner-icon":"mdi-map-marker",hint:"Select a state to view provider rankings","persistent-hint":"",clearable:"",loading:l(pe),disabled:l(pe)},{item:e(({props:s,item:G})=>[t(ue,Ie(Ke(s)),{prepend:e(()=>[t(g,{color:"primary"},{default:e(()=>a[92]||(a[92]=[r("mdi-map-marker")])),_:1})]),default:e(()=>[t(fe,null,{default:e(()=>[r(n(G.raw.title),1)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","items","loading","disabled"]),l(Ae)?(i(),y(ne,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-2"},{default:e(()=>[r(n(l(Ae)),1)]),_:1})):_("",!0)]),_:1}),B.value?(i(),y(m,{key:0,cols:"12",md:"3"},{default:e(()=>[t(me,{modelValue:l(W).period,"onUpdate:modelValue":a[7]||(a[7]=s=>l(W).period=s),items:[{value:"today",title:"Today"},{value:"yesterday",title:"Yesterday"},{value:"last_week",title:"Last Week"},{value:"last_month",title:"Last Month"},{value:"last_year",title:"Last Year"},{value:"all_time",title:"All Time"}],label:"Period",variant:"outlined","prepend-inner-icon":"mdi-calendar"},null,8,["modelValue"])]),_:1})):_("",!0),B.value?(i(),y(m,{key:1,cols:"12",md:"2"},{default:e(()=>[t(me,{modelValue:l(W).sort_by,"onUpdate:modelValue":a[8]||(a[8]=s=>l(W).sort_by=s),items:[{value:"total_requests",title:"Total Requests"},{value:"success_rate",title:"Success Rate"},{value:"avg_speed",title:"Avg Speed"},{value:"total_reports",title:"Total Reports"}],label:"Sort By",variant:"outlined","prepend-inner-icon":"mdi-sort",density:"compact"},null,8,["modelValue"])]),_:1})):_("",!0),B.value?(i(),y(m,{key:2,cols:"12",md:"2"},{default:e(()=>[t(gt,{modelValue:l(W).aggregate_by_provider,"onUpdate:modelValue":a[9]||(a[9]=s=>l(W).aggregate_by_provider=s),label:"Aggregate by Provider",color:"primary",density:"compact","hide-details":""},{prepend:e(()=>[t(Ge,{text:"When enabled, combines all domains for a provider into one entry."},{activator:e(({props:s})=>[t(g,Fe(s,{size:"small"}),{default:e(()=>a[93]||(a[93]=[r("mdi-information-outline")])),_:2},1040)]),_:1})]),_:1},8,["modelValue"])]),_:1})):_("",!0),B.value?(i(),y(m,{key:3,cols:"12",md:"2"},{default:e(()=>[t(de,{color:"primary",variant:"outlined",block:"",onClick:a[10]||(a[10]=s=>{l(le)(),l(se)()})},{default:e(()=>a[94]||(a[94]=[r(" Clear Filters ")])),_:1})]),_:1})):_("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),B.value?l(j)?(i(),y(w,{key:1},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t($,null,{default:e(()=>[o("div",Do,[t($e,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):l(p)?(i(),y(w,{key:2},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t($,null,{default:e(()=>[t(ne,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[r(n(l(p)),1)]),_:1})]),_:1})]),_:1})]),_:1})):B.value&&l(Pe).length>0?(i(),y(w,{key:3},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t($,{title:`Provider Rankings - ${Oe(B.value)}`},{default:e(()=>[t(ne,{type:"info",variant:"tonal",class:"mb-4",density:"compact"},{default:e(()=>[t(g,{start:""},{default:e(()=>a[98]||(a[98]=[r("mdi-information")])),_:1}),r(" Showing "+n(l(ee))+" "+n(l(A)?"provider":"domain-provider")+" ranking(s) for "+n(Oe(B.value))+" ",1),l(A)?(i(),f("span",Fo,[t(O,{size:"x-small",color:"primary",variant:"tonal"},{default:e(()=>a[99]||(a[99]=[r("Aggregated by Provider")])),_:1})])):_("",!0)]),_:1}),t(We,null,{default:e(()=>[o("thead",null,[o("tr",null,[a[101]||(a[101]=o("th",{class:"text-left"},"Rank",-1)),l(A)?_("",!0):(i(),f("th",qo,"Domain")),a[102]||(a[102]=o("th",{class:"text-left"},"Provider",-1)),a[103]||(a[103]=o("th",{class:"text-right"},"Total Requests",-1)),l(A)?_("",!0):(i(),f("th",Co,"% of Domain")),l(A)?_("",!0):(i(),f("th",To,"Provider Total")),l(A)?_("",!0):(i(),f("th",Ao,a[100]||(a[100]=[o("div",null,"% of Provider",-1),o("div",{class:"text-caption text-medium-emphasis"},"(row/provider)",-1)]))),l(A)?(i(),f("th",Vo,"% of State")):_("",!0),l(A)?(i(),f("th",$o,"Domains")):_("",!0),a[104]||(a[104]=o("th",{class:"text-right"},"Success Rate",-1)),a[105]||(a[105]=o("th",{class:"text-right"},"Avg Speed",-1)),a[106]||(a[106]=o("th",{class:"text-center"},"Reports",-1)),a[107]||(a[107]=o("th",{class:"text-center"},"Period",-1))])]),o("tbody",null,[(i(!0),f(ge,null,he(l(Pe),(s,G)=>(i(),f("tr",{key:l(A)?`provider-${s.provider_id}`:`domain-${"domain_id"in s?s.domain_id:G}-provider-${s.provider_id}`},[o("td",null,[t(O,{color:s.rank<=3?"primary":"default",variant:"flat",size:"small"},{default:e(()=>[s.rank===1?(i(),y(g,{key:0,size:"small",class:"mr-1"},{default:e(()=>a[108]||(a[108]=[r("mdi-trophy")])),_:1})):s.rank===2?(i(),y(g,{key:1,size:"small",class:"mr-1"},{default:e(()=>a[109]||(a[109]=[r("mdi-medal")])),_:1})):s.rank===3?(i(),y(g,{key:2,size:"small",class:"mr-1"},{default:e(()=>a[110]||(a[110]=[r("mdi-medal-outline")])),_:1})):_("",!0),r(" "+n(s.rank),1)]),_:2},1032,["color"])]),!l(A)&&"domain_name"in s?(i(),f("td",Lo,[o("div",Uo,n(s.domain_name),1),o("div",Mo,n(s.domain_slug),1)])):_("",!0),o("td",null,[o("div",jo,n(s.provider_name),1),"technology"in s&&s.technology?(i(),y(O,{key:0,size:"x-small",variant:"outlined",class:"mt-1"},{default:e(()=>[r(n(s.technology),1)]),_:2},1024)):_("",!0)]),o("td",Bo,n(s.formattedRequests),1),!l(A)&&"formattedPercentage"in s?(i(),f("td",No,[t(O,{color:"primary",variant:"tonal",size:"small"},{default:e(()=>[r(n(s.formattedPercentage),1)]),_:2},1024)])):_("",!0),!l(A)&&"formattedProviderTotalRequests"in s?(i(),f("td",Eo,[o("div",Oo,n(s.formattedProviderTotalRequests),1),a[111]||(a[111]=o("div",{class:"text-caption text-medium-emphasis"},"All domains",-1))])):_("",!0),!l(A)&&"formattedPercentageOfProvider"in s?(i(),f("td",Wo,[t(Ge,{text:"Percentage that this domain+provider row represents of the provider's total in this state"},{activator:e(({props:Le})=>[t(O,Fe({ref_for:!0},Le,{color:"info",variant:"tonal",size:"small"}),{default:e(()=>[r(n(s.formattedPercentageOfProvider),1)]),_:2},1040)]),_:2},1024),a[112]||(a[112]=o("div",{class:"text-caption text-medium-emphasis mt-1"},"of provider",-1))])):_("",!0),l(A)&&"formattedPercentage"in s?(i(),f("td",Go,[t(O,{color:"primary",variant:"tonal",size:"small"},{default:e(()=>[r(n(s.formattedPercentage),1)]),_:2},1024)])):_("",!0),l(A)&&"formattedDomains"in s?(i(),f("td",Io,[t(Ge,{text:s.formattedDomains||""},{activator:e(({props:Le})=>[t(O,Fe({ref_for:!0},Le,{color:"info",variant:"tonal",size:"small"}),{default:e(()=>[r(n("domainsCount"in s?s.domainsCount:0)+" domain(s) ",1)]),_:2},1040)]),_:2},1032,["text"])])):_("",!0),o("td",Ko,[t(O,{color:s.avg_success_rate>=90?"success":s.avg_success_rate>=70?"warning":"error",variant:"tonal",size:"small"},{default:e(()=>[r(n(s.formattedSuccessRate),1)]),_:2},1032,["color"])]),o("td",Yo,n(s.formattedSpeed),1),o("td",Ho,[t(O,{size:"small",variant:"outlined"},{default:e(()=>[r(n(s.total_reports),1)]),_:2},1024)]),o("td",Xo,[o("div",Jo,n(s.period_start)+" to "+n(s.period_end),1),o("div",Qo,n(s.days_covered)+" days",1)])]))),128))])]),_:1})]),_:1},8,["title"])]),_:1})]),_:1})):B.value&&l(Pe).length===0?(i(),y(w,{key:4},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t($,null,{default:e(()=>[o("div",Zo,[t(g,{size:"64",color:"grey"},{default:e(()=>a[113]||(a[113]=[r("mdi-database-off")])),_:1}),a[114]||(a[114]=o("h3",{class:"text-h6 mt-4 mb-2"},"No Data Available",-1)),o("p",es," No provider rankings found for "+n(Oe(B.value))+" with the selected filters. ",1)])]),_:1})]),_:1})]),_:1})):_("",!0):(i(),y(w,{key:0},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t($,null,{default:e(()=>[o("div",zo,[t(g,{size:"80",color:"grey"},{default:e(()=>a[95]||(a[95]=[r("mdi-map-marker-outline")])),_:1}),a[96]||(a[96]=o("h3",{class:"text-h5 mt-4 mb-2"},"Select a State",-1)),a[97]||(a[97]=o("p",{class:"text-medium-emphasis"}," Choose a state from the dropdown above to view provider rankings for that state ",-1))])]),_:1})]),_:1})]),_:1}))])):_("",!0),X.value==="comparison"?(i(),f("div",ts,[t(w,{class:"mb-6"},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t(Qe,{title:"Select Domains to Compare"},{default:e(()=>[t(_t,{onSubmit:wt(nt,["prevent"])},{default:e(()=>[t(w,null,{default:e(()=>[t(m,{cols:"12",md:"6"},{default:e(()=>[t(me,{modelValue:ae.value,"onUpdate:modelValue":a[11]||(a[11]=s=>ae.value=s),items:Ye.value,label:"Select Domains (minimum 2)",variant:"outlined",multiple:"",chips:"","closable-chips":"",hint:"The first domain will be used as the baseline","persistent-hint":""},null,8,["modelValue","items"])]),_:1}),t(m,{cols:"12",md:"3"},{default:e(()=>[t(Xe,{modelValue:xe.value,"onUpdate:modelValue":a[12]||(a[12]=s=>xe.value=s),label:"From Date (Optional)",type:"date",variant:"outlined",clearable:""},null,8,["modelValue"])]),_:1}),t(m,{cols:"12",md:"3"},{default:e(()=>[t(Xe,{modelValue:be.value,"onUpdate:modelValue":a[13]||(a[13]=s=>be.value=s),label:"To Date (Optional)",type:"date",variant:"outlined",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(w,null,{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[o("div",as,[t(de,{type:"submit",color:"primary","prepend-icon":"mdi-compare",disabled:ae.value.length<2,loading:l(P)},{default:e(()=>a[115]||(a[115]=[r(" Compare Domains ")])),_:1},8,["disabled","loading"]),t(de,{variant:"outlined",onClick:it,"prepend-icon":"mdi-refresh"},{default:e(()=>a[116]||(a[116]=[r(" Clear ")])),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(P)?(i(),y(w,{key:0},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t($,null,{default:e(()=>[o("div",os,[t($e,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):l(b)?(i(),y(w,{key:1},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t($,null,{default:e(()=>[t(ne,{type:"error",variant:"tonal",class:"mb-0"},{default:e(()=>[r(n(l(b)),1)]),_:1})]),_:1})]),_:1})]),_:1})):l(T)&&l(T).domains?(i(),f("div",ss,[t(w,null,{default:e(()=>[(i(!0),f(ge,null,he(l(T).domains,(s,G)=>(i(),y(m,{key:s.domain.id,cols:"12",md:l(T).domains.length===2?6:l(T).domains.length===3?4:3},{default:e(()=>[t(Y,{elevation:"4",class:Pt([{"border-primary":G===0},"h-100"])},{default:e(()=>[t(Je,{class:"d-flex align-center justify-space-between"},{default:e(()=>[o("div",null,[r(n(s.domain.name)+" ",1),G===0?(i(),y(O,{key:0,color:"primary",size:"x-small",class:"ml-2"},{default:e(()=>a[117]||(a[117]=[r(" Baseline ")])),_:1})):_("",!0)])]),_:2},1024),t(K,null,{default:e(()=>[t(yt,{density:"compact"},{default:e(()=>[t(ue,null,{prepend:e(()=>[t(g,{color:"primary"},{default:e(()=>a[118]||(a[118]=[r("mdi-chart-line")])),_:1})]),append:e(()=>[o("div",ls,[o("span",rs,n(Ve(s.metrics.total_requests)),1),s.comparison?(i(),y(O,{key:0,color:l(N)(s.comparison.requests_diff),size:"x-small",variant:"tonal"},{default:e(()=>[t(g,{size:"x-small"},{default:e(()=>[r(n(l(E)(s.comparison.requests_diff)),1)]),_:2},1024),r(" "+n(s.comparison.requests_diff_label),1)]),_:2},1032,["color"])):_("",!0)])]),default:e(()=>[t(fe,null,{default:e(()=>a[119]||(a[119]=[r("Total Requests")])),_:1})]),_:2},1024),t(ve,{class:"my-2"}),t(ue,null,{prepend:e(()=>[t(g,{color:"success"},{default:e(()=>a[120]||(a[120]=[r("mdi-check-circle")])),_:1})]),append:e(()=>[o("div",ns,[o("span",is,n(s.metrics.success_rate.toFixed(1))+"%",1),s.comparison?(i(),y(O,{key:0,color:l(N)(s.comparison.success_diff),size:"x-small",variant:"tonal"},{default:e(()=>[t(g,{size:"x-small"},{default:e(()=>[r(n(l(E)(s.comparison.success_diff)),1)]),_:2},1024),r(" "+n(s.comparison.success_diff_label),1)]),_:2},1032,["color"])):_("",!0)])]),default:e(()=>[t(fe,null,{default:e(()=>a[121]||(a[121]=[r("Success Rate")])),_:1})]),_:2},1024),t(ve,{class:"my-2"}),t(ue,null,{prepend:e(()=>[t(g,{color:"info"},{default:e(()=>a[122]||(a[122]=[r("mdi-speedometer")])),_:1})]),append:e(()=>[o("div",ds,[o("span",us,n(s.metrics.avg_speed.toFixed(1))+" Mbps",1),s.comparison?(i(),y(O,{key:0,color:l(N)(s.comparison.speed_diff),size:"x-small",variant:"tonal"},{default:e(()=>[t(g,{size:"x-small"},{default:e(()=>[r(n(l(E)(s.comparison.speed_diff)),1)]),_:2},1024),r(" "+n(s.comparison.speed_diff_label),1)]),_:2},1032,["color"])):_("",!0)])]),default:e(()=>[t(fe,null,{default:e(()=>a[123]||(a[123]=[r("Average Speed")])),_:1})]),_:2},1024),s.metrics.unique_providers?(i(),y(ve,{key:0,class:"my-2"})):_("",!0),s.metrics.unique_providers?(i(),y(ue,{key:1},{prepend:e(()=>[t(g,{color:"warning"},{default:e(()=>a[124]||(a[124]=[r("mdi-domain")])),_:1})]),append:e(()=>[o("span",cs,n(s.metrics.unique_providers),1)]),default:e(()=>[t(fe,null,{default:e(()=>a[125]||(a[125]=[r("Unique Providers")])),_:1})]),_:2},1024)):_("",!0),s.metrics.unique_states?(i(),y(ve,{key:2,class:"my-2"})):_("",!0),s.metrics.unique_states?(i(),y(ue,{key:3},{prepend:e(()=>[t(g,{color:"secondary"},{default:e(()=>a[126]||(a[126]=[r("mdi-map-marker")])),_:1})]),append:e(()=>[o("span",ps,n(s.metrics.unique_states),1)]),default:e(()=>[t(fe,null,{default:e(()=>a[127]||(a[127]=[r("Unique States")])),_:1})]),_:2},1024)):_("",!0)]),_:2},1024)]),_:2},1024),t(xt,null,{default:e(()=>[t(de,{variant:"text",color:"primary",onClick:Le=>ze(s.domain.id),"prepend-icon":"mdi-chart-box",block:""},{default:e(()=>a[128]||(a[128]=[r(" View Dashboard ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1032,["md"]))),128))]),_:1}),l(T).provider_data?(i(),y(w,{key:0},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t(Y,{elevation:"4"},{default:e(()=>[t(Je,{class:"d-flex align-center"},{default:e(()=>[t(g,{start:"",color:"primary"},{default:e(()=>a[129]||(a[129]=[r("mdi-account-network")])),_:1}),a[130]||(a[130]=r(" Provider Overview "))]),_:1}),t(K,null,{default:e(()=>[t(w,{class:"mb-4"},{default:e(()=>[t(m,{cols:"12",md:"6"},{default:e(()=>[t(Y,{variant:"tonal",color:"primary"},{default:e(()=>[t(K,{class:"text-center"},{default:e(()=>[o("div",ms,n(l(T).provider_data.unique_providers_count),1),a[131]||(a[131]=o("div",{class:"text-caption"},"Total Unique Providers",-1))]),_:1})]),_:1})]),_:1}),t(m,{cols:"12",md:"6"},{default:e(()=>[t(Y,{variant:"tonal",color:"primary"},{default:e(()=>[t(K,{class:"text-center"},{default:e(()=>[o("div",vs,n(l(T).provider_data.common_providers.length),1),a[132]||(a[132]=o("div",{class:"text-caption"},"Common Providers (in all domains)",-1))]),_:1})]),_:1})]),_:1})]),_:1}),l(T).provider_data.common_providers.length>0?(i(),f("div",fs,[o("h3",gs,[t(g,{start:"",size:"small"},{default:e(()=>a[133]||(a[133]=[r("mdi-chart-bar")])),_:1}),a[134]||(a[134]=r(" All Providers in Selected Domains "))]),t(ne,{color:"primary",variant:"tonal",density:"compact",class:"mb-3"},{default:e(()=>[r(" Aggregated data for all providers across "+n(l(T).total_compared)+" selected domains ",1)]),_:1}),t(We,{density:"compact"},{default:e(()=>[a[135]||(a[135]=o("thead",null,[o("tr",null,[o("th",{class:"text-left"},"Rank"),o("th",{class:"text-left"},"Provider"),o("th",{class:"text-left"},"Technology"),o("th",{class:"text-right"},"Total Requests"),o("th",{class:"text-right"},"Avg Speed"),o("th",{class:"text-center"},"Appearances")])],-1)),o("tbody",null,[(i(!0),f(ge,null,he(l(T).provider_data.common_providers,(s,G)=>(i(),f("tr",{key:s.provider_id},[o("td",_s,"#"+n(G+1),1),o("td",ys,n(s.provider_name),1),o("td",null,[t(O,{size:"small",variant:"tonal",color:vt(s.technology)},{default:e(()=>[r(n(s.technology),1)]),_:2},1032,["color"])]),o("td",xs,n(s.total_requests.toLocaleString()),1),o("td",bs,n(s.avg_speed.toFixed(0))+" ms",1),o("td",hs,[t(O,{size:"small",variant:"tonal",color:s.appearances>=l(T).total_compared*20?"success":"info"},{default:e(()=>[r(n(s.appearances)+" reports ",1)]),_:2},1032,["color"])])]))),128))])]),_:1})])):_("",!0)]),_:1})]),_:1})]),_:1})]),_:1})):_("",!0)])):!l(P)&&!l(b)?(i(),y(w,{key:3},{default:e(()=>[t(m,{cols:"12"},{default:e(()=>[t($,null,{default:e(()=>[o("div",ks,[t(g,{size:"80",color:"grey"},{default:e(()=>a[136]||(a[136]=[r("mdi-compare")])),_:1}),a[137]||(a[137]=o("h3",{class:"text-h5 mt-4 mb-2"},"Select domains to compare",-1)),a[138]||(a[138]=o("p",{class:"text-medium-emphasis"}," Choose at least 2 domains from the selector above to see a detailed comparison ",-1))])]),_:1})]),_:1})]),_:1})):_("",!0)])):_("",!0)])}}}),Cs=at(Ss,[["__scopeId","data-v-43bb9bc5"]]);export{Cs as default};
