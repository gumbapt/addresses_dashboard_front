import{_ as re}from"./CK2JTH4_.js";import{d as we,l as ce,c as k,g as o,h as w,a as l,r,w as t,F as ae,m as se,b as d,t as u,j as n,k as je,p as Be,q as g,e as b,s as Q,A as ve,v as Me,f as Te,o as qe,i as j,_ as Oe}from"./acMalUgX.js";import{u as Ge}from"./XcoHsGI6.js";import{u as He}from"./h05Uk6ld.js";const Je={key:0,class:"text-center py-4"},Ke={class:"d-flex align-center justify-space-between w-100"},Qe={class:"font-weight-bold text-h6"},We={class:"mb-3"},Xe={class:"font-weight-medium"},Ye={class:"text-caption text-medium-emphasis"},xe=we({__name:"PermissionSelector",props:{modelValue:{},groupedPermissions:{},loading:{type:Boolean},formatResourceName:{type:Function}},emits:["update:modelValue"],setup(E,{emit:A}){const y=E,S=A,$=ce({get:()=>y.modelValue,set:i=>S("update:modelValue",i)}),B=(i,m)=>m.filter(D=>y.modelValue.includes(D.id)).length,z=(i,m)=>m.length===0?!1:m.map(C=>C.id).every(C=>y.modelValue.includes(C)),F=(i,m)=>{const D=m.map(N=>N.id),C=D.every(N=>y.modelValue.includes(N));let M;if(C)M=y.modelValue.filter(N=>!D.includes(N));else{const N=D.filter(W=>!y.modelValue.includes(W));M=[...y.modelValue,...N]}S("update:modelValue",M)};return(i,m)=>{const D=r("v-progress-circular"),C=r("v-chip"),M=r("v-expansion-panel-title"),N=r("v-icon"),W=r("v-btn"),ue=r("v-checkbox"),de=r("v-col"),h=r("v-row"),x=r("v-expansion-panel-text"),O=r("v-expansion-panel"),G=r("v-expansion-panels");return d(),k("div",null,[m[2]||(m[2]=o("h3",{class:"mb-4"},"Select Permissions",-1)),i.loading?(d(),k("div",Je,[l(D,{indeterminate:"",color:"primary"}),m[1]||(m[1]=o("p",{class:"mt-2"},"Loading permissions...",-1))])):(d(),w(G,{key:1,variant:"accordion",multiple:""},{default:t(()=>[(d(!0),k(ae,null,se(i.groupedPermissions,(R,P)=>(d(),w(O,{key:P},{default:t(()=>[l(M,null,{default:t(()=>[o("div",Ke,[o("span",Qe,u(i.formatResourceName(P)),1),l(C,{color:"primary",size:"small",class:"mr-4"},{default:t(()=>[n(u(B(P,R))+" / "+u(R.length),1)]),_:2},1024)])]),_:2},1024),l(x,null,{default:t(()=>[o("div",We,[l(W,{size:"small",color:z(P,R)?"error":"primary",variant:"tonal",onClick:je(I=>F(P,R),["stop"])},{default:t(()=>[l(N,{start:""},{default:t(()=>[n(u(z(P,R)?"mdi-checkbox-multiple-blank-outline":"mdi-checkbox-multiple-marked"),1)]),_:2},1024),n(" "+u(z(P,R)?"Deselect All":"Select All"),1)]),_:2},1032,["color","onClick"])]),l(h,null,{default:t(()=>[(d(!0),k(ae,null,se(R,I=>(d(),w(de,{key:I.id,cols:"12",sm:"6"},{default:t(()=>[l(ue,{modelValue:g($),"onUpdate:modelValue":m[0]||(m[0]=J=>Be($)?$.value=J:null),value:I.id,"hide-details":"",density:"compact",color:"primary"},{label:t(()=>[o("div",null,[o("div",Xe,u(I.name),1),o("div",Ye,u(I.description),1)])]),_:2},1032,["modelValue","value"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))])}}}),Ze=()=>{const E=b([]),A=b(!1),y=b(null),S=new ve,$=async()=>{A.value=!0,y.value=null;try{const i=await S.getPermissions();i.success&&i.data?E.value=i.data:y.value=i.error||"Failed to load permissions"}catch{y.value="Unexpected error loading permissions"}finally{A.value=!1}},B=()=>{const i={};return E.value.forEach(m=>{i[m.resource]||(i[m.resource]=[]),i[m.resource].push(m)}),i},z=ce(()=>B()),F=i=>({admin:"Administradores",user:"UsuÃ¡rios",role:"Roles",chat:"Chat"})[i]||i;return{permissions:Q(E),loading:Q(A),error:Q(y),groupedPermissions:z,loadPermissions:$,getPermissionsByResource:B,formatResourceName:F}},el=()=>{const E=b([]),A=b(!1),y=b(null),S=new ve,$=async F=>{A.value=!0,y.value=null;try{const i=await S.getRoleDomains(F);i.success&&i.data?E.value=i.data.domains||[]:(y.value=i.error||"Failed to load role domains",E.value=[])}catch{y.value="Unexpected error loading role domains",E.value=[]}finally{A.value=!1}},B=async(F,i,m,D)=>{try{return await S.assignDomainsToRole({role_id:F,domain_ids:i,permissions:{can_view:m,can_edit:D}})}catch(C){return{success:!1,error:C instanceof Error?C.message:"Failed to assign domains"}}},z=async(F,i)=>{try{return await S.revokeDomainsFromRole({role_id:F,domain_ids:i})}catch(m){return{success:!1,error:m instanceof Error?m.message:"Failed to revoke domains"}}};return{roleDomains:Q(E),loading:Q(A),error:Q(y),loadRoleDomains:$,assignDomains:B,revokeDomains:z}},ll={class:"d-flex align-center justify-space-between"},tl={class:"d-flex gap-2"},al={class:"d-flex justify-center align-center py-8"},sl={class:"font-weight-medium"},ol={class:"d-flex justify-center gap-1"},nl={class:"d-flex justify-end mt-4"},il={class:"text-body-2 text-medium-emphasis"},rl={class:"mb-4"},ul={key:0,class:"text-center py-4"},dl={key:1},ml={key:0},cl={key:0,class:"mt-4"},vl={class:"permissions-grid"},fl={key:1},pl=we({__name:"index",setup(E){const{formattedRoles:A,loading:y,error:S,loadRoles:$}=Ge(),{permissions:B,loading:z,groupedPermissions:F,loadPermissions:i,formatResourceName:m}=Ze(),{roleDomains:D,loading:C,loadRoleDomains:M,assignDomains:N,revokeDomains:W}=el(),{domains:ue,loadDomains:de}=He(),{hasPermission:h}=Me(),x=Te(),O=b(""),G=b("all"),R=b(!1),P=b(!1),I=b(!1),J=b(!1),oe=b(!1),c=b(null),v=b({name:"",description:"",is_active:!0,selectedPermissions:[]}),U=b({selectedDomainIds:[],canView:!0,canEdit:!1}),be=[{value:"all",label:"All Status"},{value:"Ativo",label:"Active"},{value:"Inativo",label:"Inactive"}],fe=ce(()=>A.value.filter(s=>{const e=s.name.toLowerCase().includes(O.value.toLowerCase())||s.description.toLowerCase().includes(O.value.toLowerCase()),f=G.value==="all"||s.status===G.value;return e&&f})),ke=async()=>{h("role-create")&&(v.value={name:"",description:"",is_active:!0,selectedPermissions:[]},B.value.length===0&&await i(),R.value=!0)},De=async s=>{h("role-update")&&(c.value={...s},v.value={name:s.name,description:s.description,is_active:s.is_active,selectedPermissions:s.permissions?s.permissions.map(e=>e.id):[]},B.value.length===0&&await i(),P.value=!0)},Ce=s=>{h("role-delete")&&(c.value=s,I.value=!0)},Re=s=>{c.value=s,J.value=!0},Pe=async s=>{c.value=s,U.value={selectedDomainIds:[],canView:!0,canEdit:!1},await M(s.id),await de(),oe.value=!0},Ue=async()=>{if(c.value){_.value=!0,V.value=null;try{const s=await ne.deleteRole({id:c.value.id});s.success?(I.value=!1,c.value=null,x.success("Role deleted successfully"),await $()):(V.value=s.error||"Failed to delete role",x.error(s.error||"Failed to delete role"))}catch(s){V.value=s instanceof Error?s.message:"Unexpected error",x.error(s instanceof Error?s.message:"Unexpected error")}finally{_.value=!1}}},Ae=s=>{h("role-update")&&(s.status==="Active"?(s.status="Inactive",s.statusColor="error"):(s.status="Active",s.statusColor="success"))},Fe=()=>{O.value="",G.value="all"},Ee=async()=>{if(!c.value||U.value.selectedDomainIds.length===0){x.warning("Please select at least one domain");return}_.value=!0,V.value=null;try{const s=await N(c.value.id,U.value.selectedDomainIds,U.value.canView,U.value.canEdit);s.success?(x.success("Domains assigned successfully"),await M(c.value.id),U.value.selectedDomainIds=[]):(V.value=s.error||"Failed to assign domains",x.error(s.error||"Failed to assign domains"))}catch(s){V.value=s instanceof Error?s.message:"Unexpected error",x.error(s instanceof Error?s.message:"Unexpected error")}finally{_.value=!1}},Se=async s=>{if(c.value){_.value=!0;try{const e=await W(c.value.id,[s]);e.success?(x.success("Domain revoked successfully"),await M(c.value.id)):x.error(e.error||"Failed to revoke domain")}catch(e){x.error(e instanceof Error?e.message:"Unexpected error")}finally{_.value=!1}}},ne=new ve,_=b(!1),V=b(null),pe=async()=>{var s;_.value=!0,V.value=null;try{if(c.value){const e={id:c.value.id,name:v.value.name,description:v.value.description},f=await ne.updateRole(e);if(f.success){if(v.value.selectedPermissions.length>0||((s=c.value.permissions)==null?void 0:s.length)>0){const p=await ne.updateRolePermissions({id:c.value.id,permissions:v.value.selectedPermissions});if(!p.success){V.value=p.error||"Failed to update permissions",x.error(p.error||"Failed to update permissions");return}}P.value=!1,x.success("Role updated successfully")}else{V.value=f.error||"Failed to update role",x.error(f.error||"Failed to update role");return}}else{const e={name:v.value.name,description:v.value.description,permissions:v.value.selectedPermissions},f=await ne.createRole(e);if(f.success)R.value=!1,x.success("Role created successfully");else{V.value=f.error||"Failed to create role",x.error(f.error||"Failed to create role");return}}await $()}catch(e){V.value=e instanceof Error?e.message:"Unexpected error",x.error(e instanceof Error?e.message:"Unexpected error")}finally{_.value=!1}};return qe(()=>{$()}),(s,e)=>{const f=r("v-btn"),p=r("v-col"),L=r("v-row"),me=r("v-text-field"),_e=r("v-select"),T=r("v-chip"),ge=r("v-progress-circular"),K=r("v-alert"),H=r("v-icon"),$e=r("v-table"),X=r("v-card-title"),ye=r("v-textarea"),ie=r("v-switch"),Ve=r("v-form"),Y=r("v-card-text"),Z=r("v-spacer"),ee=r("v-card-actions"),le=r("v-card"),te=r("v-dialog"),Ne=r("v-list-item-title"),he=r("v-list-item-subtitle"),Ie=r("v-list-item"),ze=r("v-list"),Le=r("v-divider");return d(),k("div",null,[l(L,{class:"mb-4"},{default:t(()=>[l(p,{cols:"12"},{default:t(()=>[o("div",ll,[e[24]||(e[24]=o("div",null,[o("h1",{class:"text-h4 font-weight-bold"},"Roles"),o("p",{class:"text-body-1 text-medium-emphasis"}," Manage roles and system permissions ")],-1)),g(h)("role-create")?(d(),w(f,{key:0,color:"primary","prepend-icon":"mdi-plus",onClick:ke,size:"large"},{default:t(()=>e[23]||(e[23]=[n(" Create Role ")])),_:1})):j("",!0)])]),_:1})]),_:1}),l(L,{class:"mb-6"},{default:t(()=>[l(p,{cols:"12"},{default:t(()=>[l(re,{title:"Filters"},{default:t(()=>[l(L,null,{default:t(()=>[l(p,{cols:"12",md:"6"},{default:t(()=>[l(me,{modelValue:O.value,"onUpdate:modelValue":e[0]||(e[0]=a=>O.value=a),label:"Search by name or description","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),l(p,{cols:"12",md:"6"},{default:t(()=>[l(_e,{modelValue:G.value,"onUpdate:modelValue":e[1]||(e[1]=a=>G.value=a),items:be,"item-title":"label","item-value":"value",label:"Status",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),l(L,null,{default:t(()=>[l(p,{cols:"12"},{default:t(()=>[o("div",tl,[l(f,{variant:"outlined",onClick:Fe,"prepend-icon":"mdi-refresh"},{default:t(()=>e[25]||(e[25]=[n(" Clear Filters ")])),_:1}),l(T,{color:"primary",variant:"tonal",class:"ml-auto"},{default:t(()=>[n(u(fe.value.length)+" roles found ",1)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),g(y)?(d(),w(L,{key:0},{default:t(()=>[l(p,{cols:"12"},{default:t(()=>[l(re,null,{default:t(()=>[o("div",al,[l(ge,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):g(S)?(d(),w(L,{key:1},{default:t(()=>[l(p,{cols:"12"},{default:t(()=>[l(re,null,{default:t(()=>[l(K,{type:"error",variant:"tonal",class:"mb-0"},{default:t(()=>[n(u(g(S)),1)]),_:1})]),_:1})]),_:1})]),_:1})):(d(),w(L,{key:2},{default:t(()=>[l(p,{cols:"12"},{default:t(()=>[l(re,{title:"Roles List"},{default:t(()=>[l($e,{"fixed-header":"",height:"600px"},{default:t(()=>[e[30]||(e[30]=o("thead",null,[o("tr",null,[o("th",{class:"text-left"},"Name"),o("th",{class:"text-left"},"Description"),o("th",{class:"text-left"},"Permissions"),o("th",{class:"text-left"},"Status"),o("th",{class:"text-left"},"Created At"),o("th",{class:"text-center"},"Actions")])],-1)),o("tbody",null,[(d(!0),k(ae,null,se(fe.value,a=>(d(),k("tr",{key:a.id},[o("td",null,[o("div",sl,u(a.name),1)]),o("td",null,u(a.description),1),o("td",null,[l(T,{color:"info",variant:"tonal",size:"small"},{default:t(()=>[n(u(a.permissionsCount)+" permissions ",1)]),_:2},1024)]),o("td",null,[l(T,{color:a.statusColor,variant:"tonal",size:"small"},{default:t(()=>[n(u(a.status),1)]),_:2},1032,["color"])]),o("td",null,u(a.createdDate),1),o("td",null,[o("div",ol,[l(f,{icon:"",size:"small",variant:"text",color:"info",onClick:q=>Re(a),title:"View Permissions"},{default:t(()=>[l(H,null,{default:t(()=>e[26]||(e[26]=[n("mdi-eye")])),_:1})]),_:2},1032,["onClick"]),g(h)("role-assign")?(d(),w(f,{key:0,icon:"",size:"small",variant:"text",color:"info",onClick:q=>Pe(a),title:"Manage Domains"},{default:t(()=>[l(H,null,{default:t(()=>e[27]||(e[27]=[n("mdi-domain")])),_:1})]),_:2},1032,["onClick"])):j("",!0),g(h)("role-update")?(d(),w(f,{key:1,icon:"",size:"small",variant:"text",color:"primary",onClick:q=>De(a),title:"Edit"},{default:t(()=>[l(H,null,{default:t(()=>e[28]||(e[28]=[n("mdi-pencil")])),_:1})]),_:2},1032,["onClick"])):j("",!0),g(h)("role-update")?(d(),w(f,{key:2,icon:"",size:"small",variant:"text",color:a.status==="Active"?"warning":"success",onClick:q=>Ae(a),title:a.status==="Active"?"Deactivate":"Activate"},{default:t(()=>[l(H,null,{default:t(()=>[n(u(a.status==="Active"?"mdi-toggle-switch-off":"mdi-toggle-switch"),1)]),_:2},1024)]),_:2},1032,["color","onClick","title"])):j("",!0),g(h)("role-delete")?(d(),w(f,{key:3,icon:"",size:"small",variant:"text",color:"error",onClick:q=>Ce(a),title:"Delete"},{default:t(()=>[l(H,null,{default:t(()=>e[29]||(e[29]=[n("mdi-delete")])),_:1})]),_:2},1032,["onClick"])):j("",!0)])])]))),128))])]),_:1}),o("div",nl,[o("div",il," Total: "+u(g(A).length)+" roles ",1)])]),_:1})]),_:1})]),_:1})),l(te,{modelValue:R.value,"onUpdate:modelValue":e[7]||(e[7]=a=>R.value=a),"max-width":"900px",scrollable:""},{default:t(()=>[l(le,null,{default:t(()=>[l(X,null,{default:t(()=>e[31]||(e[31]=[n("Create Role")])),_:1}),l(Y,null,{default:t(()=>[l(Ve,null,{default:t(()=>[l(L,null,{default:t(()=>[l(p,{cols:"12"},{default:t(()=>[l(me,{modelValue:v.value.name,"onUpdate:modelValue":e[2]||(e[2]=a=>v.value.name=a),label:"Role Name",variant:"outlined",required:"",placeholder:"Ex: Manager",hint:"Slug will be auto-generated from name"},null,8,["modelValue"])]),_:1}),l(p,{cols:"12"},{default:t(()=>[l(ye,{modelValue:v.value.description,"onUpdate:modelValue":e[3]||(e[3]=a=>v.value.description=a),label:"Description",variant:"outlined",rows:"3",placeholder:"Describe the purpose of this role..."},null,8,["modelValue"])]),_:1}),l(p,{cols:"12"},{default:t(()=>[l(ie,{modelValue:v.value.is_active,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value.is_active=a),label:"Active Role",color:"primary","hide-details":""},null,8,["modelValue"])]),_:1}),l(p,{cols:"12"},{default:t(()=>[l(xe,{modelValue:v.value.selectedPermissions,"onUpdate:modelValue":e[5]||(e[5]=a=>v.value.selectedPermissions=a),"grouped-permissions":g(F),loading:g(z),"format-resource-name":g(m)},null,8,["modelValue","grouped-permissions","loading","format-resource-name"])]),_:1})]),_:1})]),_:1})]),_:1}),l(ee,null,{default:t(()=>[l(T,{color:"info",variant:"tonal"},{default:t(()=>[n(u(v.value.selectedPermissions.length)+" permissions selected ",1)]),_:1}),l(Z),V.value?(d(),w(K,{key:0,type:"error",variant:"tonal",density:"compact",class:"mr-4"},{default:t(()=>[n(u(V.value),1)]),_:1})):j("",!0),l(f,{onClick:e[6]||(e[6]=a=>R.value=!1),disabled:_.value},{default:t(()=>e[32]||(e[32]=[n("Cancel")])),_:1},8,["disabled"]),l(f,{color:"primary",onClick:pe,loading:_.value,disabled:_.value},{default:t(()=>e[33]||(e[33]=[n("Create Role")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(te,{modelValue:P.value,"onUpdate:modelValue":e[13]||(e[13]=a=>P.value=a),"max-width":"900px",scrollable:""},{default:t(()=>[l(le,null,{default:t(()=>[l(X,null,{default:t(()=>{var a;return[n("Edit Role: "+u((a=c.value)==null?void 0:a.name),1)]}),_:1}),l(Y,null,{default:t(()=>[l(Ve,null,{default:t(()=>[l(L,null,{default:t(()=>[l(p,{cols:"12"},{default:t(()=>[l(me,{modelValue:v.value.name,"onUpdate:modelValue":e[8]||(e[8]=a=>v.value.name=a),label:"Role Name",variant:"outlined",required:""},null,8,["modelValue"])]),_:1}),l(p,{cols:"12"},{default:t(()=>[l(ye,{modelValue:v.value.description,"onUpdate:modelValue":e[9]||(e[9]=a=>v.value.description=a),label:"Description",variant:"outlined",rows:"3"},null,8,["modelValue"])]),_:1}),l(p,{cols:"12"},{default:t(()=>[l(ie,{modelValue:v.value.is_active,"onUpdate:modelValue":e[10]||(e[10]=a=>v.value.is_active=a),label:"Active Role",color:"primary","hide-details":""},null,8,["modelValue"])]),_:1}),l(p,{cols:"12"},{default:t(()=>[l(xe,{modelValue:v.value.selectedPermissions,"onUpdate:modelValue":e[11]||(e[11]=a=>v.value.selectedPermissions=a),"grouped-permissions":g(F),loading:g(z),"format-resource-name":g(m)},null,8,["modelValue","grouped-permissions","loading","format-resource-name"])]),_:1})]),_:1})]),_:1})]),_:1}),l(ee,null,{default:t(()=>[l(T,{color:"info",variant:"tonal"},{default:t(()=>[n(u(v.value.selectedPermissions.length)+" permissions selected ",1)]),_:1}),l(Z),V.value?(d(),w(K,{key:0,type:"error",variant:"tonal",density:"compact",class:"mr-4"},{default:t(()=>[n(u(V.value),1)]),_:1})):j("",!0),l(f,{onClick:e[12]||(e[12]=a=>P.value=!1),disabled:_.value},{default:t(()=>e[34]||(e[34]=[n("Cancel")])),_:1},8,["disabled"]),l(f,{color:"primary",onClick:pe,loading:_.value,disabled:_.value},{default:t(()=>e[35]||(e[35]=[n("Save Changes")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(te,{modelValue:I.value,"onUpdate:modelValue":e[15]||(e[15]=a=>I.value=a),"max-width":"400px"},{default:t(()=>[l(le,null,{default:t(()=>[l(X,null,{default:t(()=>e[36]||(e[36]=[n("Confirm Deletion")])),_:1}),l(Y,null,{default:t(()=>{var a;return[e[37]||(e[37]=o("p",null,"Are you sure you want to delete this role?",-1)),o("p",null,[o("strong",null,u((a=c.value)==null?void 0:a.name),1)]),V.value?(d(),w(K,{key:0,type:"error",variant:"tonal",density:"compact",class:"mt-4"},{default:t(()=>[n(u(V.value),1)]),_:1})):j("",!0)]}),_:1}),l(ee,null,{default:t(()=>[l(Z),l(f,{onClick:e[14]||(e[14]=a=>I.value=!1),disabled:_.value},{default:t(()=>e[38]||(e[38]=[n("Cancel")])),_:1},8,["disabled"]),l(f,{color:"error",onClick:Ue,loading:_.value,disabled:_.value},{default:t(()=>e[39]||(e[39]=[n("Delete")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(te,{modelValue:oe.value,"onUpdate:modelValue":e[20]||(e[20]=a=>oe.value=a),"max-width":"900px",scrollable:""},{default:t(()=>[l(le,null,{default:t(()=>[l(X,null,{default:t(()=>{var a;return[n("Manage Domains: "+u((a=c.value)==null?void 0:a.name),1)]}),_:1}),l(Y,null,{default:t(()=>[l(L,null,{default:t(()=>[l(p,{cols:"12"},{default:t(()=>[o("div",rl,[e[43]||(e[43]=o("h3",{class:"text-h6 mb-3"},"Currently Assigned Domains",-1)),g(C)?(d(),k("div",ul,[l(ge,{indeterminate:"",color:"primary"})])):g(D).length===0?(d(),k("div",dl,[l(K,{type:"info",variant:"tonal"},{default:t(()=>e[40]||(e[40]=[n(" No domains assigned to this role yet ")])),_:1})])):(d(),w(ze,{key:2,density:"compact"},{default:t(()=>[(d(!0),k(ae,null,se(g(D),a=>(d(),w(Ie,{key:a.domain_id},{prepend:t(()=>[l(H,{color:"primary"},{default:t(()=>e[41]||(e[41]=[n("mdi-domain")])),_:1})]),append:t(()=>[l(f,{icon:"",size:"small",variant:"text",color:"error",onClick:q=>Se(a.domain_id),loading:_.value,title:"Revoke"},{default:t(()=>[l(H,null,{default:t(()=>e[42]||(e[42]=[n("mdi-close")])),_:1})]),_:2},1032,["onClick","loading"])]),default:t(()=>[l(Ne,null,{default:t(()=>{var q;return[n(u(((q=a.domain)==null?void 0:q.name)||"Domain #"+a.domain_id),1)]}),_:2},1024),l(he,null,{default:t(()=>[l(T,{size:"x-small",variant:"outlined",class:"mr-1"},{default:t(()=>[n(u(a.can_view?"View":"No View"),1)]),_:2},1024),l(T,{size:"x-small",variant:"outlined"},{default:t(()=>[n(u(a.can_edit?"Edit":"No Edit"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))])]),_:1}),l(p,{cols:"12"},{default:t(()=>[l(Le)]),_:1}),l(p,{cols:"12"},{default:t(()=>[e[44]||(e[44]=o("h3",{class:"text-h6 mb-3"},"Assign New Domains",-1)),l(_e,{modelValue:U.value.selectedDomainIds,"onUpdate:modelValue":e[16]||(e[16]=a=>U.value.selectedDomainIds=a),items:g(ue),"item-title":"name","item-value":"id",label:"Select Domains",variant:"outlined",multiple:"",chips:"","closable-chips":""},null,8,["modelValue","items"])]),_:1}),l(p,{cols:"12",md:"6"},{default:t(()=>[l(ie,{modelValue:U.value.canView,"onUpdate:modelValue":e[17]||(e[17]=a=>U.value.canView=a),label:"Can View",color:"primary","hide-details":""},null,8,["modelValue"])]),_:1}),l(p,{cols:"12",md:"6"},{default:t(()=>[l(ie,{modelValue:U.value.canEdit,"onUpdate:modelValue":e[18]||(e[18]=a=>U.value.canEdit=a),label:"Can Edit",color:"primary","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(ee,null,{default:t(()=>[l(Z),V.value?(d(),w(K,{key:0,type:"error",variant:"tonal",density:"compact",class:"mr-4"},{default:t(()=>[n(u(V.value),1)]),_:1})):j("",!0),l(f,{onClick:e[19]||(e[19]=a=>oe.value=!1),disabled:_.value},{default:t(()=>e[45]||(e[45]=[n("Close")])),_:1},8,["disabled"]),l(f,{color:"primary",onClick:Ee,loading:_.value,disabled:_.value||U.value.selectedDomainIds.length===0},{default:t(()=>e[46]||(e[46]=[n(" Assign Domains ")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(te,{modelValue:J.value,"onUpdate:modelValue":e[22]||(e[22]=a=>J.value=a),"max-width":"800px"},{default:t(()=>[l(le,null,{default:t(()=>[l(X,null,{default:t(()=>{var a;return[n("Role Permissions: "+u((a=c.value)==null?void 0:a.name),1)]}),_:1}),l(Y,null,{default:t(()=>[c.value?(d(),k("div",ml,[o("p",null,[e[47]||(e[47]=o("strong",null,"Description:",-1)),n(" "+u(c.value.description),1)]),o("p",null,[e[48]||(e[48]=o("strong",null,"Total Permissions:",-1)),n(" "+u(c.value.permissionsCount),1)]),c.value.permissions&&c.value.permissions.length>0?(d(),k("div",cl,[e[49]||(e[49]=o("h4",null,"Permissions List:",-1)),o("div",vl,[(d(!0),k(ae,null,se(c.value.permissions,a=>(d(),w(T,{key:a.id,color:a.is_active?"primary":"grey",class:"mr-2 mb-2"},{default:t(()=>[n(u(a.name)+" ("+u(a.slug)+") ",1)]),_:2},1032,["color"]))),128))])])):(d(),k("div",fl,e[50]||(e[50]=[o("p",null,"No permissions found for this role.",-1)])))])):j("",!0)]),_:1}),l(ee,null,{default:t(()=>[l(Z),l(f,{onClick:e[21]||(e[21]=a=>J.value=!1)},{default:t(()=>e[51]||(e[51]=[n("Close")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),xl=Oe(pl,[["__scopeId","data-v-3d4fafb9"]]);export{xl as default};
