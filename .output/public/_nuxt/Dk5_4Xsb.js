import{_ as S}from"./btuBwFtU.js";import{U as ct}from"./vwmodq-X.js";import{e as $,l as F,s as it,x as Rt,d as Dt,I as Lt,o as Tt,H as $t,c as p,a as e,h as C,i as L,w as a,r as b,q as l,g as s,j as h,t as d,J as et,F as Z,m as J,n as mt,b as r}from"./AmEn0FOG.js";import{u as Pt}from"./DdKHjOGv.js";import{u as At}from"./DCRjQPVk.js";const Bt=()=>{const u=$(null),T=$(!1),P=$(null),K=new Rt,g=async(x,f)=>{T.value=!0,P.value=null;try{const w=new URLSearchParams;w.append("state_id",f.state_id.toString()),f.period&&w.append("period",f.period),f.date_from&&w.append("date_from",f.date_from),f.date_to&&w.append("date_to",f.date_to),f.sort_by&&w.append("sort_by",f.sort_by),f.cities_limit&&w.append("cities_limit",f.cities_limit.toString());const I=`/reports/domain/${x}/state-stats?${w.toString()}`,O=await K.get(I);O.success&&O.data?u.value=O.data:(P.value="Failed to load domain state statistics",u.value=null)}catch(w){P.value=w instanceof Error?w.message:"Unexpected error loading domain state statistics",u.value=null}finally{T.value=!1}},at=F(()=>{if(!u.value?.provider_distribution)return{series:[],labels:[]};const x=u.value.provider_distribution.slice(0,8);return{series:x.map(f=>f.total_count),labels:x.map(f=>f.name)}}),Q=F(()=>{if(u.value?.cities_chart_data)return{categories:u.value.cities_chart_data.labels,data:u.value.cities_chart_data.datasets[0]?.data||[],percentages:u.value.cities_chart_data.percentages,raw_data:u.value.cities_chart_data.raw_data,colors:u.value.cities_chart_data.datasets[0]?.backgroundColor||[]};if(!u.value?.top_cities)return{categories:[],data:[],percentages:[],raw_data:[],colors:[]};const x=u.value.top_cities.slice(0,10);return{categories:x.map(f=>f.name),data:x.map(f=>f.total_requests),percentages:[],raw_data:x,colors:[]}}),st=F(()=>u.value?.technology_distribution?{series:u.value.technology_distribution.map(x=>x.total_count),labels:u.value.technology_distribution.map(x=>x.technology)}:{series:[],labels:[]}),E=F(()=>u.value?.daily_trends?{categories:u.value.daily_trends.map(x=>new Date(x.date).toLocaleDateString("pt-BR",{month:"short",day:"numeric"})),data:u.value.daily_trends.map(x=>x.total_requests)}:{categories:[],data:[]}),c=F(()=>u.value?.kpis?{totalRequests:u.value.kpis.total_requests,successRate:u.value.kpis.success_rate,dailyAverage:u.value.kpis.daily_average,uniqueProviders:u.value.kpis.unique_providers}:{totalRequests:0,successRate:0,dailyAverage:0,uniqueProviders:0});return{stats:it(u),loading:it(T),error:it(P),fetchStats:g,providerChartData:at,topCitiesChartData:Q,technologyChartData:st,dailyTrendsChartData:E,topCards:c}},Nt={class:"d-flex align-center justify-space-between flex-wrap gap-4"},Vt={class:"flex-grow-1"},Wt={class:"text-h4 font-weight-bold"},Ut={key:0,class:"text-body-1 text-medium-emphasis"},Et={class:"d-flex justify-center align-center py-8"},It={key:2},Ot={class:"d-flex align-center justify-space-between mb-2"},jt={class:"text-h3 font-weight-bold text-primary"},Mt={class:"d-flex align-center justify-space-between mb-2"},Ht={class:"text-h3 font-weight-bold text-success"},Yt={class:"d-flex align-center justify-space-between mb-2"},Zt={class:"text-h3 font-weight-bold text-info"},Jt={class:"d-flex align-center justify-space-between mb-2"},Kt={class:"text-h3 font-weight-bold text-warning"},Qt={key:0},Gt={key:1,class:"text-center py-8"},Xt={key:0},te={key:1,class:"text-center py-8"},ee={key:0},ae={key:1,class:"text-center py-8"},se={key:2,class:"text-center py-8"},oe={key:3,class:"mt-4"},le={class:"d-flex align-center mb-2"},ie={class:"font-weight-medium text-body-2"},ne={class:"text-h6 text-primary font-weight-bold"},re={key:0,class:"text-caption text-medium-emphasis"},de={class:"text-caption text-medium-emphasis mt-1"},ue={class:"font-weight-medium"},ce={class:"text-caption text-medium-emphasis"},me={class:"text-right font-weight-medium"},_e={class:"text-right"},pe={class:"text-right"},fe={class:"text-right"},ve={class:"font-weight-medium"},he={class:"text-caption text-medium-emphasis"},ge={class:"text-right font-weight-medium"},xe={class:"text-right"},ye={class:"text-right"},be={class:"d-flex align-center justify-space-between w-100 pr-4"},we={class:"font-weight-bold text-h6"},ke={class:"text-caption text-medium-emphasis ml-2"},Se={key:0},Ce={key:1,class:"text-center py-8"},Fe={key:0},qe={key:1,class:"text-center py-8"},ze={class:"font-weight-medium"},Re={class:"text-right"},De={class:"text-right"},Be=Dt({__name:"dashboard",setup(u){const T=Lt(),P=F(()=>parseInt(T.params.id)),K=F(()=>parseInt(T.params.stateId)),{stats:g,loading:at,error:Q,fetchStats:st,providerChartData:E,topCitiesChartData:c,technologyChartData:x,dailyTrendsChartData:f,topCards:w}=Bt(),{domains:I,loadDomains:O}=Pt(),{states:ot,fetchStates:_t}=At(),k=$("last_month"),q=$(null),z=$(null),G=$("total_count"),X=$(10),A=$(!1),pt=F(()=>!I.value||!Array.isArray(I.value)?null:I.value.find(i=>i.id===P.value)),nt=F(()=>!ot.value||!Array.isArray(ot.value)?null:ot.value.find(i=>i.id===K.value)),rt=i=>{if(!i)return{date_from:null,date_to:null};const t=new Date;t.setHours(23,59,59,999);const R=new Date(t);let n=new Date(t);switch(i){case"today":n.setHours(0,0,0,0);break;case"yesterday":n.setDate(n.getDate()-1),n.setHours(0,0,0,0),R.setDate(R.getDate()-1),R.setHours(23,59,59,999);break;case"last_week":n.setDate(n.getDate()-6);break;case"last_month":n.setDate(n.getDate()-29);break;case"last_year":n.setDate(n.getDate()-364);break;default:return{date_from:null,date_to:null}}const m=y=>{const M=y.getFullYear(),W=String(y.getMonth()+1).padStart(2,"0"),v=String(y.getDate()).padStart(2,"0");return`${M}-${W}-${v}`};return{date_from:m(n),date_to:m(R)}},dt=()=>{const i={},t=T.query;Object.keys(t).forEach(y=>{y!=="period"&&y!=="date_from"&&y!=="date_to"&&(i[y]=t[y])}),k.value&&(i.period=k.value),q.value&&(i.date_from=q.value),z.value&&(i.date_to=z.value);const R=t.period,n=t.date_from,m=t.date_to;(i.period!==R||i.date_from!==n||i.date_to!==m)&&mt({query:Object.keys(i).length>0?i:{}},{replace:!0})},ft=async()=>{if(!A.value){A.value=!0;try{if(k.value){const i=rt(k.value);q.value=i.date_from,z.value=i.date_to}else q.value=null,z.value=null;await et(),dt(),await tt()}finally{setTimeout(()=>{A.value=!1},100)}}},ut=async()=>{if(!A.value){A.value=!0;try{q.value||z.value,k.value=null,await et(),dt(),await tt()}finally{setTimeout(()=>{A.value=!1},100)}}};Tt(async()=>{if(await O(),await _t(),k.value=T.query.period||"last_month",q.value=T.query.date_from||null,z.value=T.query.date_to||null,k.value&&!q.value&&!z.value){const i=rt(k.value);q.value=i.date_from,z.value=i.date_to}await tt()}),$t([G,X],()=>{A.value||tt()});const tt=async()=>{const i={state_id:K.value,sort_by:G.value,cities_limit:X.value};q.value&&z.value?(i.date_from=q.value,i.date_to=z.value):k.value&&(i.period=k.value),await st(P.value,i)},j=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1","#14B8A6","#A855F7","#22C55E","#F43F5E","#0EA5E9","#64748B","#D946EF","#FBBF24","#34D399","#60A5FA"],vt=F(()=>({chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Provider Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:E.value.labels,colors:j,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(i){return i.toFixed(1)+"%"}}})),ht=F(()=>{const i=c.value.categories||[];return{chart:{type:"bar",fontFamily:"inherit",height:Math.max(400,(c.value.categories.length||5)*50),toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0,borderRadius:4,barHeight:"70%",distributed:c.value.colors.length>0}},dataLabels:{enabled:!0,formatter:function(t,R){const n=R.dataPointIndex,m=i[n]||"",y=c.value.percentages[n];return y!==void 0?`${m}: ${t.toLocaleString()} (${y.toFixed(1)}%)`:`${m}: ${t.toLocaleString()}`},style:{fontSize:"11px",fontWeight:600,colors:["#fff"]}},xaxis:{title:{text:"Number of Requests"},labels:{formatter:function(t){return t.toLocaleString()}}},yaxis:{categories:i,labels:{style:{fontSize:"12px"},maxWidth:150}},colors:c.value.colors.length>0?c.value.colors:j,grid:{show:!0,borderColor:"#f0f0f0",xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},tooltip:{custom:function({series:t,seriesIndex:R,dataPointIndex:n,w:m}){const y=i[n]||"Unknown",M=t[R][n],W=c.value.percentages[n];let v='<div style="padding: 8px;">';return v+=`<div style="font-weight: 600; margin-bottom: 4px;">${y}</div>`,v+=`<div>${M.toLocaleString()} requisi√ß√µes`,W!==void 0&&(v+=` (${W.toFixed(1)}%)`),v+="</div>",v+="</div>",v}}}}),gt=F(()=>({chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Technology Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:x.value.labels,colors:j,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(i){return i.toFixed(1)+"%"}}})),xt=F(()=>({chart:{type:"line",fontFamily:"inherit",height:350,toolbar:{show:!1}},title:{text:"Daily Trends",align:"left",style:{fontSize:"18px",fontWeight:600}},dataLabels:{enabled:!1},xaxis:{categories:f.value.categories,labels:{style:{fontSize:"12px"}}},yaxis:{title:{text:"Number of Requests"}},colors:["#4caf50"],grid:{show:!0,borderColor:"#f0f0f0"},stroke:{curve:"smooth",width:3}})),yt=i=>i>=1e6?(i/1e6).toFixed(1)+"M":i>=1e3?(i/1e3).toFixed(1)+"K":i.toString(),bt=i=>i.toFixed(1)+"%",wt=i=>i.toFixed(2),kt=()=>{mt("/analytics")};return(i,t)=>{const R=b("v-btn"),n=b("v-col"),m=b("v-row"),y=b("v-select"),M=b("v-progress-circular"),W=b("v-alert"),v=b("v-icon"),H=b("v-card-text"),Y=b("v-card"),U=b("apexchart"),St=b("v-divider"),B=b("v-chip"),lt=b("v-table"),Ct=b("v-expansion-panel-title"),Ft=b("v-expansion-panel-text"),qt=b("v-expansion-panel"),zt=b("v-expansion-panels");return r(),p("div",null,[e(m,{class:"mb-4"},{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[s("div",Nt,[s("div",Vt,[e(R,{variant:"text","prepend-icon":"mdi-arrow-left",onClick:kt,class:"mb-2"},{default:a(()=>t[5]||(t[5]=[h(" Back to Analytics ")])),_:1}),s("h1",Wt,d(pt.value?.name||"Domain")+" - "+d(nt.value?.name||"State")+" ("+d(nt.value?.code)+") ",1),l(g)?(r(),p("p",Ut," Period: "+d(l(g).period.date_from)+" to "+d(l(g).period.date_to)+" | "+d(l(g).period.days_covered)+" days | "+d(l(g).period.total_reports)+" reports ",1)):L("",!0)])])]),_:1})]),_:1}),e(m,{class:"mb-4"},{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[e(S,{title:"Filters"},{default:a(()=>[e(m,null,{default:a(()=>[e(n,{cols:"12",md:"3"},{default:a(()=>[e(y,{modelValue:k.value,"onUpdate:modelValue":[t[0]||(t[0]=o=>k.value=o),ft],items:[{value:"today",title:"üìÖ Today"},{value:"yesterday",title:"üìÖ Yesterday"},{value:"last_week",title:"üìÖ Last Week"},{value:"last_month",title:"üìÖ Last Month"},{value:"last_year",title:"üìÖ Last Year"},{value:"all_time",title:"üìÖ All Time"}],label:"Period",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-calendar-range",clearable:""},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"4"},{default:a(()=>[e(ct,{"model-value":q.value,label:"Start Date","prepend-inner-icon":"mdi-calendar-start","onUpdate:modelValue":t[1]||(t[1]=async o=>{q.value=o,await et(),ut()})},null,8,["model-value"])]),_:1}),e(n,{cols:"12",md:"4"},{default:a(()=>[e(ct,{"model-value":z.value,label:"End Date","prepend-inner-icon":"mdi-calendar-end","onUpdate:modelValue":t[2]||(t[2]=async o=>{z.value=o,await et(),ut()})},null,8,["model-value"])]),_:1}),e(n,{cols:"12",md:"3"},{default:a(()=>[e(y,{modelValue:G.value,"onUpdate:modelValue":t[3]||(t[3]=o=>G.value=o),items:[{value:"total_count",title:"Total Requests"},{value:"success_rate",title:"Success Rate"},{value:"avg_speed",title:"Avg Speed"}],label:"Sort By",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-sort"},null,8,["modelValue"])]),_:1}),e(n,{cols:"12",md:"2"},{default:a(()=>[e(y,{modelValue:X.value,"onUpdate:modelValue":t[4]||(t[4]=o=>X.value=o),modelModifiers:{number:!0},items:[{value:5,title:"Top 5"},{value:10,title:"Top 10"},{value:20,title:"Top 20"},{value:50,title:"Top 50"},{value:100,title:"Top 100"}],"item-value":"value","item-title":"title",label:"Cities Limit",variant:"outlined",density:"compact","prepend-inner-icon":"mdi-city"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(at)?(r(),C(m,{key:0},{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[e(S,null,{default:a(()=>[s("div",Et,[e(M,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):l(Q)?(r(),C(m,{key:1},{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[e(S,null,{default:a(()=>[e(W,{type:"error",variant:"tonal",class:"mb-0"},{default:a(()=>[h(d(l(Q)),1)]),_:1})]),_:1})]),_:1})]),_:1})):l(g)?(r(),p("div",It,[e(m,{class:"mb-4"},{default:a(()=>[e(n,{cols:"12",sm:"6",md:"3"},{default:a(()=>[e(Y,{elevation:"2",class:"h-100"},{default:a(()=>[e(H,null,{default:a(()=>[s("div",Ot,[t[7]||(t[7]=s("div",{class:"text-h6 text-medium-emphasis"},"Total Requests",-1)),e(v,{color:"primary",size:"32"},{default:a(()=>t[6]||(t[6]=[h("mdi-chart-line")])),_:1})]),s("div",jt,d(yt(l(w).totalRequests)),1),t[8]||(t[8]=s("div",{class:"text-caption text-medium-emphasis mt-1"}," All time requests ",-1))]),_:1})]),_:1})]),_:1}),e(n,{cols:"12",sm:"6",md:"3"},{default:a(()=>[e(Y,{elevation:"2",class:"h-100"},{default:a(()=>[e(H,null,{default:a(()=>[s("div",Mt,[t[10]||(t[10]=s("div",{class:"text-h6 text-medium-emphasis"},"Success Rate",-1)),e(v,{color:"success",size:"32"},{default:a(()=>t[9]||(t[9]=[h("mdi-check-circle")])),_:1})]),s("div",Ht,d(bt(l(w).successRate)),1),t[11]||(t[11]=s("div",{class:"text-caption text-medium-emphasis mt-1"}," Successful requests ",-1))]),_:1})]),_:1})]),_:1}),e(n,{cols:"12",sm:"6",md:"3"},{default:a(()=>[e(Y,{elevation:"2",class:"h-100"},{default:a(()=>[e(H,null,{default:a(()=>[s("div",Yt,[t[13]||(t[13]=s("div",{class:"text-h6 text-medium-emphasis"},"Daily Average",-1)),e(v,{color:"info",size:"32"},{default:a(()=>t[12]||(t[12]=[h("mdi-calendar-today")])),_:1})]),s("div",Zt,d(wt(l(w).dailyAverage)),1),t[14]||(t[14]=s("div",{class:"text-caption text-medium-emphasis mt-1"}," Average per day ",-1))]),_:1})]),_:1})]),_:1}),e(n,{cols:"12",sm:"6",md:"3"},{default:a(()=>[e(Y,{elevation:"2",class:"h-100"},{default:a(()=>[e(H,null,{default:a(()=>[s("div",Jt,[t[16]||(t[16]=s("div",{class:"text-h6 text-medium-emphasis"},"Unique Providers",-1)),e(v,{color:"warning",size:"32"},{default:a(()=>t[15]||(t[15]=[h("mdi-domain")])),_:1})]),s("div",Kt,d(l(w).uniqueProviders),1),t[17]||(t[17]=s("div",{class:"text-caption text-medium-emphasis mt-1"}," Different providers ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),e(m,{class:"mb-4"},{default:a(()=>[e(n,{cols:"12",md:"6"},{default:a(()=>[e(S,null,{default:a(()=>[l(E).series.length>0?(r(),p("div",Qt,[e(U,{type:"donut",height:"350",options:vt.value,series:l(E).series},null,8,["options","series"])])):(r(),p("div",Gt,[e(v,{size:"64",color:"grey"},{default:a(()=>t[18]||(t[18]=[h("mdi-chart-donut")])),_:1}),t[19]||(t[19]=s("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No provider data available",-1))]))]),_:1})]),_:1}),e(n,{cols:"12",md:"6"},{default:a(()=>[e(S,null,{default:a(()=>[l(x).series.length>0?(r(),p("div",Xt,[e(U,{type:"donut",height:"350",options:gt.value,series:l(x).series},null,8,["options","series"])])):(r(),p("div",te,[e(v,{size:"64",color:"grey"},{default:a(()=>t[20]||(t[20]=[h("mdi-chart-donut")])),_:1}),t[21]||(t[21]=s("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No technology data available",-1))]))]),_:1})]),_:1})]),_:1}),l(g)?(r(),C(m,{key:0,class:"mb-4"},{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[e(S,{title:"Distribution of Requests by City"},{default:a(()=>[l(c)&&l(c).data&&l(c).data.length>0&&l(c).categories&&l(c).categories.length>0?(r(),p("div",ee,[e(U,{type:"bar",height:Math.max(400,(l(c).categories.length||5)*50),options:ht.value,series:[{name:"Requests",data:l(c).data}]},null,8,["height","options","series"])])):l(g).top_cities&&l(g).top_cities.length>0?(r(),p("div",ae,[e(v,{size:"64",color:"grey"},{default:a(()=>t[22]||(t[22]=[h("mdi-chart-bar")])),_:1}),t[23]||(t[23]=s("p",{class:"text-h6 mt-4 text-medium-emphasis"},"City chart data not available, but cities are listed below",-1))])):(r(),p("div",se,[e(v,{size:"64",color:"grey"},{default:a(()=>t[24]||(t[24]=[h("mdi-chart-bar")])),_:1}),t[25]||(t[25]=s("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No city data available",-1))])),l(c).raw_data&&l(c).raw_data.length>0||l(g).top_cities&&l(g).top_cities.length>0?(r(),p("div",oe,[e(St,{class:"mb-4"}),t[26]||(t[26]=s("div",{class:"text-subtitle-2 text-medium-emphasis mb-3"},"City Rankings",-1)),e(m,null,{default:a(()=>[(r(!0),p(Z,null,J(l(c).raw_data&&l(c).raw_data.length>0?l(c).raw_data:l(g).top_cities,(o,_)=>(r(),C(n,{key:o.city_id,cols:"12",sm:"6",md:"4",lg:"3"},{default:a(()=>[e(Y,{variant:"outlined",class:"h-100"},{default:a(()=>[e(H,{class:"pa-3"},{default:a(()=>[s("div",le,[e(B,{color:_<3?"primary":"default",variant:"flat",size:"small",class:"mr-2"},{default:a(()=>[h(" #"+d(_+1),1)]),_:2},1032,["color"]),s("div",ie,d(o.name),1)]),s("div",ne,d(o.total_requests.toLocaleString()),1),"percentage"in o?(r(),p("div",re,d(o.percentage.toFixed(1))+"% of total ",1)):L("",!0),s("div",de,d("report_count"in o?o.report_count:0)+" report(s) ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):L("",!0)]),_:1})]),_:1})]),_:1})):L("",!0),l(f).data.length>0?(r(),C(m,{key:1,class:"mb-4"},{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[e(S,null,{default:a(()=>[e(U,{type:"line",height:"350",options:xt.value,series:[{name:"Requests",data:l(f).data}]},null,8,["options","series"])]),_:1})]),_:1})]),_:1})):L("",!0),l(g).provider_distribution.length>0?(r(),C(m,{key:2,class:"mb-4"},{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[e(S,{title:"Provider Distribution"},{default:a(()=>[e(lt,null,{default:a(()=>[t[27]||(t[27]=s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"Provider"),s("th",{class:"text-right"},"Total Requests"),s("th",{class:"text-right"},"Percentage"),s("th",{class:"text-right"},"Success Rate"),s("th",{class:"text-right"},"Avg Speed (Mbps)")])],-1)),s("tbody",null,[(r(!0),p(Z,null,J(l(g).provider_distribution,o=>(r(),p("tr",{key:o.provider_id},[s("td",null,[s("div",ue,d(o.name),1),s("div",ce,d(o.slug),1)]),s("td",me,d(o.total_count.toLocaleString()),1),s("td",_e,[e(B,{color:"primary",variant:"tonal",size:"small"},{default:a(()=>[h(d(o.percentage.toFixed(1))+"% ",1)]),_:2},1024)]),s("td",pe,[e(B,{color:o.avg_success_rate>=90?"success":o.avg_success_rate>=70?"warning":"error",variant:"tonal",size:"small"},{default:a(()=>[h(d(o.avg_success_rate.toFixed(1))+"% ",1)]),_:2},1032,["color"])]),s("td",fe,d(o.avg_speed.toFixed(2)),1)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})):L("",!0),l(c).raw_data&&l(c).raw_data.length>0?(r(),C(m,{key:3,class:"mb-4"},{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[e(S,{title:"Cities Distribution"},{default:a(()=>[e(lt,null,{default:a(()=>[t[31]||(t[31]=s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"Rank"),s("th",{class:"text-left"},"City"),s("th",{class:"text-right"},"Total Requests"),s("th",{class:"text-right"},"Percentage"),s("th",{class:"text-right"},"Reports")])],-1)),s("tbody",null,[(r(!0),p(Z,null,J(l(c).raw_data,(o,_)=>(r(),p("tr",{key:o.city_id},[s("td",null,[e(B,{color:_<3?"primary":"default",variant:"flat",size:"small"},{default:a(()=>[_===0?(r(),C(v,{key:0,size:"small",class:"mr-1"},{default:a(()=>t[28]||(t[28]=[h("mdi-trophy")])),_:1})):_===1?(r(),C(v,{key:1,size:"small",class:"mr-1"},{default:a(()=>t[29]||(t[29]=[h("mdi-medal")])),_:1})):_===2?(r(),C(v,{key:2,size:"small",class:"mr-1"},{default:a(()=>t[30]||(t[30]=[h("mdi-medal-outline")])),_:1})):L("",!0),h(" #"+d(_+1),1)]),_:2},1032,["color"])]),s("td",null,[s("div",ve,d(o.name),1),s("div",he,"ID: "+d(o.city_id),1)]),s("td",ge,d(o.total_requests.toLocaleString()),1),s("td",xe,[e(B,{color:"primary",variant:"tonal",size:"small"},{default:a(()=>[h(d("percentage"in o?o.percentage.toFixed(1):"0.0")+"% ",1)]),_:2},1024)]),s("td",ye,[e(B,{size:"small",variant:"outlined"},{default:a(()=>[h(d("report_count"in o?o.report_count:0),1)]),_:2},1024)])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})):L("",!0),l(g).cities_detailed_charts&&l(g).cities_detailed_charts.length>0?(r(),C(m,{key:4,class:"mb-4"},{default:a(()=>[e(n,{cols:"12"},{default:a(()=>[e(S,{title:"Detailed Analysis by City"},{default:a(()=>[e(zt,{variant:"accordion",class:"mb-4"},{default:a(()=>[(r(!0),p(Z,null,J(l(g).cities_detailed_charts,o=>(r(),C(qt,{key:o.city_id},{default:a(()=>[e(Ct,null,{default:a(()=>[s("div",be,[s("div",null,[s("span",we,d(o.city_name),1),s("span",ke," ("+d(o.total_requests.toLocaleString())+" requests) ",1)]),e(B,{color:"primary",variant:"tonal",size:"small"},{default:a(()=>[h(" ID: "+d(o.city_id),1)]),_:2},1024)])]),_:2},1024),e(Ft,null,{default:a(()=>[e(m,null,{default:a(()=>[e(n,{cols:"12",md:"6"},{default:a(()=>[e(S,{title:`Providers - ${o.city_name}`},{default:a(()=>[o.providers_chart.labels.length>0?(r(),p("div",Se,[e(U,{type:"bar",height:"300",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Provider Distribution",align:"left",style:{fontSize:"16px",fontWeight:600}},plotOptions:{bar:{horizontal:!0,borderRadius:4,distributed:!0}},dataLabels:{enabled:!0,formatter:function(_,N){const V=N.dataPointIndex,D=o.providers_chart.percentages[V];return D!==void 0?`${_.toLocaleString()} (${D.toFixed(1)}%)`:_.toLocaleString()},style:{fontSize:"11px",fontWeight:600,colors:["#fff"]}},xaxis:{title:{text:"Number of Requests"},labels:{formatter:function(_){return _.toLocaleString()}}},yaxis:{categories:o.providers_chart.labels,labels:{style:{fontSize:"12px"},maxWidth:120}},colors:o.providers_chart.datasets[0]?.backgroundColor&&o.providers_chart.datasets[0].backgroundColor.length>0?o.providers_chart.datasets[0].backgroundColor:j,grid:{show:!0,borderColor:"#f0f0f0",xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},tooltip:{y:{formatter:function(_,N){const V=N.dataPointIndex,D=o.providers_chart.percentages[V];return D!==void 0?`${_.toLocaleString()} requisi√ß√µes (${D.toFixed(1)}%)`:`${_.toLocaleString()} requisi√ß√µes`}}}},series:[{name:"Requests",data:o.providers_chart.datasets[0]?.data||[]}]},null,8,["options","series"])])):(r(),p("div",Ce,[e(v,{size:"64",color:"grey"},{default:a(()=>t[32]||(t[32]=[h("mdi-chart-bar")])),_:1}),t[33]||(t[33]=s("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No provider data available",-1))]))]),_:2},1032,["title"])]),_:2},1024),e(n,{cols:"12",md:"6"},{default:a(()=>[e(S,{title:`Technologies - ${o.city_name}`},{default:a(()=>[o.technologies_chart.labels.length>0?(r(),p("div",Fe,[e(U,{type:"bar",height:"300",options:{chart:{type:"bar",fontFamily:"inherit",toolbar:{show:!1}},title:{text:"Technology Distribution",align:"left",style:{fontSize:"16px",fontWeight:600}},plotOptions:{bar:{horizontal:!0,borderRadius:4,distributed:!0}},dataLabels:{enabled:!0,formatter:function(_,N){const V=N.dataPointIndex,D=o.technologies_chart.percentages[V];return D!==void 0?`${_.toLocaleString()} (${D.toFixed(1)}%)`:_.toLocaleString()},style:{fontSize:"11px",fontWeight:600,colors:["#fff"]}},xaxis:{title:{text:"Number of Requests"},labels:{formatter:function(_){return _.toLocaleString()}}},yaxis:{categories:o.technologies_chart.labels,labels:{style:{fontSize:"12px"},maxWidth:120}},colors:o.technologies_chart.datasets[0]?.backgroundColor&&o.technologies_chart.datasets[0].backgroundColor.length>0?o.technologies_chart.datasets[0].backgroundColor:j,grid:{show:!0,borderColor:"#f0f0f0",xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},tooltip:{y:{formatter:function(_,N){const V=N.dataPointIndex,D=o.technologies_chart.percentages[V];return D!==void 0?`${_.toLocaleString()} requisi√ß√µes (${D.toFixed(1)}%)`:`${_.toLocaleString()} requisi√ß√µes`}}}},series:[{name:"Requests",data:o.technologies_chart.datasets[0]?.data||[]}]},null,8,["options","series"])])):(r(),p("div",qe,[e(v,{size:"64",color:"grey"},{default:a(()=>t[34]||(t[34]=[h("mdi-chart-bar")])),_:1}),t[35]||(t[35]=s("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No technology data available",-1))]))]),_:2},1032,["title"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})):L("",!0),l(g).top_zip_codes.length>0?(r(),C(m,{key:5},{default:a(()=>[e(n,{cols:"12",md:"6"},{default:a(()=>[e(S,{title:"Top Zip Codes"},{default:a(()=>[e(lt,null,{default:a(()=>[t[36]||(t[36]=s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"Zip Code"),s("th",{class:"text-right"},"Total Requests"),s("th",{class:"text-right"},"Reports")])],-1)),s("tbody",null,[(r(!0),p(Z,null,J(l(g).top_zip_codes,o=>(r(),p("tr",{key:o.zip_code_id},[s("td",ze,d(o.code),1),s("td",Re,d(o.total_requests.toLocaleString()),1),s("td",De,d(o.report_count),1)]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})):L("",!0)])):L("",!0)])}}});export{Be as default};
