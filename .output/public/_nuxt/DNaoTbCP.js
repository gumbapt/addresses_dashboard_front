import{d as K,l as m,o as G,c as r,a as t,h as C,i as H,w as s,r as u,q as i,g as o,j as d,t as c,n as R,L as J,b as l}from"./BaQHY7cA.js";import{_ as v}from"./Be2i4a87.js";import{u as Q}from"./DqoraChs.js";const X={class:"d-flex align-center justify-space-between"},Y={class:"text-h4 font-weight-bold"},Z={class:"text-body-1 text-medium-emphasis"},tt={class:"d-flex justify-center align-center py-8"},et={key:2},st={class:"d-flex align-center justify-space-between mb-2"},ot={class:"text-h3 font-weight-bold text-primary"},at={class:"d-flex align-center justify-space-between mb-2"},it={class:"text-h3 font-weight-bold text-success"},lt={class:"d-flex align-center justify-space-between mb-2"},nt={class:"text-h3 font-weight-bold text-info"},rt={class:"d-flex align-center justify-space-between mb-2"},dt={class:"text-h3 font-weight-bold text-warning"},ut={key:0},pt={key:1,class:"text-center py-8"},mt={key:0},ct={key:1,class:"text-center py-8"},ft={key:0},ht={key:1,class:"text-center py-8"},vt={key:0},_t={key:1,class:"text-center py-8"},wt=K({__name:"dashboard",setup(xt){const q=J(),F=m(()=>parseInt(q.params.id)),{reportData:f,loading:N,error:D,loadDashboardStats:A,providerChartData:y,topStatesChartData:w,speedByStateChartData:S,technologyChartData:k,topCards:_}=Q(),B=m(()=>{var a;return(a=f.value)==null?void 0:a.domain}),O=m(()=>f.value?new Date(f.value.report_date).toLocaleDateString("en-US"):"");G(async()=>{await A(F.value)});const W=m(()=>({chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Provider Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:y.value.labels,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(a){return a.toFixed(1)+"%"}}})),j=m(()=>({chart:{type:"bar",fontFamily:"inherit",height:350,toolbar:{show:!1}},title:{text:"Top States by Requests",align:"left",style:{fontSize:"18px",fontWeight:600}},plotOptions:{bar:{horizontal:!1,borderRadius:8,columnWidth:"55%",distributed:!1}},dataLabels:{enabled:!1},xaxis:{categories:w.value.categories,labels:{style:{fontSize:"12px"}}},yaxis:{title:{text:"Number of Requests"}},colors:["#1976d2"],grid:{show:!0,borderColor:"#f0f0f0"}})),T=m(()=>({chart:{type:"bar",fontFamily:"inherit",height:350,toolbar:{show:!1}},title:{text:"Average Speed by State",align:"left",style:{fontSize:"18px",fontWeight:600}},plotOptions:{bar:{horizontal:!1,borderRadius:8,columnWidth:"55%",distributed:!1}},dataLabels:{enabled:!1},xaxis:{categories:S.value.categories,labels:{style:{fontSize:"12px"}}},yaxis:{title:{text:"Average Speed (Mbps)"}},colors:["#4caf50"],grid:{show:!0,borderColor:"#f0f0f0"}})),L=m(()=>({chart:{type:"donut",fontFamily:"inherit",height:350},title:{text:"Technology Distribution",align:"left",style:{fontSize:"18px",fontWeight:600}},labels:k.value.labels,responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}],plotOptions:{pie:{donut:{labels:{show:!0,total:{show:!0,label:"Total",fontSize:"20px",fontWeight:600}}}}},legend:{position:"bottom"},dataLabels:{enabled:!0,formatter:function(a){return a.toFixed(1)+"%"}}})),M=a=>a>=1e6?(a/1e6).toFixed(1)+"M":a>=1e3?(a/1e3).toFixed(1)+"K":a.toString(),P=a=>a.toFixed(1)+"%",V=a=>a.toFixed(2),I=()=>{var a;(a=f.value)!=null&&a.domain_id?R(`/domains/${f.value.domain_id}/reports`):R("/reports")};return(a,e)=>{const U=u("v-btn"),n=u("v-col"),h=u("v-row"),$=u("v-progress-circular"),E=u("v-alert"),p=u("v-icon"),x=u("v-card-text"),b=u("v-card"),g=u("apexchart");return l(),r("div",null,[t(h,{class:"mb-4"},{default:s(()=>[t(n,{cols:"12"},{default:s(()=>{var z;return[o("div",X,[o("div",null,[t(U,{variant:"text","prepend-icon":"mdi-arrow-left",onClick:I,class:"mb-2"},{default:s(()=>e[0]||(e[0]=[d(" Back to Reports ")])),_:1}),o("h1",Y,c(((z=B.value)==null?void 0:z.name)||"Report Dashboard"),1),o("p",Z," Report Date: "+c(O.value)+" | Analytics and statistics ",1)])])]}),_:1})]),_:1}),i(N)?(l(),C(h,{key:0},{default:s(()=>[t(n,{cols:"12"},{default:s(()=>[t(v,null,{default:s(()=>[o("div",tt,[t($,{indeterminate:"",color:"primary",size:"64"})])]),_:1})]),_:1})]),_:1})):i(D)?(l(),C(h,{key:1},{default:s(()=>[t(n,{cols:"12"},{default:s(()=>[t(v,null,{default:s(()=>[t(E,{type:"error",variant:"tonal",class:"mb-0"},{default:s(()=>[d(c(i(D)),1)]),_:1})]),_:1})]),_:1})]),_:1})):i(f)?(l(),r("div",et,[t(h,{class:"mb-4"},{default:s(()=>[t(n,{cols:"12",sm:"6",md:"3"},{default:s(()=>[t(b,{elevation:"2",class:"h-100"},{default:s(()=>[t(x,null,{default:s(()=>[o("div",st,[e[2]||(e[2]=o("div",{class:"text-h6 text-medium-emphasis"},"Total Requests",-1)),t(p,{color:"primary",size:"32"},{default:s(()=>e[1]||(e[1]=[d("mdi-chart-line")])),_:1})]),o("div",ot,c(M(i(_).totalRequests)),1),e[3]||(e[3]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," All time requests ",-1))]),_:1})]),_:1})]),_:1}),t(n,{cols:"12",sm:"6",md:"3"},{default:s(()=>[t(b,{elevation:"2",class:"h-100"},{default:s(()=>[t(x,null,{default:s(()=>[o("div",at,[e[5]||(e[5]=o("div",{class:"text-h6 text-medium-emphasis"},"Success Rate",-1)),t(p,{color:"success",size:"32"},{default:s(()=>e[4]||(e[4]=[d("mdi-check-circle")])),_:1})]),o("div",it,c(P(i(_).successRate)),1),e[6]||(e[6]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Successful requests ",-1))]),_:1})]),_:1})]),_:1}),t(n,{cols:"12",sm:"6",md:"3"},{default:s(()=>[t(b,{elevation:"2",class:"h-100"},{default:s(()=>[t(x,null,{default:s(()=>[o("div",lt,[e[8]||(e[8]=o("div",{class:"text-h6 text-medium-emphasis"},"Daily Average",-1)),t(p,{color:"info",size:"32"},{default:s(()=>e[7]||(e[7]=[d("mdi-calendar-today")])),_:1})]),o("div",nt,c(V(i(_).dailyAverage)),1),e[9]||(e[9]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Average per day ",-1))]),_:1})]),_:1})]),_:1}),t(n,{cols:"12",sm:"6",md:"3"},{default:s(()=>[t(b,{elevation:"2",class:"h-100"},{default:s(()=>[t(x,null,{default:s(()=>[o("div",rt,[e[11]||(e[11]=o("div",{class:"text-h6 text-medium-emphasis"},"Unique Providers",-1)),t(p,{color:"warning",size:"32"},{default:s(()=>e[10]||(e[10]=[d("mdi-domain")])),_:1})]),o("div",dt,c(i(_).uniqueProviders),1),e[12]||(e[12]=o("div",{class:"text-caption text-medium-emphasis mt-1"}," Different providers ",-1))]),_:1})]),_:1})]),_:1})]),_:1}),t(h,{class:"mb-4"},{default:s(()=>[t(n,{cols:"12",md:"6"},{default:s(()=>[t(v,null,{default:s(()=>[i(y).series.length>0?(l(),r("div",ut,[t(g,{type:"donut",height:"350",options:W.value,series:i(y).series},null,8,["options","series"])])):(l(),r("div",pt,[t(p,{size:"64",color:"grey"},{default:s(()=>e[13]||(e[13]=[d("mdi-chart-donut")])),_:1}),e[14]||(e[14]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No provider data available",-1))]))]),_:1})]),_:1}),t(n,{cols:"12",md:"6"},{default:s(()=>[t(v,null,{default:s(()=>[i(w).data.length>0?(l(),r("div",mt,[t(g,{type:"bar",height:"350",options:j.value,series:[{name:"Requests",data:i(w).data}]},null,8,["options","series"])])):(l(),r("div",ct,[t(p,{size:"64",color:"grey"},{default:s(()=>e[15]||(e[15]=[d("mdi-chart-bar")])),_:1}),e[16]||(e[16]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No state data available",-1))]))]),_:1})]),_:1})]),_:1}),t(h,null,{default:s(()=>[t(n,{cols:"12",md:"6"},{default:s(()=>[t(v,null,{default:s(()=>[i(S).data.length>0?(l(),r("div",ft,[t(g,{type:"bar",height:"350",options:T.value,series:[{name:"Avg Speed (Mbps)",data:i(S).data}]},null,8,["options","series"])])):(l(),r("div",ht,[t(p,{size:"64",color:"grey"},{default:s(()=>e[17]||(e[17]=[d("mdi-speedometer")])),_:1}),e[18]||(e[18]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No speed data available",-1))]))]),_:1})]),_:1}),t(n,{cols:"12",md:"6"},{default:s(()=>[t(v,null,{default:s(()=>[i(k).series.length>0?(l(),r("div",vt,[t(g,{type:"donut",height:"350",options:L.value,series:i(k).series},null,8,["options","series"])])):(l(),r("div",_t,[t(p,{size:"64",color:"grey"},{default:s(()=>e[19]||(e[19]=[d("mdi-chart-donut")])),_:1}),e[20]||(e[20]=o("p",{class:"text-h6 mt-4 text-medium-emphasis"},"No technology data available",-1))]))]),_:1})]),_:1})]),_:1})])):H("",!0)])}}});export{wt as default};
